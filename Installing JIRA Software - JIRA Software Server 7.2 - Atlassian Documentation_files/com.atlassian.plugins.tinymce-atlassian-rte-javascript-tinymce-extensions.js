;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/themes/atlassian/editor_template.js' */
define("atlassian-tinymce/themes/atlassian/editor_template",["ajs","confluence/legacy","jquery","tinymce","underscore"],function(k,j,g,h,i){return function(){var l=h.DOM,m=h.each,n=h.explode,o=h.extend,e;e=function(a){this.init=this.init(a)};e.INCOMPATIBLE_PLUGINS=["dfe"];e.shouldInit=function(){var a=g("body");return a.hasClass("edit")||a.hasClass("create")||a.hasClass("copy-page")};e.suppressIncompatiblePlugins=function(){for(var a=function(){},b=0,f=e.INCOMPATIBLE_PLUGINS.length;b<f;b++)h.PluginManager.lookup[e.INCOMPATIBLE_PLUGINS[b]]=
a};e.prototype.init=function(a){function b(a){c.toggleToolbarButtons(a,a,a,function(){return!g(this).parent().hasClass("close")})}function f(){var a=m-i.scrollTop(),c=l.offset().top-h.offset().top,b=j.outerHeight(),d=l.outerHeight();j.css("top",c+d+a+o+"px");e.css("padding-top",b+n+"px")}var d=g.ui.keyCode,c=a.plugins.customtoolbar,q=g("#content-title"),h=g("form.editor"),e=g(a.getBody()),i=g(a.getDoc()),j=g("#editor-precursor"),k=g(a.getWin()),l=g("#toolbar"),m=i.scrollTop(),n=parseInt(e.css("padding-top"),
10)+parseInt(e.css("margin-top"),10),o=parseInt(j.css("padding-top"),10),r=window.requestAnimationFrame||window.webkitRequestAnimationFrame;q.on("keydown",function(c){var b=c.keyCode||c.which;if(b===d.ENTER||b===d.DOWN)c.preventDefault(),c.stopPropagation(),a.focus()}).on("focus click",function(){b(!0)});k.on("focus",function(){b(!1)});(function p(){r(p);f()})();e.on("scroll mousewheel",function(){setTimeout(f,0)});return!0};return{Editor:e,ThemeOptions:{controlHandlers:{},controls:{bold:"Bold",italic:"Italic",
underline:"Underline",strikethrough:"Strikethrough",justifyleft:"JustifyLeft",justifycenter:"JustifyCenter",justifyright:"JustifyRight",bullist:"InsertUnorderedList",numlist:"InsertOrderedList",tasklist:"InsertInlineTaskList",outdent:"Outdent",indent:"Indent",cut:"Cut",copy:"Copy",paste:"Paste",undo:"Undo",redo:"Redo",removeformat:"RemoveFormat",sub:"subscript",sup:"superscript",forecolor:"ForeColor",forecolorpicker:"mceForeColor",backcolor:"HiliteColor",backcolorpicker:"mceBackColor",charmap:"mceCharMap",
visualaid:"mceToggleVisualAid",anchor:"mceInsertAnchor",newdocument:"mceNewDocument",blockquote:"mceBlockQuote"},stateControls:"bold italic underline bullist numlist tasklist justifyleft justifycenter justifyright strikethrough sub sup monospace".split(" "),init:function(a,b){var f=e.shouldInit(),d=this;f&&e.suppressIncompatiblePlugins();d.editor=a;d.url=b;d.settings=o({theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"formatselect,bold,italic,underline,strikethrough,forecolor,separator,table,row_before,row_after,delete_row,col_before,col_after,delete_col,delete_table,separator,bullist,numlist,tasklist,outdent,indent,blockquote,justifyleft,justifycenter,justifyright,justifyfull,separator,sup,sub,separator,undo,redo,separator,conflink,oldlinkbrowserButton,confimage,conf_macro_browser,separator,search,code,customtoolbar, monospacep,h1,h2,h3,h4,h5,h6,pre,blockquote",
readonly:a.settings.readonly},a.settings);a.onInit.add(function(){a.settings.readonly||(a.onNodeChange.add(d.nodeChanged,d),a.onKeyUp.add(d._updateUndoStatus,d),a.onMouseUp.add(d._updateUndoStatus,d),a.dom.bind(a.dom.getRoot(),"dragend",function(){d._updateUndoStatus(a)}),f&&new e(a))})},execCommand:function(a,b,f){return(a=this["_"+a])?(a.call(this,b,f),!0):!1},renderUI:function(a){this.bindControls();return{iframeContainer:l.get("rte"),editorContainer:"wysiwyg",sizeContainer:void 0,deltaHeight:a.deltaHeight}},
getInfo:function(){return{longname:"Confluence theme",author:"Atlassian",authorurl:"http://tinymce.moxiecode.com",version:h.majorVersion+"."+h.minorVersion}},bindControls:function(){var a=this;m(n(a.settings.theme_advanced_buttons1),function(b){if(!a.createEditorButtons(b))switch(b){case "formatselect":a.createBlockFormats()}});a.bindControlHandlers();a.renderToolbarButtons()},renderToolbarButtons:function(){var a=this,b=j.Templates.Editor.Toolbar.toolbarButton,f={toolbar:"toolbar-primary",title:"",
tooltip:"",cmd:"",className:"",locationGroup:null,weight:Infinity,onclick:null},d=i.map(this.editor.buttons,function(a,b){a=i.extend({},f,a);a.id=b;a.weight=i.isNumber(a.weight)?a.weight:Infinity;return a}),d=i.filter(d,function(a){return!!a.locationGroup});i.each(["toolbar-primary"],function(c){var f=g("."+c),c=i.where(d,{toolbar:c}),c=i.sortBy(c,"weight");i.each(c,function(c){a.createEditorButtons(c.id);var d=f.find("."+c.locationGroup),c=g(b({button:c}));d.append(c).removeClass("hidden")})})},
createEditorButtons:function(a){var b=this.editor.buttons[a];if(b)this.controls[a]=b.cmd?b.cmd:b.onclick;else return!1},bindControlHandlers:function(){var a=this;a.controlHandlers.buttons={};a.controlHandlers.buttons.state=new h.util.Dispatcher;a.controlHandlers.buttons.click=new h.util.Dispatcher;a.controlHandlers.buttons.click.add(function(b){var f=a.controls[b],d=typeof f;"string"===d?k.Rte.getEditor().execCommand(a.controls[b]):"function"===d&&f()})},createBlockFormats:function(){this.controlHandlers.formatselect=
{};this.controlHandlers.formatselect.state=new h.util.Dispatcher;this.controlHandlers.formatselect.click=new h.util.Dispatcher;this.controlHandlers.formatselect.click.add(function(a){k.Rte.getEditor().execCommand("FormatBlock",!1,a)})},createForeColorMenu:function(){return!0},_updateUndoStatus:function(a){a=a.undoManager;this.controlHandlers.buttons.state.dispatch("undo","disabled",!a.hasUndo()&&!a.typing);this.controlHandlers.buttons.state.dispatch("redo","disabled",!a.hasRedo())},nodeChanged:function(a,
b,f,d,c){var e=this;m(e.stateControls,function(b){e.controlHandlers.buttons.state.dispatch(b,"active",!!a.queryCommandState(e.controls[b]))});e._updateUndoStatus(a);e.controlHandlers.buttons.state.dispatch("outdent","disabled",!a.queryCommandState("Outdent"));a:{b=l.isBlock;f=c.parents;for(c=0;c<f.length;c++)if(b(f[c])){c=f[c];break a}c=void 0}c&&e.controlHandlers.formatselect.state.dispatch(c.nodeName.toLowerCase())}}}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/themes/atlassian/editor_template",function(k){require("ajs").toInit(function(){var j=require("tinymce"),g=k();j.ThemeManager.requireLangPack("advanced");j.create("tinymce.themes.ConfluenceTheme",g.ThemeOptions);j.ThemeManager.add("atlassian",j.themes.ConfluenceTheme);window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame})});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/jquery/jquery-column.js' */
/*
 jQuery Column cell selector v1.0

 Licensed under the new BSD License.
 Copyright 2009-2012, Bram Stein
 All rights reserved.

 ATLASSIAN modified: Removed all extensions,modifications to jQuery expression internals (jQuery.expr)
 now creates pseudo selector via jQuery/Sizzle preferred method
*/
define("atlassian-tinymce/jquery/jquery-column",["jquery"],function(f){var g=/([\+\-]?\d*)[nN]([\+\-]?\d*)/,k,c;return{nthCol:function(a){var i=[],j={multiplier:0,offset:0};"even"===a?a="2n":"odd"===a?a="2n+1":/^\d*$/.test(a)&&(a="0n+"+a);i=g.exec(a);null!==i&&(j.multiplier=i[1]-0,j.offset=i[2]-0);c=j;var d,l,e=[],h=0,m=[];f.each(this,function(n,a){var b=0,c=0,f=a.rowSpan||1,g=a.colSpan||1;if(a.parentNode!==d){d=a.parentNode;if(d.parentNode!==l){l=d.parentNode;e=[]}h=0;e[d.rowIndex]===void 0&&(e[d.rowIndex]=
[])}for(b=0;b<e[d.rowIndex].length+1;b=b+1)if(e[d.rowIndex][b]===void 0){h=b;break}m[n]=h;for(b=d.rowIndex;b<d.rowIndex+f;b=b+1){e[b]===void 0&&(e[b]=[]);for(c=h;c<h+g;c=c+1)e[b][c]=true}});k=m;return f(this).filter(function(a){a=k[a]-(c.offset-1);a=c.multiplier===0?a===0:a%c.multiplier===0&&a/c.multiplier>=0;return a})}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/jquery/jquery-column",function(f){var g=require("jquery");g.extend(g.fn,f)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/lists/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/lists/editor_plugin_src",["tinymce","ajs","jquery"],function(d,o,D){function E(a,b){for(;a&&(8===a.nodeType||3===a.nodeType&&/^[ \t\n\r]*$/.test(a.nodeValue));)a=b(a);return a}function r(a){return E(a,function(a){return a.previousSibling})}function u(a){return E(a,function(a){return a.nextSibling})}function F(a,b,k){return a.dom.getParent(b,function(a){return-1!==d.inArray(k,a)})}function q(a){return a&&("OL"===a.tagName||"UL"===a.tagName)}function C(a,b){var d,c;
for(d=r(a.lastChild);q(d);)c=d,d=r(c.previousSibling);c&&(d=b.create("li",{style:v}),b.split(a,c),b.insertAfter(d,c),d.appendChild(c),d.appendChild(c),a=d.previousSibling);return a}function x(a,b,d){var c=r(a.previousSibling),a=c?w(c,a,b?c:!1,d):a;return G(a,b,d)}function G(a,b,d){var c=u(a.nextSibling);return c?w(a,c,b?c:!1,d):a}function w(a,b,d,c){var f=!!d;if(!a||!b)c=!1;else if("LI"===a.tagName&&"LI"===b.tagName)c="none"===b.style.listStyleType||H(b);else if(q(a)){if(!(c=a.tagName===b.tagName&&
a.className===b.className&&(f||a.style.listStyleType===b.style.listStyleType)))c=u(b.firstChild),f=r(b.lastChild),c=c&&f&&q(b)&&c===f&&(q(c)||"none"===c.style.listStyleType||H(c))}else c=c&&"P"===a.tagName&&"P"===b.tagName;if(c){c=r(a.lastChild);f=u(b.firstChild);for("P"===a.tagName&&a.appendChild(a.ownerDocument.createElement("br"));b.firstChild;)a.appendChild(b.firstChild);d&&(a.style.listStyleType=d.style.listStyleType);b.parentNode.removeChild(b);w(c,f,!1);return a}a&&("LI"===a.tagName&&q(b))&&
a.appendChild(b);return b}function H(a){var d=u(a.firstChild),a=r(a.lastChild);return d&&a&&d===a&&q(d)}function I(a,d){var k;d.is(a,"li,ol,ul")||(k=d.getParent(a,"li"))&&(a=k);return a}var v="list-style-type: none; background-image: none;",J="a,b,i,em,strong,u,span,s,sub,sup,code,br",y=d.each,s=d.dom.Event,z;return{init:function(a){function b(){var n=a.selection.getStart();return"LI"==n.tagName?n:a.dom.getParent(n,"li")}function k(a){if(a){var a=D(a),d=a.find("*"),e=d.filter(J);return d.length!==
e.length?!1:0===o.trim(a.text()).length&&1>=e.filter("br").length}return!1}function c(n){if(n&&(d.isGecko||d.isWebKit))for(var n=n.childNodes,b,e=n.length-1;0<=e;e--)b=n[e],3===b.nodeType&&!b.length&&a.dom.remove(b)}function f(a,c){if(c.keyCode===d.VK.BACKSPACE&&d.isWebKit){var e=b();if(e){var h=a.dom.getParent(e,"ol,ul"),f=a.selection.getRng();if(h&&h.firstChild===e&&(0===f.startOffset||1===f.startOffset&&""===f.startContainer.textContent)&&!a.selection.getContent().trim()&&f.startContainer.textContent===
e.textContent)return a.execCommand("Outdent",!1,e),a.undoManager.add(),s.cancel(c)}}}function j(a,b,e){e&&(1===e.nodeType&&a.dom.is(e,"li"))&&(b=e.parentNode,d.each(a.dom.select("li>ul,li>ol",b),function(d){a.dom.getAttrib(d.parentNode,"data-mce-style")||d.previousSibling||d.parentNode.insertBefore(a.dom.doc.createElement("br"),d)}))}function m(a,c){var e,h;if(b()&&(c.keyCode===d.VK.ENTER&&!c.shiftKey||c.keyCode===d.VK.BACKSPACE||c.keyCode===d.VK.DELETE)){e=a.selection.getRng(!0);h=e.endContainer;
if(3===h.nodeType){if(e.endOffset!==h.length)return;h=h.nextSibling}else if(1===h.nodeType)h=h.childNodes[e.endOffset];else return;if(h&&a.dom.is(h,"ul,ol"))if(d.isIE){var f=h,i=a.dom.doc.createTextNode(String.fromCharCode(160)),g=f.previousSibling;e=d.isIE6||d.isIE7||d.isIE8?e:a.getDoc().createRange();g&&3===g.nodeType&&g.nodeValue[g.length-1]==i.nodeValue?(e.setStart(g,g.length-1),e.setEnd(g,g.length-1)):(h.parentNode.insertBefore(i,f),e.setStartBefore(i),e.setEndBefore(i));e.collapse(!0);a.selection.setRng(e)}else h.parentNode.insertBefore(a.dom.create("br"),
h)}}function g(a){function f(d){var e=d.parentNode,b=e.previousSibling,h;c(e);e.childNodes[0]===d&&!a.dom.getAttrib(e,"data-mce-style")&&(a.selection.getStart().parentNode==d&&(h=a.selection.getRng(!0),h={startOffset:h.startOffset,startContainer:h.startContainer}),b?b.appendChild(d):(b=a.dom.create("li",{style:v}),b.appendChild(d),e.parentNode.insertBefore(b,e)),h&&a.selection.setCursorLocation(h.startContainer||d.firstChild,h.startOffset),k(e)&&a.dom.remove(e))}var e=b();if(e){var h=e.parentNode;
d.grep(a.dom.select("li>ul, li>ol",h),f);a.dom.is(h.parentNode,"li")&&f(h);e===h.lastChild&&(h.nextSibling&&a.dom.is(h.nextSibling,"ul, ol"))&&d.grep(a.dom.select("li>ul, li>ol",h.nextSibling),f)}}function l(a,d){if(46===d.keyCode&&!d.shiftKey){var e=b();if(e&&(0===e.childNodes.length||1===e.childNodes.length&&"BR"===e.firstChild.nodeName)){var c,f;if(c=e.nextSibling)c=a.dom.doc.createTreeWalker(c,NodeFilter.SHOW_TEXT,null,!1),c=c.nextNode(),f=a.getDoc().createRange(),f.setStart(c,0),f.setEnd(c,0),
a.selection.setRng(f),a.dom.remove(e),a.undoManager.add(),s.cancel(d)}}}var p="UNKNOWN";this.ed=a;a.addCommand("Indent",this.indent,this);a.addCommand("Outdent",this.outdent,this);a.addCommand("InsertUnorderedList",function(){this.applyList("UL","OL")},this);a.addCommand("InsertOrderedList",function(){this.applyList("OL","UL")},this);a.addCommand("InsertInlineTaskList",function(){o.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},
placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date"})},this);a.addCommand("InsertInlineTaskListNoToggle",function(){o.Rte.Support.inlineTasks()&&this.applyList("UL","OL","inline-task-list",{attributesOnItems:{"data-inline-task-id":""},placeholderText:"Type your task here, using \"@\" to assign to a user and \"//\" to select a due date",noToggle:!0})},this);a.onInit.add(function(){a.editorCommands.addCommands({outdent:function(){function d(b){return(b=e.getParent(b,e.isBlock))&&0<parseInt(a.dom.getStyle(b,
"margin-left")||0,10)+parseInt(a.dom.getStyle(b,"padding-left")||0,10)}var b=a.selection,e=a.dom;return d(b.getStart())||d(b.getEnd())||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertInlineTaskList")}},"state")});a.onKeyUp.add(function(f,g){if("TABBING"==p)return f.execCommand(g.shiftKey?"Outdent":"Indent",!0,null),c(b()),p="UNKNOWN",s.cancel(g);if("EMPTY"==p){var e=b();f.execCommand(!0===f.settings.list_outdent_on_enter||g.shiftKey?
"Outdent":"Indent",!0,null);if(d.isIE){var h=a.dom.getParent(e,"ol,ul");null!=h&&(h=h.lastChild,h.appendChild(a.getDoc().createTextNode(o.Rte.HIDDEN_CHAR)),a.selection.setCursorLocation(h,0))}c(e);o.Rte.showSelection();return s.cancel(g)}if("ESCAPE"==p)if(d.isIE6||d.isIE7||d.isIE8)e=f.getDoc().createTextNode(o.Rte.HIDDEN_CHAR),f.selection.getNode().appendChild(e);else if(d.isIE9||d.isIE10||d.isIE11||d.isGecko||d.isWebKit)return f.execCommand("Outdent"),s.cancel(g)});a.onKeyDown.add(function(c,f){if(f.keyCode===
d.VK.TAB&&!f.altKey&&!f.ctrlKey&&(a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||a.queryCommandState("InsertInlineTaskList")||a.queryCommandState("InsertInlineTaskListNoToggle")))p="TABBING";else{var e;if(e=f.keyCode===d.VK.ENTER&&!f.shiftKey)if(e=b()){var h=e.parentNode.parentNode;e=e.parentNode.lastChild===e&&!(q(h)?h.parentNode&&"LI"===h.parentNode.tagName:"LI"===h.tagName)&&k(e)}else e=!1;p=e?"ESCAPE":f.keyCode===d.VK.ENTER&&!f.shiftKey&&a.selection.isCollapsed()&&
k(b())?"EMPTY":"UNKNOWN"}});a.onKeyDown.add(function(a,b){("TABBING"==p||"EMPTY"==p||(d.isGecko||d.isWebKit)&&"ESCAPE"==p)&&s.cancel(b)});a.onKeyDown.add(function(a,b){var e;if(d.isGecko){var c=a.selection.getStart();if(!(b.keyCode!=d.VK.BACKSPACE||"IMG"!==c.tagName))if(e=c.parentNode.previousSibling){if(!("UL"===e.tagName||"OL"===e.tagName))if(e.previousSibling&&("UL"===e.previousSibling.tagName||"OL"===e.previousSibling.tagName))e=e.previousSibling;else return;e=e.firstChild;var f=null;do{if(!e)break;
"LI"===e.tagName&&(f=e)}while(e=e.nextSibling);e=f;f=a.dom.createRng();f.setStart(e,1);f.setEnd(e,1);a.selection.setRng(f);a.selection.collapse(!0);var f=a.selection.getBookmark(),g=c.parentNode.cloneNode(!0);if("P"===g.tagName||"DIV"===g.tagName)for(;0<g.childNodes.length;)e.appendChild(g.childNodes[0]);else e.appendChild(g);c.parentNode.parentNode.removeChild(c.parentNode);a.selection.moveToBookmark(f)}}});a.onKeyDown.add(function(b,c){var e;if(e=c.keyCode===d.VK.ENTER&&!c.shiftKey){var f=a.selection.getNode();
e=a.dom.is(f,"h1,h2,h3,h4,h5,h6,p,div")&&"LI"===f.parentNode.tagName&&f.parentNode.lastChild===f;f=o.EditorUtils.isCursorAtEndOf(f,a.selection.getRng(!0));e=a.selection.isCollapsed()&&e&&f}if(e){b.undoManager.beforeChange();b.undoManager.add();e=b.selection.getNode();var g=b.dom.create("li",{},!d.isIE?'<br data-mce-bogus="true">':"");e=b.dom.getParent(e,"li");b.dom.insertAfter(g,e);d.isIE6||d.isIE7||d.isIE8?(g.appendChild(b.dom.create("&nbsp;")),b.selection.setCursorLocation(g,1)):d.isGecko?setTimeout(function(){b.selection.setCursorLocation(g,
0)},0):b.selection.setCursorLocation(g,0);b.undoManager.add();c.preventDefault()}});d.isWebKit&&(a.onNodeChange.add(g),a.onKeyUp.add(g));d.isIE?a.onKeyDown.add(m):(a.onNodeChange.add(j),d.isGecko&&a.onKeyDown.add(m));d.isGecko&&a.onKeyDown.add(l);d.isWebKit&&a.onKeyDown.add(f)},applyList:function(a,b,k,c){function f(a){a&&"BR"===a.tagName&&i.remove(a)}function j(a){a&&"LI"===a.tagName&&(i.removeClass(a,"checked"),a.removeAttribute("data-inline-task-id"))}function m(a){if(w&&a&&"LI"===a.tagName)for(var b in w)a.setAttribute(b,
w[b])}function g(b){function e(a){(a.style.marginLeft||a.style.paddingLeft)&&h.adjustPaddingFunction(!1)(a)}var c=i.create(a),g;""!=k&&(c.className=k);if("LI"===b.tagName)m(b);else{if("P"===b.tagName||"DIV"===b.tagName||"BODY"===b.tagName){p(b,function(a,c){l(a,c,b.tagName==="BODY"?null:a.parentNode);g=a.parentNode;e(g);(!d.isChrome||d.isChrome&&c&&c.parentNode&&i.isBlock(c.parentNode))&&f(c)});if(g){if("LI"===g.tagName&&("P"===b.tagName||1<A.length)){if(B&&h.isEmptyElement(g)){var n=document.createTextNode(B),
c=i.create("span");c.appendChild(n);g.appendChild(c);setTimeout(function(){t.selection.select(n)},0);(d.isIE7||d.isIE8)&&g.appendChild(t.dom.create("br",{_mce_bogus:"1"}));var j=function(a,b){if((b.which||b.keyCode)==64)if(n.textContent==B)n.textContent=" ";else if(n.data==B)n.data=" ";window.setTimeout(function(){t.onKeyPress.remove(j)},0)};t.onKeyPress.addToTop(j)}i.split(g.parentNode.parentNode,g.parentNode)}x(g.parentNode,!0);m(g)}return}g=i.create("li");m(g);i.insertAfter(g,b);g.appendChild(b);
e(b);b=g}i.insertAfter(c,b);c.appendChild(b);x(c,!0);q.push(b)}function l(a,b,c){for(var d=a;!i.isBlock(a.parentNode)&&a.parentNode!==i.getRoot();)a=i.split(a.parentNode,a.previousSibling),d=a=a.nextSibling;if(c){c=c.cloneNode(!0);for(a.parentNode.insertBefore(c,a);c.firstChild;)i.remove(c.firstChild);c=i.rename(c,"li")}else c=i.create("li"),a.parentNode.insertBefore(c,a);d&&d==b&&(a=i.create("br"),i.setAttrib(a,"data-mce-bogus",1),c.appendChild(d),i.insertAfter(a,d));for(;d&&d!=b;)a=d.nextSibling,
c.appendChild(d),d=a;0===c.childNodes.length&&(c.innerHTML='<br _mce_bogus="1" />');g(c)}function p(a,b){function c(a,b){var d=i.createRng(),e;z.keep=!0;t.selection.moveToBookmark(z);z.keep=!1;e=t.selection.getRng(!0);b||(b=a.parentNode.lastChild);d.setStartBefore(a);d.setEndAfter(b);return!(0<d.compareBoundaryPoints(g,e)||0>=d.compareBoundaryPoints(h,e))}function d(a){if(a.nextSibling)return a.nextSibling;if(!i.isBlock(a.parentNode)&&a.parentNode!==i.getRoot())return d(a.parentNode)}var e,f,g=3,
h=1;e=a.firstChild;var k=!1;y(i.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",a),function(a){if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;c(e,a)&&(i.addClass(a,"_mce_tagged_br"),e=d(a))});k=e&&c(e,void 0);e=a.firstChild;y(i.select("br,ul,ol,p,div,h1,h2,h3,h4,h5,h6,table,blockquote,address,pre,form,center,dl",a),function(a){var c=d(a);if(a.hasAttribute&&a.hasAttribute("_mce_bogus"))return!0;i.hasClass(a,"_mce_tagged_br")?(b(e,a,f),f=null):f=a;e=c});
k&&b(e,void 0,f)}function n(a){p(a,function(a,b,c){l(a,b);f(b);f(c)})}function o(a){j(a);if(-1===d.inArray(q,a)){if(a.parentNode.tagName===b||!v)i.split(a.parentNode,a),g(a),G(a.parentNode,!1);""!=k&&(a.parentNode.className=k);m(a);q.push(a)}}function e(a){j(a);var b,c;if(-1===d.inArray(q,a)&&(a=C(a,i))){for(;i.is(a.parentNode,"ol,ul,li");)i.split(a.parentNode,a);q.push(a);a=i.rename(a,"p");b=x(a,!1,t.settings.force_br_newlines);if(b===a)for(a=a.firstChild;a;)i.isBlock(a)?(a=i.split(a.parentNode,
a),c=!0,b=a.nextSibling&&a.nextSibling.firstChild):(b=a.nextSibling,c&&"BR"===a.tagName&&i.remove(a),c=!1),a=b}}var h=this,t=h.ed,i=t.dom,q=[],r=!1,s=!1,u=!1,v=!1,A=t.selection.getSelectedBlocks(),k=k||"",c=c||{},w=c.attributesOnItems,B=c.placeholderText,c=c.noToggle;y(A,function(c){c=I(c,i);c="LI"===c.tagName?c.parentNode:c;v=c.className===k;c.tagName===b?s=!0:c.tagName===a?r=!0:u=!0});c=u&&!r||s||!v||0===A.length?{LI:o,H1:g,H2:g,H3:g,H4:g,H5:g,H6:g,P:g,BODY:g,DIV:1<A.length?g:n,defaultAction:n,
elements:this.selectedBlocks()}:c?{}:{defaultAction:e,elements:this.selectedBlocks()};this.process(c)},indent:function(){var a=this.ed,b=a.dom,k=[];this.process({LI:function(c){if(!F(a,c,k)&&(c=C(c,b))){var f=c,j=b.create("li",{style:v});b.insertAfter(j,f);var m=b.getParent(f,"ol,ul"),f=m.tagName,g=b.getStyle(m,"list-style-type"),m=m.className||"",l={};""!==g&&(l.style="list-style-type: "+g+";");f=b.create(f,l);""!=m&&(f.className=m);j.appendChild(f);(d.isIE7||d.isIE8)&&c.appendChild(a.dom.create("br",
{_mce_bogus:"1"}));f.appendChild(c);x(f.parentNode,!1);x(f,!1);k.push(c)}},defaultAction:this.adjustPaddingFunction(!0),elements:this.selectedBlocks()})},outdent:function(a,b){var k=this,c=k.ed,f=c.dom,j=[],m=b&&d.is(b,"array")?b:this.selectedBlocks();this.process({LI:function(a){var b,d;if(!F(c,a,j)){if(""!==f.getStyle(a,"margin-left")||""!==f.getStyle(a,"padding-left"))return k.adjustPaddingFunction(!1)(a);b=f.getStyle(a,"text-align",!0);if("center"===b||"right"===b)f.setStyle(a,"text-align","left");
else if(a=C(a,f))b=a.parentNode,d=a.parentNode.parentNode,"P"===d.tagName?f.split(d,a.parentNode):(f.split(b,a),"LI"===d.tagName?f.split(d,a):f.is(d,"ol,ul")||f.rename(a,"p")),f.hasClass(a.parentNode,"inline-task-list")?a.hasAttribute("data-inline-task-id")||a.setAttribute("data-inline-task-id",""):a.removeAttribute("data-inline-task-id"),j.push(a)}},defaultAction:this.adjustPaddingFunction(!1),elements:m});y(j,x)},isEmptyElement:function(a){var b=this.ed.dom;return 0===d.grep(a.childNodes,function(a){return!("BR"===
a.nodeName||"SPAN"===a.nodeName&&"bookmark"==b.getAttrib(a,"data-mce-type")||3===a.nodeType&&(a.nodeValue==String.fromCharCode(160)||""==a.nodeValue))}).length},process:function(a){function b(b){(d.isIE7||d.isIE8)&&D(b).find("br[_mce_bogus='1']").remove();m.removeClass(b,"_mce_act_on");if(b&&!(1!==b.nodeType||1<g.length&&f.isEmptyElement(b))){var b=I(b,m),c=a[b.tagName];c||(c=a.defaultAction);c(b)}}function k(a){f.splitSafeEach(a.childNodes,b)}function c(a,b){return 0<=b&&a.hasChildNodes()&&b<a.childNodes.length&&
"BR"===a.childNodes[b].tagName}var f=this,j=f.ed.selection,m=f.ed.dom,g,l;if(!m.select("td.mceSelected.numberingColumn").length){g=a.elements;l=j.getRng(!0);if(!l.collapsed&&(c(l.endContainer,l.endOffset-1)&&(l.setEnd(l.endContainer,l.endOffset-1),j.setRng(l)),c(l.startContainer,l.startOffset)))l.setStart(l.startContainer,l.startOffset+1),j.setRng(l);if(d.isIE7||d.isIE8)if(l=f.ed.selection.getNode(),"LI"===l.tagName&&l.parentNode.lastChild!==l){var p=f.ed.getDoc().createTextNode(o.Rte.HIDDEN_CHAR);
l.appendChild(p)}z=j.getBookmark();a.OL=a.UL=k;f.splitSafeEach(g,b);j.moveToBookmark(z);z=null;j=j.getNode();null===m.getParent(j,"td")&&f.ed.execCommand("mceRepaint")}},splitSafeEach:function(a,b){d.isGecko&&(/Firefox\/[12]\.[0-9]/.test(navigator.userAgent)||/Firefox\/3\.[0-4]/.test(navigator.userAgent))?this.classBasedEach(a,b):y(a,b)},classBasedEach:function(a,b){var d=this.ed.dom,c;y(a,function(a){d.addClass(a,"_mce_act_on")});for(c=d.select("._mce_act_on");0<c.length;)c=c.shift(),d.removeClass(c,
"_mce_act_on"),b(c),c=d.select("._mce_act_on")},adjustPaddingFunction:function(a){var b,d,c=this.ed;b=c.settings.indentation;d=/[a-z%]+/i.exec(b);b=parseInt(b,10);return function(f){var j;j=parseInt(c.dom.getStyle(f,"margin-left")||0,10)+parseInt(c.dom.getStyle(f,"padding-left")||0,10);j=a?j+b:j-b;c.dom.setStyle(f,"padding-left","");c.dom.setStyle(f,"margin-left",0<j?j+d:"")}},selectedBlocks:function(){var a=this.ed,b=a.selection.getSelectedBlocks();return 0===b.length?[a.dom.getRoot()]:b},getInfo:function(){return{longname:"Lists",
author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/lists",version:d.majorVersion+"."+d.minorVersion}}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/lists/editor_plugin_src",function(d){var o=require("tinymce");o.create("tinymce.plugins.Lists",d);o.PluginManager.add("lists",o.plugins.Lists)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/table/editor_plugin_src",["tinymce","ajs","jquery","confluence/storage-manager"],function(j,z,r,S){function w(g,i){return parseInt(g.getAttribute(i)||1)}function T(e,i,u){function D(b,K){b=b.cloneNode(K);b.removeAttribute("id");K&&y()&&b.removeChild(b.children[0]);return b}function E(){var b=0;k=[];g(["thead","tbody","tfoot"],function(K){var a=i.select("> "+K+" tr",e);g(a,function(a,h){h+=b;g(i.select("> td, > th",a),function(b,a){var l,d,c,f;if(k[h])for(;k[h][a];)a++;
c=w(b,"rowspan");f=w(b,"colspan");for(d=h;d<h+c;d++){k[d]||(k[d]=[]);for(l=a;l<a+f;l++)k[d][l]={part:K,real:d==h&&l==a,elm:b,rowspan:c,colspan:f}}})});b+=a.length})}function B(b,a){var h;if(h=k[a])return h[b]}function n(b,a,h){b&&(h=parseInt(h),1===h?b.removeAttribute(a,1):b.setAttribute(a,h,1))}function x(b){return b&&(i.hasClass(b.elm,"mceSelected")||b==G)}function C(){var b=[];g(e.rows,function(a){g(a.cells,function(h){if(i.hasClass(h,"mceSelected")||h==G.elm)return b.push(a),!1})});return b}function A(b){var a;
j.walk(b,function(h){var l;if(3===h.nodeType)return g(i.getParents(h.parentNode,null,b).reverse(),function(b){b=D(b,!1);a?l&&l.appendChild(b):a=l=b;l=b}),l&&(l.innerHTML=j.isIE?"&nbsp;":'<br data-mce-bogus="1" />'),!1},"childNodes");b=D(b,!1);n(b,"rowSpan",1);n(b,"colSpan",1);a?b.appendChild(a):j.isIE||(b.innerHTML='<br data-mce-bogus="1" />');r(b).attr("contenteditable","true").removeClass("numberingColumn");return b}function a(){var b=i.createRng();g(i.select("tr",e),function(b){0===b.cells.length&&
i.remove(b)});if(0===i.select("tr",e).length)b.setStartAfter(e),b.setEndAfter(e),u.setRng(b),i.remove(e);else if(g(i.select("thead,tbody,tfoot",e),function(b){0===b.rows.length&&i.remove(b)}),E(),b=k[Math.min(k.length-1,p.y)])if(b=b[Math.min(b.length-1,p.x)].elm)j.isIE9||j.isIE10up?u.setCursorLocation(b,0):u.select(b,!0),u.collapse(!0)}function m(b,a,h,l){var s,L,d,c,f;s=k[a][b].elm.parentNode;for(d=1;d<=h;d++)if(s=i.getNext(s,"tr")){for(L=b;0<=L;L--)if(f=k[a+d][L].elm,f.parentNode==s){for(c=1;c<=
l;c++)i.insertAfter(A(f),f);break}if(-1==L)for(c=1;c<=l;c++)s.insertBefore(A(s.cells[0]),s.cells[0])}}function O(){g(k,function(b,a){g(b,function(b,l){var s,d,c;if(x(b)&&(b=b.elm,s=w(b,"colspan"),d=w(b,"rowspan"),1<s||1<d)){n(b,"rowSpan",1);n(b,"colSpan",1);for(c=0;c<s-1;c++)i.insertAfter(A(b),b);m(l,a,d-1,s)}})})}function N(b){var a,h,l,s,d,c,f,m;g(k,function(h,l){g(h,function(h){if(x(h)&&(h=h.elm,d=h.parentNode,c=D(d,!1),a=l,b))return!1});if(b)return!a});for(s=0;s<k[0].length;s++)if(k[a][s]&&(h=
k[a][s].elm,h!=l)){if(b){if(0<a&&k[a-1][s]&&(f=k[a-1][s].elm,m=w(f,"rowSpan"),1<m)){n(f,"rowSpan",m+1);continue}}else if(m=w(h,"rowspan"),1<m){n(h,"rowSpan",m+1);continue}l=(f=z.Rte.Table.isColumnHeading(r(h).closest("table"),s+1))?i.create("th"):i.create("td");l.colSpan=h.colSpan;l.width=h.width;l.innerHTML=j.isIE9?"":j.isIE?"&nbsp;":'<br data-mce-bogus="1" />';l.className=h.className;f||(i.removeClass(l,j.settings.confluence_table_heading_style),i.addClass(l,j.settings.confluence_table_cell_style));
f=i.getAttrib(h,"data-highlight-colour");z.Rte.Table.isColumnHighlighted(e,s+1)?i.setAttrib("data-highlight-colour",f):i.removeClass(l,"highlight-"+f);c.appendChild(l);l=h}c.hasChildNodes()&&(b?d.parentNode.insertBefore(c,d):i.insertAfter(c,d));q()}function v(b){var a,h,l=[];g(k,function(h){g(h,function(h,l){if(x(h)&&(a=l,b))return!1});if(b)return!a});if(0==a&&b&&y())return!1;g(k,function(d,c){var f,k,g;if(d[a]&&(f=d[a].elm,f!=h)){g=w(f,"colspan");k=w(f,"rowspan");if(1==g){var e,t=i.create(f.tagName);
t.colSpan=f.colSpan;t.width=f.width;t.className=f.className;t.innerHTML=j.isIE?"&nbsp;":'<br data-mce-bogus="1"/>';(e=i.getAttrib(f,"data-highlight-colour"))&&i.setAttrib(t,"data-highlight-colour",e);r(t).attr("contenteditable","true").removeClass("numberingColumn");b?f.parentNode.insertBefore(t,f):i.insertAfter(t,f);m(a,c,k-1,g);l.push(t)}else n(f,"colSpan",f.colSpan+1);h=f}});return l}function q(){if(y()){o=1;var b=0,a=0;g(e.rows,function(h){h=r(h);z.Rte.Table.areCellsHeadings(h.children())?h.children(":first").addClass("numberingColumn").attr("contenteditable",
"true"):0<a?a--:(h.children(":first").html(o).attr("contenteditable","false").addClass("numberingColumn"),b=h.children(":first").attr("rowspan"),1<b&&(a=b-1),o++)})}}function y(){return r(e.rows[0]).children(":first").hasClass("numberingColumn")}function f(b){b?r(e.rows[0]).children(":first").addClass("numberingColumn"):r(e.rows[0]).children(":first").removeClass("numberingColumn")}function c(){var b=[];g(k,function(a){g(a,function(a,l){x(a)&&-1===j.inArray(b,l)&&(g(k,function(b){if(b[l]){var b=b[l].elm,
a;a=w(b,"colSpan");1<a?n(b,"colSpan",a-1):i.remove(b)}}),b.push(l))})});a()}function d(){var b={};g(k,function(a){g(a,function(a,l){x(a)&&(b[l]||(b[l]=[]))})});g(k,function(a){g(a,function(a,l){b[l]&&b[l].push(a.elm.innerHTML)})});return b}function M(b){b&&b.parentNode&&(u.select(b.parentNode),u.collapse(!0))}function P(b,a){var h=B(b.x,b.y).elm,l="undefined"===typeof a?!0:a;if((j.isGecko||j.isIE)&&h.firstChild)h=h.firstChild;if(j.isIE9||j.isIE10up){var f=u.getRng(1);l?(f.setStart(h,0),f.setEnd(h,
0)):(f.setStartAfter(h,0),f.setEndAfter(h,0));u.setRng(f)}else u.select(h,!0),u.collapse(l)}function Q(){var b,a=k[0].length;p.x==a-1&&p.y==k.length-1||(p.x==a-1&&y()?(b={x:1,y:p.y+1},z.Rte.Table.areCellsHeadings(r(k[b.y][0].elm).parent().children())&&(b.x=0)):b=p.x==a-1?{x:0,y:p.y+1}:{x:p.x+1,y:p.y});return b}function R(){var b;0==p.x&&0==p.y||(1==p.x&&y()&&!z.Rte.Table.areCellsHeadings(r(k[p.y][0].elm).parent().children())?(b=p.y-1,b={x:k[b].length-1,y:b}):0<p.x?b={x:p.x-1,y:p.y}:(b=p.y-1,b={x:k[b].length-
1,y:b}));return b}function F(b){var a;g(k,function(h,l){g(h,function(h,f){if(h.elm==b)return a={x:f,y:l},!1});return!a});return a}var k,p,t,G,o;E();if(G=i.select("td.mceSelected,th.mceSelected")[0]||i.getParent(u.getStart(),"th,td")){p=F(G);var H,I;H=I=0;g(k,function(b,a){g(b,function(b,f){var d,c;x(b)&&(b=k[a][f],f>H&&(H=f),a>I&&(I=a),b.real&&(d=b.colspan-1,c=b.rowspan-1,d&&f+d>H&&(H=f+d),c&&a+c>I&&(I=a+c)))})});t={x:H,y:I};G=B(p.x,p.y)}j.extend(this,{deleteTable:function(){var b=i.createRng();b.setStartAfter(e);
b.setEndAfter(e);u.setRng(b);i.remove(e)},split:O,merge:function(b,f,h){var d,c,m,e,o,M;b?(b=F(b),d=b.x,b=b.y,f=d+(f-1),h=b+(h-1)):(d=p.x,b=p.y,f=t.x,h=t.y);if(!(0==d&&y())&&(e=B(d,b),c=B(f,h),e&&c&&e.part==c.part)){O();E();e=B(d,b).elm;n(e,"colSpan",f-d+1);n(e,"rowSpan",h-b+1);for(m=b;m<=h;m++)for(c=d;c<=f;c++)k[m]&&k[m][c]&&(b=k[m][c].elm,b!=e&&(o=j.grep(b.childNodes),g(o,function(b){e.appendChild(b)}),o.length&&(o=j.grep(e.childNodes),M=0,g(o,function(b){b.nodeName==="BR"&&(i.getAttrib(b,"data-mce-bogus")&&
M++<o.length-1)&&e.removeChild(b)})),i.remove(b)));a()}},insertRow:N,insertCol:v,insertNumCol:function(){if(y())g(k,function(b){b=b[0].elm;r(b).hasClass("numberingColumn")&&null!==b.parentNode&&b.parentNode.removeChild(b)}),f(!1);else{var b;g(k,function(a){a=a[0].elm;if(b!=a){var h=A(a);a.parentNode.insertBefore(h,a);1<a.rowSpan&&(h.rowSpan=a.rowSpan);b=a}});f(!0)}q()},updateNumCol:q,deleteCols:c,deleteRows:function(){var b;b=C();(j.isIE9||j.isIE10)&&M(b[0]);g(b.reverse(),function(b){var a,f;i.getNext(b,
"tr");g(b.cells,function(b){var f=w(b,"rowSpan");1<f&&(n(b,"rowSpan",f-1),a=F(b),m(a.x,a.y,1,1))});a=F(b.cells[0]);g(k[a.y],function(b){var a,b=b.elm;b!=f&&(a=w(b,"rowSpan"),1>=a?i.remove(b):n(b,"rowSpan",a-1),f=b)})});a();q()},cutRows:function(){var b=C();(j.isIE9||j.isIE10)&&M(b[0]);i.remove(b);a();q();return b},copyRows:function(){var b=C();g(b,function(a,f){b[f]=D(a,!0)});return b},pasteRows:function(b,a){var f=C(),d=f[a?0:f.length-1],c=d.cells.length;g(k,function(b){var a;c=0;g(b,function(b){b.real&&
(c+=b.colspan);b.elm.parentNode==d&&(a=1)});if(a)return!1});a||b.reverse();g(b,function(b){var f=b.cells.length,h;r(b.cells[0]).hasClass("numberingColumn")&&(b.removeChild(b.cells[0]),f--);for(o=0;o<f;o++)h=b.cells[o],n(h,"colSpan",1),n(h,"rowSpan",1);y()&&(b.insertBefore(b.firstChild.cloneNode(!1),b.firstChild),r(b.firstChild).addClass("numberingColumn"),f++);for(;c<f;)v(!1),c++;for(o=f;o<c;o++)b.appendChild(A(b.cells[f-1]));a?d.parentNode.insertBefore(b,d):i.insertAfter(b,d)});q()},getPos:F,setStartCell:function(b){p=
F(b)},setEndCell:function(b){var a,f,d,c,m,e,g;t=F(b);if(p&&t){a=Math.min(p.x,t.x);f=Math.min(p.y,t.y);d=Math.max(p.x,t.x);c=Math.max(p.y,t.y);m=d;e=c;var o;for(o=f;o<=e;o++)b=k[o][a],b.real||a-(b.colspan-1)<a&&(a-=b.colspan-1);for(var j=a;j<=m;j++)b=k[f][j],b.real||f-(b.rowspan-1)<f&&(f-=b.rowspan-1);for(o=f;o<=c;o++)for(j=a;j<=d;j++)b=k[o][j],b.real&&(g=b.colspan-1,b=b.rowspan-1,g&&j+g>m&&(m=j+g),b&&o+b>e&&(e=o+b));i.removeClass(i.select("td.mceSelected,th.mceSelected"),"mceSelected");for(o=f;o<=
e;o++)for(j=a;j<=m;j++)k[o][j]&&i.addClass(k[o][j].elm,"mceSelected")}},moveCaretToNextCell:function(){var b=Q();b||(N(!1),E(),b=Q());P(b)},moveCaretToPrevCell:function(){var b=R();b||(N(!0),E(),p=F(i.getParent(u.getStart(),"th,td")),b=R());P(b,!1)},cutColumns:function(){var b=d();c();return b},copyColumns:d,pasteColumns:function(b,a){var f=Object.keys(b);a||f.reverse();r.each(f,function(f,d){for(var c=v(a),f=0;f<c.length;f++)c[f].innerHTML=b[d][f]||""})},prepareTableForColPasteAndCheckIfNeedToRepaint:function(b){var a=
b[Object.keys(b)[0]].length,f,d,b=!1;g(k,function(b,c){a--;f=c;g(b,function(b,a){d=a})});if(0<a){b=!0;G=B(d,f);for(o=0;o<a;o++)N(!1)}return b}})}var g=j.each,J=S("atlassian.editor","tables");return{init:function(e,i){function u(a){var m=e.selection,a=a||m.getNode().parentNode;if(a=e.dom.getParent(a,"table"))return new T(a,e.dom,m)}function D(){e.getBody().style.webkitUserSelect="";A&&(e.dom.removeClass(e.dom.select("td.mceSelected,th.mceSelected"),"mceSelected"),A=!1)}function E(a){for(var m=[],e=
"",e=0;e<a.length;e++)m.push(z.Rte.getEditor().serializer.serialize(a[e]));e="<tr>"+m.join("</tr><tr>")+"</tr>";J.setItem("copied",e,7200)}function B(){var a=[],m=J.getItem("copied")||"";m&&(a=e.getDoc().createElement("div"),a.innerHTML="<table>"+m+"</table>",a=r(a).find("tr"));return a}var n,x,C,A=!0;g([["table","table.desc","mceInsertTable",!0],["delete_table","table.del","mceTableDelete"],["delete_col","table.delete_col_desc","mceTableDeleteCol"],["delete_row","table.delete_row_desc","mceTableDeleteRow"],
["col_after","table.col_after_desc","mceTableInsertColAfter"],["col_before","table.col_before_desc","mceTableInsertColBefore"],["row_after","table.row_after_desc","mceTableInsertRowAfter"],["row_before","table.row_before_desc","mceTableInsertRowBefore"],["row_props","table.row_desc","mceTableRowProps",!0],["cell_props","table.cell_desc","mceTableCellProps",!0],["split_cells","table.split_cells_desc","mceTableSplitCells",!0],["merge_cells","table.merge_cells_desc","mceTableMergeCells",!0]],function(a){e.addButton(a[0],
{title:a[1],cmd:a[2],ui:a[3]})});j.isIE||e.onClick.add(function(a,e){e=e.target;"TABLE"===e.nodeName&&(a.selection.select(e),a.nodeChanged())});e.onPreProcess.add(function(a,e){var g,j,i,q=a.dom,n;g=q.select("table",e.node);for(j=g.length;j--;){i=g[j];q.setAttrib(i,"data-mce-style","");if(n=q.getAttrib(i,"width"))q.setStyle(i,"width",n),q.setAttrib(i,"width","");if(n=q.getAttrib(i,"height"))q.setStyle(i,"height",n),q.setAttrib(i,"height","")}});e.onNodeChange.add(function(a,e,i){i=a.selection.getStart();
a=a.dom.getParent(i,"td,th,caption");e.setActive("table","TABLE"===i.nodeName||!!a);a&&"CAPTION"===a.nodeName&&(a=0);e.setDisabled("delete_table",!a);e.setDisabled("delete_col",!a);e.setDisabled("delete_table",!a);e.setDisabled("delete_row",!a);e.setDisabled("col_after",!a);e.setDisabled("col_before",!a);e.setDisabled("row_after",!a);e.setDisabled("row_before",!a);e.setDisabled("row_props",!a);e.setDisabled("cell_props",!a);e.setDisabled("split_cells",!a);e.setDisabled("merge_cells",!a)});e.onInit.add(function(a){function e(a){if(j.isWebKit){var c=
a.selection.getRng(),d=a.selection.getNode(),i=a.dom.getParent(c.startContainer,"TD,TH"),g=i,m=a.dom.getParent(c.startContainer,"TABLE"),n;m&&(n=m.parentNode);m=3===c.startContainer.nodeType&&0==c.startOffset&&0==c.endOffset&&g&&("TR"===d.nodeName||d==n);g=("TD"===d.nodeName||"TH"===d.nodeName)&&!g;if(m||g){i||(i=d);for(d=i.lastChild;d.lastChild;)d=d.lastChild;c.setEnd(d,d.nodeValue.length);a.selection.setRng(c)}}}var i,r,v=a.dom,q;n=a.windowManager;a.onMouseDown.add(function(a,c){2!=c.button&&(D(),
r=v.getParent(c.target,"td,th"),i=v.getParent(r,"table"))});v.bind(a.getDoc(),"mouseover",function(f){var c,d=v.getParent(f.target,"td,th");if(r&&(q||d!=r)&&d){c=v.getParent(d,"table");c==i&&(q||(q=u(c),q.setStartCell(r),a.getBody().style.webkitUserSelect="none"),q.setEndCell(d),A=!0);c=a.selection.getSel();try{c.removeAllRanges?c.removeAllRanges():c.empty()}catch(e){}f.preventDefault()}});a.onMouseUp.add(function(a){var c,d=a.selection,e;d.getSel();var g,m;if(r){q&&(a.getBody().style.webkitUserSelect=
"");var n=function(a,f){var d=new j.dom.TreeWalker(a,a);do{if(a.nodeType===3&&j.trim(a.nodeValue).length!==0){f?c.setStart(a,0):c.setEnd(a,a.nodeValue.length);break}if(a.nodeName==="BR"){f?c.setStartBefore(a):c.setEndBefore(a);break}}while(a=f?d.next():d.prev())};e=v.select("td.mceSelected,th.mceSelected");if(0<e.length){c=v.createRng();g=e[0];c.setStartBefore(g);c.setEndAfter(g);n(g,1);e=new j.dom.TreeWalker(g,v.getParent(e[0],"table"));do if("TD"===g.nodeName||"TH"===g.nodeName){if(!v.hasClass(g,
"mceSelected"))break;m=g}while(g=e.next());n(m);d.setRng(c)}a.nodeChanged();r=q=i=null}});a.onUndo.add(function(a){A=0<a.dom.select("td.mceSelected, th.mceSelected").length});a.onKeyUp.add(function(){D()});a.onKeyDown.add(function(a){e(a)});a.onMouseDown.add(function(a,c){2!=c.button&&e(a)});a.plugins.table.fixTableCellSelection=e;a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(f,c,d){f=a.selection.getNode()||a.getBody();a.dom.getParent(d,"td")||a.dom.getParent(d,"th")||
a.dom.select("td.mceSelected,th.mceSelected").length?(c.removeAll(),"A"===f.nodeName&&!a.dom.getAttrib(f,"name")&&(c.add({title:"advanced.link_desc",icon:"link",cmd:a.plugins.advlink?"mceAdvLink":"mceLink",ui:!0}),c.add({title:"advanced.unlink_desc",icon:"unlink",cmd:"UnLink"}),c.addSeparator()),"IMG"===f.nodeName&&-1===f.className.indexOf("mceItem")&&(c.add({title:"advanced.image_desc",icon:"image",cmd:a.plugins.advimage?"mceAdvImage":"mceImage",ui:!0}),c.addSeparator()),c.add({title:"table.desc",
icon:"table",cmd:"mceInsertTable",value:{action:"insert"}}),c.add({title:"table.props_desc",icon:"table_props",cmd:"mceInsertTable"}),c.add({title:"table.del",icon:"delete_table",cmd:"mceTableDelete"}),c.addSeparator(),d=c.addMenu({title:"table.cell"}),d.add({title:"table.cell_desc",icon:"cell_props",cmd:"mceTableCellProps"}),d.add({title:"table.split_cells_desc",icon:"split_cells",cmd:"mceTableSplitCells"}),d.add({title:"table.merge_cells_desc",icon:"merge_cells",cmd:"mceTableMergeCells"}),d=c.addMenu({title:"table.row"}),
d.add({title:"table.row_desc",icon:"row_props",cmd:"mceTableRowProps"}),d.add({title:"table.row_before_desc",icon:"row_before",cmd:"mceTableInsertRowBefore"}),d.add({title:"table.row_after_desc",icon:"row_after",cmd:"mceTableInsertRowAfter"}),d.add({title:"table.delete_row_desc",icon:"delete_row",cmd:"mceTableDeleteRow"}),d.addSeparator(),d.add({title:"table.cut_row_desc",icon:"cut",cmd:"mceTableCutRow"}),d.add({title:"table.copy_row_desc",icon:"copy",cmd:"mceTableCopyRow"}),d.add({title:"table.paste_row_before_desc",
icon:"paste",cmd:"mceTablePasteRowBefore"}).setDisabled(!x),d.add({title:"table.paste_row_after_desc",icon:"paste",cmd:"mceTablePasteRowAfter"}).setDisabled(!x),d=c.addMenu({title:"table.col"}),d.add({title:"table.col_before_desc",icon:"col_before",cmd:"mceTableInsertColBefore"}),d.add({title:"table.col_after_desc",icon:"col_after",cmd:"mceTableInsertColAfter"}),d.add({title:"table.delete_col_desc",icon:"delete_col",cmd:"mceTableDeleteCol"})):c.add({title:"table.desc",icon:"table",cmd:"mceInsertTable"})});
j.isWebKit&&a.onKeyDown.add(function(a,c){function d(c,g,o){var k=c?"previousSibling":"nextSibling",m=a.dom.getParent(g,"tr"),b=m[k];if(b)return i(a,g,b,c),j.dom.Event.cancel(o),!0;var b=a.dom.getParent(m,"table"),n=m.parentNode,h=n.nodeName.toLowerCase();if("tbody"===h||h===(c?"tfoot":"thead")){var h=a.dom.select(">tbody",b),l=h.indexOf(n);c&&0===l||!c&&l===h.length-1?(n=a.dom.select(">"+(c?"thead":"tfoot"),b),n=0!==n.length?n[0]:null):-1===l?(n="thead"===n.tagName.toLowerCase()?0:h.length-1,n=h[n]):
n=h[l+(c?-1:1)];if(null!==n)return(m=e(n,c))&&i(a,g,m,c),j.dom.Event.cancel(o),!0}(g=b[k])?(a.selection.setCursorLocation(g,0),o=!0):(g=a.dom.getParent(b,"td,th"))?o=d(c,g,o):(c=e(m,!c),a.selection.setCursorLocation(c,0),o=j.dom.Event.cancel(o));return o}function e(c,d){var g=c&&c[d?"lastChild":"firstChild"];return g&&"BR"===g.nodeName?a.dom.getParent(g,"td,th"):g}function i(c,d,j,m){for(var k=0,c=c.dom.getParent(d,"td,th");c.previousSibling;)c=c.previousSibling,k+=w(c,"colspan");var b=k,n=0,h=0;
g(j.children,function(a,c){n+=w(a,"colspan");h=c;if(n>b)return!1});j=j.childNodes[h];m=e(j,m);a.selection.setCursorLocation(m||j,0)}var m=j.VK,n=c.keyCode,q;if(q=n==m.UP||n==m.DOWN){q=a;var k=q.selection.getNode();q=null!==q.dom.getParent(k,"tr")}if(q){var p=a.selection.getNode();setTimeout(function(){var e=a.selection.getNode(),e=a.dom.getParent(e,"td,th"),g=a.dom.getParent(p,"td,th");e&&(e!==g&&a.dom.getParent(e,"TABLE")===a.dom.getParent(g,"TABLE"))&&d(!c.shiftKey&&n===m.UP,p,c)},0)}});if(!j.isIE){var y=
function(){};j.isGecko&&a.onKeyDown.add(function(a,c){var d,e,g=a.dom;if(37===c.keyCode||38===c.keyCode)if(d=a.selection.getRng(),(e=g.getParent(d.startContainer,"table"))&&a.getBody().firstChild==e){var i=d,j=e.ownerDocument;d=j.createRange();d.setStartBefore(e);d.setEnd(i.endContainer,i.endOffset);i=j.createElement("body");i.appendChild(d.cloneContents());0===i.innerHTML.replace(/<(br|img|object|embed|input|textarea)[^>]*>/gi,"-").replace(/<[^>]+>/g,"").length&&(d=g.createRng(),d.setStartBefore(e),
d.setEndBefore(e),a.selection.setRng(d),c.preventDefault())}});a.onKeyUp.add(y);a.onSetContent.add(y);a.onVisualAid.add(y);j.isGecko&&a.onKeyDown.add(function(a,c){if(c.keyCode===j.VK.ENTER&&c.shiftKey){var d=a.selection.getRng().startContainer;if(v.getParent(d,"td,th")){var e=a.getDoc().createTextNode("﻿");v.insertAfter(e,d)}}});a.startContent=a.getContent({format:"raw"})}});g({mceTableSplitCells:function(a){a.split()},mceTableMergeCells:function(a){e.dom.getParent(e.selection.getNode(),"th,td");
e.dom.select("td.mceSelected,th.mceSelected").length&&a.merge()},mceTableInsertRowBefore:function(a){a.insertRow(!0)},mceTableInsertRowAfter:function(a){a.insertRow()},mceTableInsertNumberingCol:function(a){a.insertNumCol()},mceTableUpdateNumberingCol:function(a){a.updateNumCol()},mceTableInsertColBefore:function(a){a.insertCol(!0)},mceTableInsertColAfter:function(a){a.insertCol()},mceTableDeleteCol:function(a){a.deleteCols()},mceTableDeleteRow:function(a){a.deleteRows()},mceTableCutRow:function(a){x=
a.cutRows();E(x)},mceTableCopyRow:function(a){x=a.copyRows();E(x)},mceTablePasteRowBefore:function(a){a.pasteRows(B(),!0)},mceTablePasteRowAfter:function(a){a.pasteRows(B())},mceTableDelete:function(a){a.deleteTable()},mceTableMoveCaretToNextCell:function(a){a.moveCaretToNextCell()},mceTableMoveCaretToPrevCell:function(a){a.moveCaretToPrevCell()},mceTableCopyCol:function(a){C=a.copyColumns();J.setItem("copiedCols",JSON.stringify(C))},mceTableCutCol:function(a){C=a.cutColumns();J.setItem("copiedCols",
JSON.stringify(C))},mceTablePasteColBefore:function(a){var g=JSON.parse(J.getItem("copiedCols"))||{};a.prepareTableForColPasteAndCheckIfNeedToRepaint(g)&&(e.execCommand("mceRepaint"),a=u());a.pasteColumns(g,!0)},mceTablePasteColAfter:function(a){a.pasteColumns(JSON.parse(J.getItem("copiedCols"))||{},!1)}},function(a,g){e.addCommand(g,function(){var g=u();g&&(a(g),e.execCommand("mceRepaint"),D())})});g({mceInsertTable:function(a){n.open({url:i+"/table.htm",width:400+parseInt(e.getLang("table.table_delta_width",
0)),height:320+parseInt(e.getLang("table.table_delta_height",0)),inline:1},{plugin_url:i,action:a?a.action:0})},mceTableRowProps:function(){n.open({url:i+"/row.htm",width:400+parseInt(e.getLang("table.rowprops_delta_width",0)),height:295+parseInt(e.getLang("table.rowprops_delta_height",0)),inline:1},{plugin_url:i})},mceTableCellProps:function(){n.open({url:i+"/cell.htm",width:400+parseInt(e.getLang("table.cellprops_delta_width",0)),height:295+parseInt(e.getLang("table.cellprops_delta_height",0)),
inline:1},{plugin_url:i})}},function(a,g){e.addCommand(g,function(e,g){a(g)})})}}});require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/table/editor_plugin_src",function(j){var z=require("tinymce");z.create("tinymce.plugins.TablePlugin",j);z.PluginManager.add("table",z.plugins.TablePlugin)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/table/js/table.js' */
define("atlassian-tinymce/plugins/table/table",["ajs","tinymce","tinymce/popup","jquery","document"],function(j,d,s,o,r){function k(c,a){var d=r.forms[0].elements[c];if("undefined"===typeof a||null==a)a="",d&&(a=d.value);if(""==a)return"";a=a.replace(/&/g,"&amp;");a=a.replace(/\"/g,"&quot;");a=a.replace(/</g,"&lt;");a=a.replace(/>/g,"&gt;");return" "+c+'="'+a+'"'}return{insertTable:function(){var c=o("#tinymce-table-form")[0],a=j.Rte.getEditor(),h=a.dom,f=2,p=2,i=d.settings.confluence_table_style,
e="",b="";h.getParent(a.selection.getNode(),"table");var l,q;l=c.elements.heading.checked;q=c.elements["equal-width-columns"].checked;f=c.elements.cols.value;p=c.elements.rows.value;c=o("#tinymce-table-form input[name='width']").val();b=b+"<table"+k("data-mce-new","1");c&&a.settings.inline_styles?(e&&(e+="; "),/^[0-9\.]+$/.test(c)&&(c+="px"),e+="width: "+c):b+=k("width",c);b+=k("class",i);b+=k("style",e);b+=">";for(i=0;i<p;i++){b+="<tr>";for(e=0;e<f;e++){var m,n;0==i&&l?(c="th",n=d.settings.confluence_table_heading_style):
(c="td",n=d.settings.confluence_table_cell_style);q&&(m=' width="'+Math.round(100*(100/f))/100+'%"');b+="<"+c+(m?m:"")+' class="'+n+'">';!d.isIE||d.isIE11?b+='<br data-mce-bogus="1"/>':d.isIE9&&(b+="&nbsp;");b+="</"+c+">"}b+="</tr>"}b+="</table>";if(a.settings.fix_table_elements){var g="";j.Rte.BookmarkManager.restoreBookmark();a.selection.setContent('<br class="_mce_marker" />');d.each("h1 h2 h3 h4 h5 h6 p".split(" "),function(a){g&&(g=g+",");g=g+(a+" ._mce_marker")});d.each(a.dom.select(g),function(b){a.dom.split(a.dom.getParent(b,
"h1,h2,h3,h4,h5,h6,p"),b)});f=h.select("br._mce_marker")[0];a.selection.select(f);a.selection.setContent(b);a.dom.remove(f)}else a.execCommand("mceInsertContent",!1,b);d.each(h.select("table[data-mce-new]"),function(b){var c=h.select(l?"th":"td",b);try{a.selection.setCursorLocation(c[0],0)}catch(d){}h.setAttrib(b,"data-mce-new","")});a.addVisual();a.execCommand("mceEndUndoLevel",!1,{},{skip_undo:!0})}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/table/table",function(j){var d=require("tinymce");require("jquery").extend(d.plugins.TablePlugin.prototype,j)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-extensions', location = 'jscripts/tiny_mce/plugins/autoresize/editor_plugin_src.js' */
define("atlassian-tinymce/plugins/autoresize/editor_plugin_src",["ajs","underscore","tinymce","jquery"],function(g,h,i,l){return{init:function(a){function b(j){var e,d=a.getDoc();e=d.body;var g=d.documentElement,m=i.DOM,f=c.autoresize_min_height,j=h.isObject(j)?j.forceExec||!1:!1,d=l(d).height();d>c.autoresize_min_height&&(f=d);c.autoresize_max_height&&d>c.autoresize_max_height?(f=c.autoresize_max_height,e.style.overflowY="auto",g.style.overflowY="auto"):(e.style.overflowY="hidden",g.style.overflowY=
"hidden",e.scrollTop=0);if(j||f!==k)e=f-k,m.setStyle(m.get(a.id+"_ifr"),"height",f+"px"),k=f,i.isWebKit&&0>e&&b()}a.onInit.add(function(){l(a.getBody()).addClass("resizable")});var c=this,k=0;a.getParam("fullscreen_is_enabled")||(c.editor=a,c.autoresize_min_height=parseInt(a.getParam("autoresize_min_height",a.getElement().offsetHeight)),c.autoresize_max_height=parseInt(a.getParam("autoresize_max_height",0)),a.onChange.add(b),a.onSetContent.add(b),a.onPaste.add(b),a.onKeyUp.add(b),a.onPostRender.add(b),
a.getParam("autoresize_on_init",!0)&&(a.onLoad.add(b),a.onLoadContent.add(b)),a.addCommand("mceAutoResize",b))},getInfo:function(){return{longname:"Auto Resize",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/autoresize",version:i.majorVersion+"."+i.minorVersion}}}});
require("confluence/module-exporter").safeRequire("atlassian-tinymce/plugins/autoresize/editor_plugin_src",function(g){var h=require("tinymce");h.create("tinymce.plugins.AutoResizePlugin",g);h.PluginManager.add("autoresize",h.plugins.AutoResizePlugin)});
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
