;try {
/* module-key = 'com.atlassian.plugins.tinymce:atlassian-rte-javascript-tinymce-core', location = 'jscripts/atlassian-editor-build/atlassian-editor.js' */
(function(e){var j=/^\s*|\s*$/g,i="$1"==="B".replace(/A(.)|B/,"$1"),g={majorVersion:"3",minorVersion:"4.9-atlassian-11",releaseDate:"2012-03-06",_init:function(){function c(b){var k=/editor/.test(b);if(b&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(b)||k){/_(src|dev)\.js/g.test(b)&&(a.suffix="_src");if(-1!=(p=b.indexOf("?")))a.query=b.substring(p+1);a.baseURL=k?b.substring(0,b.indexOf("/download/")):b.substring(0,b.lastIndexOf("/"));h&&(-1==a.baseURL.indexOf("://")&&0!==a.baseURL.indexOf("/"))&&
(a.baseURL=h+a.baseURL);k&&(a.baseURL+="/download/resources/com.atlassian.plugins.editor/tinymcesource");return a.baseURL}return null}var a=this,d=document,b=navigator,f=b.userAgent,h,p,l;a.isOpera=e.opera&&opera.buildNumber;a.isWebKit=/WebKit/.test(f);a.isChrome=a.isWebKit&&/Chrome/.test(f);a.isIE11=!!(-1!=f.indexOf("Trident/")&&(-1!=f.indexOf("rv:")||-1!=b.appName.indexOf("Netscape")));a.isIE=!a.isWebKit&&!a.isOpera&&/MSIE/gi.test(f)&&/Explorer/gi.test(b.appName);a.isIE=a.isIE&&/MSIE (\w+)\./.exec(f)[1];
a.isIE=a.isIE||a.isIE11;a.isIE6=a.isIE&&/MSIE [56]/.test(f);a.isIE7=a.isIE&&/MSIE [7]/.test(f);a.isIE8=a.isIE&&/MSIE [8]/.test(f);a.isIE9=a.isIE&&/MSIE [9]/.test(f);a.isIE10=a.isIE&&/MSIE \d\d/.test(f);a.isIE10up=a.isIE&&/MSIE \d\d/.test(f)||a.isIE11;a.isGecko=!a.isWebKit&&!a.isIE11&&/Gecko/.test(f);a.isMac=-1!=f.indexOf("Mac");a.isAir=/adobeair/i.test(f);a.isIDevice=/(iPad|iPhone)/.test(f);a.isIOS5=a.isIDevice&&534<=f.match(/AppleWebKit\/(\d*)/)[1];if(e.tinyMCEPreInit)a.suffix=tinyMCEPreInit.suffix,
a.baseURL=tinyMCEPreInit.base,a.query=tinyMCEPreInit.query;else{a.suffix="";f=d.getElementsByTagName("base");for(b=0;b<f.length;b++)if(l=f[b].href)/^https?:\/\/[^\/]+$/.test(l)&&(l+="/"),h=l?l.match(/.*\//)[0]:"";h||(b=document.location,h=b.protocol+"//"+b.hostname+(b.port?":"+b.port:""));if(b=AJS.Meta.get("rte.src.url"))c(b);else{f=d.getElementsByTagName("script");for(b=0;b<f.length;b++)if(c(f[b].src))return;if(d=d.getElementsByTagName("head")[0]){f=d.getElementsByTagName("script");for(b=0;b<f.length&&
!c(f[b].src);b++);}}}},is:function(c,a){return!a?void 0!==c:"array"==a&&c.hasOwnProperty&&c instanceof Array?!0:typeof c==a},makeMap:function(c,a,d){c=c||[];"string"==typeof c&&(c=c.split(a||","));d=d||{};for(a=c.length;a--;)d[c[a]]={};return d},each:function(c,a,d){var b,f;if(!c)return 0;d=d||c;if(void 0!==c.length){b=0;for(f=c.length;b<f;b++)if(!1===a.call(d,c[b],b,c))return 0}else for(b in c)if(c.hasOwnProperty(b)&&!1===a.call(d,c[b],b,c))return 0;return 1},map:function(c,a){var d=[];g.each(c,
function(b){d.push(a(b))});return d},grep:function(c,a){var d=[];g.each(c,function(b){(!a||a(b))&&d.push(b)});return d},inArray:function(c,a){var d,b;if(c){d=0;for(b=c.length;d<b;d++)if(c[d]===a)return d}return-1},extend:function(c,a){var d,b,f=arguments;d=1;for(b=f.length;d<b;d++)a=f[d],g.each(a,function(a,b){void 0!==a&&(c[b]=a)});return c},trim:function(c){return(c?""+c:"").replace(j,"")},create:function(c,a,d){var b,f,h,p,l,e=0,c=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(c);h=c[3].match(/(^|\.)(\w+)$/i)[2];
f=this.createNS(c[3].replace(/\.\w+$/,""),d);if(!f[h])if("static"==c[2]){if(f[h]=a,this.onCreate)this.onCreate(c[2],c[3],f[h])}else if(a[h]||(a[h]=function(){},e=1),f[h]=a[h],this.extend(f[h].prototype,a),c[5]&&(b=this.resolve(c[5]).prototype,p=c[5].match(/\.(\w+)$/i)[1],l=f[h],f[h]=e?function(){return b[p].apply(this,arguments)}:function(){this.parent=b[p];return l.apply(this,arguments)},f[h].prototype[h]=f[h],this.each(b,function(a,d){f[h].prototype[d]=b[d]}),this.each(a,function(a,d){b[d]?f[h].prototype[d]=
function(){this.parent=b[d];return a.apply(this,arguments)}:d!=h&&(f[h].prototype[d]=a)})),this.each(a["static"],function(a,b){f[h][b]=a}),this.onCreate)this.onCreate(c[2],c[3],f[h].prototype)},walk:function(c,a,d,b){b=b||this;c&&(d&&(c=c[d]),g.each(c,function(f,h){if(!1===a.call(b,f,h,d))return!1;g.walk(f,a,d,b)}))},createNS:function(c,a){var d,b,a=a||e,c=c.split(".");for(d=0;d<c.length;d++)b=c[d],a[b]||(a[b]={}),a=a[b];return a},resolve:function(c,a){var d,b,a=a||e,c=c.split(".");d=0;for(b=c.length;d<
b&&!(a=a[c[d]],!a);d++);return a},addUnload:function(c,a){var d=this,c={func:c,scope:a||this};if(d.unloads)d.unloads.push(c);else{var b=function(){var a=d.unloads,p,c;if(a){for(c in a)(p=a[c])&&p.func&&p.func.call(p.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",f),e.detachEvent("onunload",b)):e.removeEventListener&&e.removeEventListener("unload",b,!1);d.unloads=w=b=0;e.CollectGarbage&&CollectGarbage()}},f=function(){var a=document;if("interactive"==a.readyState){var d=function(){a.detachEvent("onstop",
d);b&&b();a=0};a&&a.attachEvent("onstop",d);e.setTimeout(function(){a&&a.detachEvent("onstop",d)},0)}};e.attachEvent?(e.attachEvent("onunload",b),e.attachEvent("onbeforeunload",f)):e.addEventListener&&e.addEventListener("unload",b,!1);d.unloads=[c]}return c},removeUnload:function(c){var a=this.unloads,d=null;g.each(a,function(b,f){if(b&&b.func==c)return a.splice(f,1),d=c,!1});return d},explode:function(c,a){return c?g.map(c.split(a||","),g.trim):c},_addVer:function(c){var a;if(!this.query)return c;
a=(-1==c.indexOf("?")?"?":"&")+this.query;return-1==c.indexOf("#")?c+a:c.replace("#",a+"#")},_replace:function(c,a,d){return i?d.replace(c,function(){var b=a,d=arguments,h;for(h=0;h<d.length-2;h++)b=void 0===d[h]?b.replace(RegExp("\\$"+h,"g"),""):b.replace(RegExp("\\$"+h,"g"),d[h]);return b}):d.replace(c,a)}};g._init();e.tinyMCE=e.tinymce=g})(window);
tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,Dispatcher:function(e){this.scope=e||this;this.listeners=[]},add:function(e,j){this.listeners.push({cb:e,scope:j||this.scope});return e},addToTop:function(e,j){this.listeners.unshift({cb:e,scope:j||this.scope});return e},remove:function(e){var j=this.listeners,i=null;tinymce.each(j,function(g,c){if(e==g.cb)return i=e,j.splice(c,1),!1});return i},dispatch:function(){var e,j=arguments,i,g=this.listeners;for(i=0;i<g.length&&!(e=g[i],
e=e.cb.apply(e.scope,0<j.length?j:[e.scope]),!1===e);i++);return e}});
(function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(j,i){var g=this,c,j=tinymce.trim(j),i=g.settings=i||{};if(/^([\w\-]+):([^\/]{2})/i.test(j)||/^\s*#/.test(j))g.source=j;else if(0===j.indexOf("/")&&0!==j.indexOf("//")&&(j=(i.base_uri?i.base_uri.protocol||"http":"http")+"://mce_host"+j),/^[\w-]*:?\/\//.test(j)||(c=i.base_uri?i.base_uri.path:(new tinymce.util.URI(location.href)).directory,j=(i.base_uri&&i.base_uri.protocol||"http")+"://mce_host"+g.toAbsPath(c,j)),j=j.replace(/@@/g,
"(mce_at)"),j=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(j),e("source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),function(a,d){var b=j[d];b&&(b=b.replace(/\(mce_at\)/g,"@@"));g[a]=b}),c=i.base_uri){g.protocol||(g.protocol=c.protocol);g.userInfo||(g.userInfo=c.userInfo);!g.port&&"mce_host"==
g.host&&(g.port=c.port);if(!g.host||"mce_host"==g.host)g.host=c.host;g.source=""}},setPath:function(e){e=/^(.*?)\/?(\w+)?$/.exec(e);this.path=e[0];this.directory=e[1];this.file=e[2];this.source="";this.getURI()},toRelative:function(e){var i;if("./"===e)return e;e=new tinymce.util.URI(e,{base_uri:this});if("mce_host"!=e.host&&this.host!=e.host&&e.host||this.port!=e.port||this.protocol!=e.protocol)return e.getURI();i=this.toRelPath(this.path,e.path);e.query&&(i+="?"+e.query);e.anchor&&(i+="#"+e.anchor);
return i},toAbsolute:function(e,i){e=new tinymce.util.URI(e,{base_uri:this});return e.getURI(this.host==e.host&&this.protocol==e.protocol?i:0)},toRelPath:function(e,i){var g,c=0,a="",d,b,e=e.substring(0,e.lastIndexOf("/")),e=e.split("/");g=i.split("/");if(e.length>=g.length){d=0;for(b=e.length;d<b;d++)if(d>=g.length||e[d]!=g[d]){c=d+1;break}}if(e.length<g.length){d=0;for(b=g.length;d<b;d++)if(d>=e.length||e[d]!=g[d]){c=d+1;break}}if(1==c)return i;d=0;for(b=e.length-(c-1);d<b;d++)a+="../";d=c-1;for(b=
g.length;d<b;d++)a=d!=c-1?a+("/"+g[d]):a+g[d];return a},toAbsPath:function(j,i){var g,c=0,a=[],d;d=/\/$/.test(i)?"/":"";j=j.split("/");i=i.split("/");e(j,function(b){b&&a.push(b)});j=a;g=i.length-1;for(a=[];0<=g;g--)0==i[g].length||"."==i[g]||(".."==i[g]?c++:0<c?c--:a.push(i[g]));g=j.length-c;g=0>=g?a.reverse().join("/"):j.slice(0,g).join("/")+"/"+a.reverse().join("/");0!==g.indexOf("/")&&(g="/"+g);d&&g.lastIndexOf("/")!==g.length-1&&(g+=d);return g},getURI:function(e){var i;if(!this.source||e)i=
"",e||(this.protocol&&(i+=this.protocol+"://"),this.userInfo&&(i+=this.userInfo+"@"),this.host&&(i+=this.host),this.port&&(i+=":"+this.port)),this.path&&(i+=this.path),this.query&&(i+="?"+this.query),this.anchor&&(i+="#"+this.anchor),this.source=i;return this.source}})})();
(function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(j){var j=this.get(j),i;j&&e(j.split("&"),function(e){e=e.split("=");i=i||{};i[unescape(e[0])]=unescape(e[1])});return i},setHash:function(j,i,g,c,a,d){var b="";e(i,function(a,d){b+=(!b?"":"&")+escape(d)+"="+escape(a)});this.set(j,b,g,c,a,d)},get:function(e){var i=document.cookie,g=e+"=",c;if(i){c=i.indexOf("; "+g);if(-1==c){if(c=i.indexOf(g),0!=c)return null}else c+=2;e=i.indexOf(";",c);-1==e&&(e=i.length);
return unescape(i.substring(c+g.length,e))}},set:function(e,i,g,c,a,d){document.cookie=e+"="+escape(i)+(g?"; expires="+g.toGMTString():"")+(c?"; path="+escape(c):"")+(a?"; domain="+a:"")+(d?"; secure":"")},remove:function(e,i){var g=new Date;g.setTime(g.getTime()-1E3);this.set(e,"",g,i,g)}})})();
(function(){function e(j,i){var g,c,a,i=i||'"';if(null==j)return"null";a=typeof j;if("string"==a)return c="\bb\tt\nn\ff\rr\"\"''\\\\",i+j.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(a,b){if('"'===i&&"'"===a)return a;g=c.indexOf(b);if(g+1)return"\\"+c.charAt(g+1);a=b.charCodeAt().toString(16);return"\\u"+"0000".substring(a.length)+a})+i;if("object"==a){if(j.hasOwnProperty&&j instanceof Array){g=0;for(c="[";g<j.length;g++)c+=(0<g?",":"")+e(j[g],i);return c+"]"}c="{";for(g in j)j.hasOwnProperty(g)&&
(c+="function"!=typeof j[g]?(1<c.length?","+i:i)+g+i+":"+e(j[g],i):"");return c+"}"}return""+j}tinymce.util.JSON={serialize:e,parse:function(e){try{return eval("("+e+")")}catch(i){}}}})();
tinymce.create("static tinymce.util.XHR",{send:function(e){function j(a){i=0;try{i=new ActiveXObject(a)}catch(b){}return i}var i,g=window,c=0;e.scope=e.scope||this;e.success_scope=e.success_scope||e.scope;e.error_scope=e.error_scope||e.scope;e.async=!1===e.async?!1:!0;e.data=e.data||"";if(i=g.XMLHttpRequest?new XMLHttpRequest:j("Microsoft.XMLHTTP")||j("Msxml2.XMLHTTP")){i.overrideMimeType&&i.overrideMimeType(e.content_type);i.open(e.type||(e.data?"POST":"GET"),e.url,e.async);e.content_type&&i.setRequestHeader("Content-Type",
e.content_type);i.setRequestHeader("X-Requested-With","XMLHttpRequest");i.send(e.data);var a=function(){!e.async||4==i.readyState||1E4<c++?(e.success&&1E4>c&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,1E4<c?"TIMED_OUT":"GENERAL",i,e),i=null):g.setTimeout(a,10)};if(!e.async)return a();g.setTimeout(a,10)}}});
(function(){var e=tinymce.extend,j=tinymce.util.JSON,i=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(g){this.settings=e({},g);this.count=0},send:function(g){var c=g.error,a=g.success,g=e(this.settings,g);g.success=function(d,b){d=j.parse(d);"undefined"==typeof d&&(d={error:"JSON Parse error."});d.error?c.call(g.error_scope||g.scope,d.error,b):a.call(g.success_scope||g.scope,d.result)};g.error=function(a,b){c&&c.call(g.error_scope||g.scope,a,b)};g.data=j.serialize({id:g.id||
"c"+this.count++,method:g.method,params:g.params});g.content_type="application/json";i.send(g)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})})();(function(e){e.VK={DELETE:46,BACKSPACE:8,ENTER:13,TAB:9,SPACEBAR:32,UP:38,DOWN:40,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey}}})(tinymce);
(function(e){function j(a){function d(b){var p=a.dom.create("body"),b=b.cloneContents();p.appendChild(b);return a.selection.serializer.serialize(p,{format:"html"})}a.onKeyDown.addToTop(function(c,e){var k=e.keyCode;if(k==f||k==b){var k=c.selection.getRng(!0),m;if(m=!k.collapsed)k=d(k),m=a.dom.createRng(),m.selectNode(a.getBody()),m=d(m),m=k===m;m&&(c.setContent("",{format:"raw"}),c.nodeChanged(),e.preventDefault())}})}function i(a){a.onKeyDown.add(function(a,d){if(d.keyCode===b&&a.selection.isCollapsed()&&
0===a.selection.getRng(!0).startOffset){var h=a.selection.getNode().previousSibling;h&&(h.nodeName&&"hr"===h.nodeName.toLowerCase())&&(a.dom.remove(h),e.dom.Event.cancel(d))}})}function g(a){function d(a,b,h){var p=/^&nbsp;$|^<br>$/,h=h||b,h=h.parentNode?h.parentNode.childNodes||[]:[],f=!0,c=/TABLE|TH|TD/;return(f=(f=(f=!c.test(b.nodeName))&&b.previousSibling?!c.test(b.previousSibling.nodeName):f)&&b.nextSibling?!c.test(b.nextSibling.nodeName):f)&&(p.test(a)||1<h.length&&"BR"==h[0].nodeName)}function c(a){return a&&
a.innerHTML&&(a.innerHTML.replace(/\uFEFF|\u200B/g,"")||"&nbsp;")}a.onKeyDown.add(function(a,k){var h=a.selection.getNode(),g=h.nextSibling,o;if(a.selection.isCollapsed()&&h!=a.dom.getRoot())if(k.keyCode===b)0===a.selection.getRng(!0).startOffset&&(g=h.previousSibling,o=c(g),g&&d(o,h,g)&&(a.dom.remove(g),e.dom.Event.cancel(k)));else if(k.keyCode==f&&(o=c(h),!(1>=(h.parentNode?h.parentNode.childNodes||[]:[]).length||1<h.childNodes.length)&&g&&d(o,h,g)))a.dom.remove(h),e.dom.Event.cancel(k),h=a.selection,
o=h.getRng(!0),a.focus(),g.focus(),o.setStart(g,0),o.setEnd(g,0),h.setRng(o)})}function c(a){a.onClick.add(function(a,b){b=b.target;/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1);"A"==b.nodeName&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b);a.nodeChanged()})}function c(a){a.onClick.add(function(a,b){b=b.target;/^(IMG|HR)$/.test(b.nodeName)&&a.selection.getSel().setBaseAndExtent(b,0,b,1);"A"==b.nodeName&&a.dom.hasClass(b,"mceItemAnchor")&&a.selection.select(b);
a.nodeChanged()})}function a(){document.body.setAttribute("role","application")}function a(){document.body.setAttribute("role","application")}var d=e.VK,b=d.BACKSPACE,f=d.DELETE;e.create("tinymce.util.Quirks",{Quirks:function(h){if(e.isWebKit){if(e.isChrome){var p=function(a,b){"[object Array]"===toString.call(a)?e.each(a,function(a){a?l.setAttrib(l.select(".non-editable",a),"contenteditable",b):l.setAttrib(e.DOM.select(".non-editable"),"contenteditable",b)}):l.setAttrib(l.select(".non-editable",
a),"contenteditable",b)},l=h.dom,n=h.selection;h.onKeyDown.add(function(a,k){var h,c,m,g=function(){var a=[],b=!1;e.each(c,function(d){d?a=a.concat(l.select("span",d)):b||(a=a.concat(e.DOM.select("span")),b=!0)});return a};if(((m=k.keyCode==f)||k.keyCode==b)&&!d.modifierPressed(k)){k.preventDefault();h=n.getRng();var i;i=l.getParent(h.startContainer,l.isBlock);c=m?[i,l.getNext(i,l.isBlock)]:[l.getPrev(i,l.isBlock),i];e.each(g(),function(a){a.setAttribute("data-mce-mark","1")});(h=!m&&c[1]&&AJS.EditorUtils.isCursorAtStartOf(c[1],
h)||m&&c[0]&&AJS.EditorUtils.isCursorAtEndOf(c[0],h))&&p(c[1],!0);a.getDoc().execCommand(m?"ForwardDelete":"Delete",!1,null);h&&p(c,!1);e.each(g(),function(a){a.getAttribute("data-mce-mark")?a.removeAttribute("data-mce-mark"):a.style.color?l.setAttrib(a,"style","color: "+a.style.color):l.remove(a,!0)})}})}j(h);h.dom.bind(h.getDoc(),"focusin",function(){setTimeout(function(){h&&!h.destroyed&&h.selection.setRng(h.selection.getRng())},0)});c(h);if(e.isIDevice){var k,m;h.dom.bind(h.getDoc(),"selectionchange",
function(){m&&(clearTimeout(m),m=0);m=window.setTimeout(function(){var a=h.selection.getRng();if(!k||!e.dom.RangeUtils.compareRanges(a,k)){h.nodeChanged();k=a}},50)})}g(h)}e.isIE&&(i(h),j(h),a(h),h.onKeyDown.add(function(a,b){var k;if(k=b.keyCode===d.ENTER)if(k=!d.modifierPressed(b))k=a.selection.getNode(),k=a.dom.is(k,"h1,h2,h3,h4,h5,h6")||null!==a.dom.getParent(k,"h1,h2,h3,h4,h5,h6");k&&setTimeout(function(){var b=a.selection.getNode();a.dom.is(b,"p")&&(a.dom.setAttrib(b,"style",null),a.execCommand("mceCleanup"))},
0)}),g(h));e.isGecko&&(i(h),g(h),Range.prototype.getClientRects||h.onMouseDown.add(function(a,b){if(b.target.nodeName==="HTML"){var d=a.getBody();d.blur();setTimeout(function(){d.focus()},0)}}))}})})(tinymce);
(function(e){function j(a,b){var d,k,h,f={};if(a){a=a.split(",");b=b||10;for(d=0;d<a.length;d+=2)k=String.fromCharCode(parseInt(a[d],b)),g[k]||(h="&"+a[d+1]+";",f[k]=h,f[h]=k);return f}}var i,g,c,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,b=/[<>&\"\']/g,f=/&(#x|#)?([\w]+);/g,h={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",
148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};g={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"};c={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"};i=j("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",
32);e.html=e.html||{};e.html.Entities={encodeRaw:function(b,h){return b.replace(h?a:d,function(a){return g[a]||a})},encodeAllRaw:function(a){return(""+a).replace(b,function(a){return g[a]||a})},encodeNumeric:function(b,h){return b.replace(h?a:d,function(a){return 1<a.length?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":g[a]||"&#"+a.charCodeAt(0)+";"})},encodeNamed:function(b,h,f){f=f||i;return b.replace(h?a:d,function(a){return g[a]||f[a]||a})},getEncodeFunc:function(b,h){function f(b,
k){return b.replace(k?a:d,function(a){return g[a]||h[a]||"&#"+a.charCodeAt(0)+";"||a})}function k(a,b){return c.encodeNamed(a,b,h)}var c=e.html.Entities,h=j(h)||i,b=e.makeMap(b.replace(/\+/g,","));return b.named&&b.numeric?f:b.named?h?k:c.encodeNamed:b.numeric?c.encodeNumeric:c.encodeRaw},decode:function(a){return a.replace(f,function(a,b,d){if(b)return d=parseInt(d,2===b.length?16:10),65535<d?(d-=65536,String.fromCharCode(55296+(d>>10),56320+(d&1023))):h[d]||String.fromCharCode(d);if(!(b=c[a]))if(!(b=
i[a]))b=document.createElement("div"),b.innerHTML=a,b=b.textContent||b.innerText||a;return b})}}})(tinymce);
tinymce.html.Styles=function(e,j){function i(a,b,d,k){function h(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}return"#"+h(b)+h(d)+h(k)}var g=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,b,f={},h,e=e||{};h="\\\" \\' \\; \\: ; : ﻿".split(" ");for(b=0;b<h.length;b++)f[h[b]]="﻿"+b,f["﻿"+b]=h[b];return{toHex:function(a){return a.replace(g,
i)},parse:function(b){function h(a,b){var d,k;if(d=q[a+"-top"+b])k=q[a+"-right"+b],d==k&&(d=q[a+"-bottom"+b],k==d&&(k=q[a+"-left"+b],d==k&&(q[a+b]=k,delete q[a+"-top"+b],delete q[a+"-right"+b],delete q[a+"-bottom"+b],delete q[a+"-left"+b])))}function n(a){var b=q[a],d;if(b&&!(0>b.indexOf(" "))){b=b.split(" ");for(d=b.length;d--;)if(b[d]!==b[0])return!1;q[a]=b[0];return!0}}function k(a){A=!0;return f[a]}function m(a,b){A&&(a=a.replace(/\uFEFF[0-9]/g,function(a){return f[a]}));b||(a=a.replace(/\\([\'\";:])/g,
"$1"));return a}var q={},o,s,r,A,j=e.url_converter,u=e.url_converter_scope||this;if(b){for(b=b.replace(/\\[\"\';:\uFEFF]/g,k).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(a){return a.replace(/[;:]/g,k)});o=a.exec(b);){s=o[1].replace(d,"").toLowerCase();r=o[2].replace(d,"");if(s&&0<r.length){if("font-weight"===s&&"700"===r)r="bold";else if("color"===s||"background-color"===s)r=r.toLowerCase();r=r.replace(g,i);r=r.replace(c,function(a,b,d,k,h,f){if(h=h||f)return h=m(h),"'"+h.replace(/\'/g,"\\'")+"'";b=
m(b||d||k);j&&(b=j.call(u,b,"style"));return"url('"+b.replace(/\'/g,"\\'")+"')"});q[s]=A?m(r,!0):r}a.lastIndex=o.index+o[0].length}h("border","");h("border","-width");h("border","-color");h("border","-style");h("padding","");h("margin","");n("border-width")&&(n("border-style")&&n("border-color"))&&(q.border=q["border-width"]+" "+q["border-style"]+" "+q["border-color"],delete q["border-width"],delete q["border-style"],delete q["border-color"]);"medium none"===q.border&&delete q.border}return q},serialize:function(a,
b){function d(b){var h,f,c,m;if(h=j.styles[b]){f=0;for(c=h.length;f<c;f++)b=h[f],m=a[b],void 0!==m&&0<m.length&&(k+=(0<k.length?" ":"")+b+": "+m+";")}}var k="",h,f;if(b&&j&&j.styles)d("*"),d(b);else for(h in a)f=a[h],void 0!==f&&0<f.length&&(k+=(0<k.length?" ":"")+h+": "+f+";");return k}}};
(function(e){function j(a,b){return a.split(b||",")}var i={},g,c,a,d,b={},f,h,p=e.makeMap,l=e.each;c="h1,h2,h3,h4,h5,h6,hr,p,div,address,pre,form,table,tbody,thead,tfoot,th,tr,td,li,ol,ul,caption,blockquote,center,dl,dt,dd,dir,fieldset,noscript,menu,isindex,samp,header,footer,article,section,hgroup";c=p(c,",",p(c.toUpperCase()));var n={Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",
ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",
E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},k=function(a){return a.replace(/[A-Z]+/g,function(a){return k(n[a])})},m,q={};for(m in n)n.hasOwnProperty(m)&&(n[m]=k(n[m]));k("script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]").replace(/#/g,
"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(a,b,d,k){d=j(d,"|");q[b]={attributes:p(d),attributesOrder:d,children:p(k,"|",{"#comment":{}})}});i=q;g=p("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected,autoplay,loop,controls");a=p("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,source");d=e.extend(p("td,th,iframe,video,audio,object"),a);f=p("pre,script,style,textarea,code");h=p("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");
e.html.Schema=function(k){function m(a){var b,d,k,h,f,c,l,g,o,n,s,A,i,r,q,v,u,z,t=/^([#+-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,B=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,Q=/[*?+]/;if(a){a=j(a);x["@"]&&(v=x["@"].attributes,u=x["@"].attributesOrder);b=0;for(d=a.length;b<d;b++)if(f=t.exec(a[b])){r=f[1];o=f[2];q=f[3];g=f[4];A={};i=[];c={attributes:A,attributesOrder:i};"#"===r&&(c.paddEmpty=!0);"-"===r&&(c.removeEmpty=!0);if(v){for(z in v)A[z]=v[z];i.push.apply(i,u)}if(g){g=j(g,"|");k=
0;for(h=g.length;k<h;k++)if(f=B.exec(g[k]))if(l={},s=f[1],n=f[2].replace(/::/g,":"),r=f[3],f=f[4],"!"===s&&(c.attributesRequired=c.attributesRequired||[],c.attributesRequired.push(n),l.required=!0),"-"===s)delete A[n],i.splice(e.inArray(i,n),1);else{if(r&&("="===r&&(c.attributesDefault=c.attributesDefault||[],c.attributesDefault.push({name:n,value:f}),l.defaultValue=f),":"===r&&(c.attributesForced=c.attributesForced||[],c.attributesForced.push({name:n,value:f}),l.forcedValue=f),"<"===r))l.validValues=
p(f,"?");Q.test(n)?(c.attributePatterns=c.attributePatterns||[],l.pattern=RegExp("^"+n.replace(/([?+*])/g,".$1")+"$"),c.attributePatterns.push(l)):(A[n]||i.push(n),A[n]=l)}}!v&&"@"==o&&(v=A,u=i);q&&(c.outputName=o,x[q]=c);Q.test(o)?(c.pattern=RegExp("^"+o.replace(/([?+*])/g,".$1")+"$"),y.push(c)):x[o]=c}}}function n(a){x={};y=[];m(a);l(i,function(a,b){z[b]=a.children})}function A(a){var d=/^(~)?(.+)$/;a&&l(j(a),function(a){var a=d.exec(a),k="~"===a[1],h=k?"span":"div",f=a[2];z[f]=z[h];b[f]=h;k||(c[f]=
{});l(z,function(a){a[h]&&(a[f]=a[h])})})}function q(a){var b=/^([+\-]?)(\w+)\[([^\]]+)\]$/;a&&l(j(a),function(a){var a=b.exec(a),d,k;a&&(d=(k=a[1])?z[a[2]]:z[a[2]]={"#comment":{}},d=z[a[2]],l(j(a[3],"|"),function(a){"-"===k?delete d[a]:d[a]={}}))})}function u(a){var b=x[a],d;if(b)return b;for(d=y.length;d--;)if(b=y[d],b.pattern.test(a))return b}var x={},z={},y=[],t,B,k=k||{};!1===k.verify_html&&(k.valid_elements="*[*]");k.valid_styles&&(t={},l(k.valid_styles,function(a,b){t[b]=e.explode(a)}));B=
k.whitespace_elements?p(k.whitespace_elements):f;k.valid_elements?n(k.valid_elements):(l(i,function(a,b){x[b]={attributes:a.attributes,attributesOrder:a.attributesOrder};z[b]=a.children}),l(j("strong/b,em/i"),function(a){a=j(a,"/");x[a[1]].outputName=a[0]}),x.img.attributesDefault=[{name:"alt",value:""}],l(j("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr"),function(a){x[a].removeEmpty=true}),l(j("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(a){x[a].paddEmpty=true}));A(k.custom_elements);
q(k.valid_children);m(k.extended_valid_elements);q("+ol[ul|ol],+ul[ul|ol]");u("span")||m("span[!data-mce-type|*]");k.invalid_elements&&e.each(e.explode(k.invalid_elements),function(a){x[a]&&delete x[a]});this.children=z;this.styles=t;this.getBoolAttrs=function(){return g};this.getBlockElements=function(){return c};this.getShortEndedElements=function(){return a};this.getSelfClosingElements=function(){return h};this.getNonEmptyElements=function(){return d};this.getWhiteSpaceElements=function(){return B};
this.isValidChild=function(a,b){var d=z[a];return!(!d||!d[b])};this.getElementRule=u;this.getCustomElements=function(){return b};this.addValidElements=m;this.setValidElements=n;this.addCustomElements=A;this.addValidChildren=q};e.html.Schema.boolAttrMap=g;e.html.Schema.blockElementsMap=c})(tinymce);
(function(e){e.html.SaxParser=function(j,i){var g=this,c=function(){},j=j||{};g.schema=i=i||new e.html.Schema;!1!==j.fix_self_closing&&(j.fix_self_closing=!0);e.each("comment cdata text start end pi doctype".split(" "),function(a){a&&(g[a]=j[a]||c)});g.parse=function(a){function d(a){var d,k;for(d=g.length;d--;)if(g[d].name===a)break;if(d>=0){for(k=g.length-1;k>=d;k--){a=g[k];a.valid&&b.end(a.name)}g.length=d}}var b=this,f,h=0,c,l,g=[],k,m,q,o,s,r,A,v,u,x,z,y,t,B,G,K,C,D,J,E,L,M,H=0,F=e.html.Entities.decode,
N,O;E=RegExp("<(?:(?:!--([\\w\\W]*?)--\>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([^\\s\\/<>]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/)>))","g");L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:\\.|[^\"])*)\")|(?:\'((?:\\.|[^\'])*)\')|([^>\s]+)))?/g;M={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi};r=i.getShortEndedElements();J=i.getSelfClosingElements();A=i.getBoolAttrs();
v=j.validate;s=j.remove_internals;N=j.fix_self_closing;O=e.isIE;for(t=/^:/;f=E.exec(a);){h<f.index&&b.text(F(a.substr(h,f.index-h)));if(c=f[6]){c=c.toLowerCase();O&&t.test(c)&&(c=c.substr(1));d(c)}else if(c=f[7]){c=c.toLowerCase();O&&t.test(c)&&(c=c.substr(1));h=c in r;N&&(J[c]&&g.length>0&&g[g.length-1].name===c)&&d(c);if(!v||(u=i.getElementRule(c))){x=true;if(v){B=u.attributes;G=u.attributePatterns}if(y=f[8]){(o=y.indexOf("data-mce-type")!==-1)&&s&&(x=false);k=[];k.map={};y.replace(L,function(a,
b,d,h,f){b=b.toLowerCase();d=b in A?b:F(d||h||f||"");if(v&&!o&&b.indexOf("data-")!==0){a=B[b];if(!a&&G){for(h=G.length;h--;){a=G[h];if(a.pattern.test(b))break}h===-1&&(a=null)}if(!a||a.validValues&&!(d in a.validValues))return}k.map[b]=d;k.push({name:b,value:d})})}else{k=[];k.map={}}if(v&&!o){K=u.attributesRequired;C=u.attributesDefault;if(D=u.attributesForced)for(l=D.length;l--;){z=D[l];q=z.name;z=z.value;z==="{$uid}"&&(z="mce_"+H++);k.map[q]=z;k.push({name:q,value:z})}if(C)for(l=C.length;l--;){z=
C[l];q=z.name;if(!(q in k.map)){z=z.value;z==="{$uid}"&&(z="mce_"+H++);k.map[q]=z;k.push({name:q,value:z})}}if(K){for(l=K.length;l--;)if(K[l]in k.map)break;l===-1&&(x=false)}k.map["data-mce-bogus"]&&(x=false)}x&&b.start(c,k,h)}else x=false;if(l=M[c]){l.lastIndex=h=f.index+f[0].length;if(f=l.exec(a)){x&&(m=a.substr(h,f.index-h));h=f.index+f[0].length}else{m=a.substr(h);h=a.length}x&&m.length>0&&b.text(m,true);x&&b.end(c);E.lastIndex=h;continue}h||(!y||y.indexOf("/")!=y.length-1?g.push({name:c,valid:x}):
x&&b.end(c))}else(c=f[1])?b.comment(c):(c=f[2])?b.cdata(c):(c=f[3])?b.doctype(c):(c=f[4])&&b.pi(c,f[5]);h=f.index+f[0].length}h<a.length&&b.text(F(a.substr(h)));for(l=g.length-1;l>=0;l--){c=g[l];c.valid&&b.end(c.name)}}}})(tinymce);
(function(e){function j(a,d,b){var f;f=b?"lastChild":"firstChild";b=b?"prev":"next";if(a[f])return a[f];if(a!==d){if(f=a[b])return f;for(a=a.parent;a&&a!==d;a=a.parent)if(f=a[b])return f}}function i(a,d){this.name=a;this.type=d;1===d&&(this.attributes=[],this.attributes.map={})}var g=/^[ \t\r\n]*$/,c={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(i.prototype,{replace:function(a){a.parent&&a.remove();this.insert(a,this);this.remove();return this},attr:function(a,
d){var b,f;if("string"!==typeof a){for(f in a)this.attr(f,a[f]);return this}if(b=this.attributes){if(void 0!==d){if(null===d){if(a in b.map){delete b.map[a];for(f=b.length;f--;)if(b[f].name===a){b.splice(f,1);break}}return this}if(a in b.map)for(f=b.length;f--;){if(b[f].name===a){b[f].value=d;break}}else b.push({name:a,value:d});b.map[a]=d;return this}return b.map[a]}},clone:function(){var a=new i(this.name,this.type),d,b,f,h,c;if(f=this.attributes){c=[];c.map={};d=0;for(b=f.length;d<b;d++)h=f[d],
"id"!==h.name&&(c[c.length]={name:h.name,value:h.value},c.map[h.name]=h.value);a.attributes=c}a.value=this.value;a.shortEnded=this.shortEnded;return a},wrap:function(a){this.parent.insert(a,this);a.append(this);return this},unwrap:function(){var a,d;for(a=this.firstChild;a;)d=a.next,this.insert(a,this,!0),a=d;this.remove()},remove:function(){var a=this.parent,d=this.next,b=this.prev;if(a){if(a.firstChild===this){if(a.firstChild=d)d.prev=null}else b.next=d;if(a.lastChild===this){if(a.lastChild=b)b.next=
null}else d.prev=b;this.parent=this.next=this.prev=null}return this},append:function(a){var d;a.parent&&a.remove();(d=this.lastChild)?(d.next=a,a.prev=d,this.lastChild=a):this.lastChild=this.firstChild=a;a.parent=this;return a},insert:function(a,d,b){var f;a.parent&&a.remove();f=d.parent||this;b?(d===f.firstChild?f.firstChild=a:d.prev.next=a,a.prev=d.prev,a.next=d,d.prev=a):(d===f.lastChild?f.lastChild=a:d.next.prev=a,a.next=d.next,a.prev=d,d.next=a);a.parent=f;return a},getAll:function(a){var d,
b=[];for(d=this.firstChild;d;d=j(d,this))d.name===a&&b.push(d);return b},empty:function(){var a,d,b;if(this.firstChild){a=[];for(b=this.firstChild;b;b=j(b,this))a.push(b);for(d=a.length;d--;)b=a[d],b.parent=b.firstChild=b.lastChild=b.next=b.prev=null}this.firstChild=this.lastChild=null;return this},isEmpty:function(a){var a=a||new e.html.Schema,d=this.firstChild,b,f=a.getNonEmptyElements(),h=a.getWhiteSpaceElements();if(d){do{if(1===d.type){if(d.attributes.map["data-mce-bogus"])continue;if(f[d.name])return!1;
for(a=d.attributes.length;a--;)if(b=d.attributes[a].name,"name"===b||0===b.indexOf("data-"))return!1}if(8===d.type||3===d.type&&(!g.test(d.value)||h[this.name]&&d.value&&0<d.value.length&&g.test(d.value)))return!1}while(d=j(d,this))}return!0},walk:function(a){return j(this,null,a)}});e.extend(i,{create:function(a,d){var b,f;b=new i(a,c[a]||1);if(d)for(f in d)b.attr(f,d[f]);return b}});e.html.Node=i})(tinymce);
(function(e){var j=e.html.Node;e.html.DomParser=function(i,g){var c=this,a={},d=[],b={},f={},i=i||{};i.validate="validate"in i?i.validate:!0;i.root_name=i.root_name||"body";c.schema=g=g||new e.html.Schema;c.filterNode=function(h){var c,e,g;e in a&&((g=b[e])?g.push(h):b[e]=[h]);for(c=d.length;c--;)e=d[c].name,e in h.attributes.map&&((g=f[e])?g.push(h):f[e]=[h]);return h};c.addNodeFilter=function(b,d){e.each(e.explode(b),function(b){var h=a[b];h||(a[b]=h=[]);h.push(d)})};c.addAttributeFilter=function(a,
b){e.each(e.explode(a),function(a){var h;for(h=0;h<d.length;h++)if(d[h].name===a){d[h].callbacks.push(b);return}d.push({name:a,callbacks:[b]})})};c.parse=function(h,p){function l(d,k){var h=new j(d,k),f;d in a&&((f=b[d])?f.push(h):b[d]=[h]);return h}function n(a){for(var b,a=a.prev;a&&3===a.type;)b=a.value.replace(t,""),0<b.length?(a.value=b,a=a.prev):(b=a.prev,a.remove(),a=b)}var k,m,q,o,s,r,A,v,u,x,z,y=[],t,B,G,K,p=p||{};b={};f={};x=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),
g.getBlockElements());g.getNonEmptyElements();K=g.children;u=i.validate;o="forced_root_block"in p?p.forced_root_block:i.forced_root_block;G=g.getWhiteSpaceElements();z=/^[ \t\r\n]+/;t=/[ \t\r\n]+$/;B=/[ \t\r\n]+/g;k=new e.html.SaxParser({validate:u,fix_self_closing:!u,cdata:function(a){q.append(l("#cdata",4)).value=a},text:function(a,b){var d;G[q.name]||(a=a.replace(B," "),q.lastChild&&x[q.lastChild.name]&&(a=a.replace(z,"")));0!==a.length&&(d=l("#text",3),d.raw=!!b,q.append(d).value=a)},comment:function(a){q.append(l("#comment",
8)).value=a},pi:function(a,b){q.append(l(a,7)).value=b;n(q)},doctype:function(a){q.append(l("#doctype",10)).value=a;n(q)},start:function(a,b,k){var h,c,m;if(h=u?g.getElementRule(a):{}){h=l(h.outputName||a,1);h.attributes=b;h.shortEnded=k;q.append(h);(c=K[q.name])&&(K[h.name]&&!c[h.name])&&y.push(h);for(c=d.length;c--;)m=d[c].name,m in b.map&&((v=f[m])?v.push(h):f[m]=[h]);x[a]&&n(h);k||(q=h)}},end:function(a){var b,d;if(b=u?g.getElementRule(a):{}){if(x[a]&&!G[q.name]){for(a=q.firstChild;a&&3===a.type;)d=
a.value.replace(z,""),0<d.length?(a.value=d,a=a.next):(d=a.next,a.remove(),a=d);for(a=q.lastChild;a&&3===a.type;)d=a.value.replace(t,""),0<d.length?(a.value=d,a=a.prev):(d=a.prev,a.remove(),a=d)}if((b.removeEmpty||b.paddEmpty)&&q.isEmpty(g))if(b.paddEmpty)q.empty().append(new j("#text","3")).value=" ";else if(!q.attributes.map.name){b=q.parent;q.empty().remove();q=b;return}q=q.parent}}},g);m=q=new j(p.context||i.root_name,11);k.parse(h);if(u&&y.length)if(p.context)p.invalid=!0;else{var C,D,J,E,L,
M,H,F;H=e.makeMap("tr,td,th,tbody,thead,tfoot,table");g.getNonEmptyElements();for(k=0;k<y.length;k++)if(r=y[k],r.parent){D=[r];for(C=r.parent;C&&!g.isValidChild(C.name,r.name)&&!H[C.name];C=C.parent)D.push(C);if(C&&1<D.length){D.reverse();J=E=c.filterNode(D[0].clone());for(M=0;M<D.length-1;M++){g.isValidChild(E.name,D[M].name)?(L=c.filterNode(D[M].clone()),E.append(L)):L=E;for(E=D[M].firstChild;E&&E!=D[M+1];)F=E.next,L.append(E),E=F;E=L}J.isEmpty(g)?C.insert(r,D[0],!0):(C.insert(J,D[0],!0),C.insert(r,
J));C=D[0];(C.isEmpty(g)||C.firstChild===C.lastChild&&"br"===C.firstChild.name)&&C.empty().remove()}else r.parent&&("li"===r.name?(C=r.prev)&&("ul"===C.name||"ul"===C.name)?C.append(r):(C=r.next)&&("ul"===C.name||"ul"===C.name)?C.insert(r,C.firstChild,!0):r.wrap(c.filterNode(new j("ul",1))):g.isValidChild(r.parent.name,"div")&&g.isValidChild("div",r.name)?r.wrap(c.filterNode(new j("div",1))):"style"===r.name||"script"===r.name?r.empty().remove():r.unwrap())}}if(o&&"body"==m.name)for(k=m.firstChild;k;)r=
k.next,3==k.type||1==k.type&&"p"!==k.name&&!x[k.name]&&!k.attr("data-mce-type")?(s||(s=l(o,1),m.insert(s,k)),s.append(k)):s=null,k=r;if(!p.invalid){for(A in b){v=a[A];o=b[A];for(r=o.length;r--;)o[r].parent||o.splice(r,1);s=0;for(k=v.length;s<k;s++)v[s](o,A,p)}s=0;for(k=d.length;s<k;s++)if(v=d[s],v.name in f){o=f[v.name];for(r=o.length;r--;)o[r].parent||o.splice(r,1);r=0;for(A=v.callbacks.length;r<A;r++)v.callbacks[r](o,v.name,p)}}return m};i.remove_trailing_brs&&c.addNodeFilter("br",function(a){var b,
d=a.length,c,k=g.getBlockElements();g.getNonEmptyElements();var f,i,o;k.body=1;for(b=0;b<d;b++)if(c=a[b],f=c.parent,k[c.parent.name]&&c===f.lastChild){for(i=c.prev;i;){o=i.name;if("span"!==o||"bookmark"!==i.attr("data-mce-type")){if("br"!==o)break;if("br"===o){c=null;break}}i=i.prev}if(c&&(c.remove(),f.isEmpty(g)&&(elementRule=g.getElementRule(f.name))))elementRule.removeEmpty?f.remove():elementRule.paddEmpty&&(f.empty().append(new e.html.Node("#text",3)).value=" ")}})}})(tinymce);
tinymce.html.Writer=function(e){var j=[],i,g,c,a,d,e=e||{};i=e.indent;g=tinymce.makeMap(e.indent_before||"");c=tinymce.makeMap(e.indent_after||"");a=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities);d="html"==e.element_format;return{start:function(b,f,h){var e,l,n;i&&(g[b]&&0<j.length)&&(e=j[j.length-1],0<e.length&&"\n"!==e&&j.push("\n"));j.push("<",b);if(f){e=0;for(l=f.length;e<l;e++)n=f[e],j.push(" ",n.name,'="',a(n.value,!0),'"')}j[j.length]=!h||d?">":" />";h&&(i&&c[b]&&
0<j.length)&&(e=j[j.length-1],0<e.length&&"\n"!==e&&j.push("\n"))},end:function(a){j.push("</",a,">");i&&(c[a]&&0<j.length)&&(a=j[j.length-1],0<a.length&&"\n"!==a&&j.push("\n"))},text:function(b,d){0<b.length&&(j[j.length]=d?b:a(b))},cdata:function(a){j.push("<![CDATA[",a,"]]\>")},comment:function(a){j.push("<\!--",a,"--\>")},pi:function(a,d){d?j.push("<?",a," ",d,"?>"):j.push("<?",a,"?>");i&&j.push("\n")},doctype:function(a){j.push("<!DOCTYPE",a,">",i?"\n":"")},reset:function(){j.length=0},getContent:function(){return j.join("").replace(/\n$/,
"")}}};
(function(e){e.html.Serializer=function(j,i){var g=new e.html.Writer(j),j=j||{};j.validate="validate"in j?j.validate:!0;this.schema=i=i||new e.html.Schema;this.writer=g;this.serialize=function(c){function a(c){var h=d[c.type],e,l,n,k,m,j,o,s;if(h)h(c);else{h=c.name;e=c.shortEnded;l=c.attributes;if(b&&l&&1<l.length){m=[];m.map={};s=i.getElementRule(c.name);j=0;for(o=s.attributesOrder.length;j<o;j++)n=s.attributesOrder[j],n in l.map&&(k=l.map[n],m.map[n]=k,m.push({name:n,value:k}));j=0;for(o=l.length;j<
o;j++)n=l[j].name,n in m.map||(k=l.map[n],m.map[n]=k,m.push({name:n,value:k}));l=m}g.start(c.name,l,e);if(!e){if(c=c.firstChild){do a(c);while(c=c.next)}g.end(h)}}}var d,b;b=j.validate;d={3:function(a){g.text(a.value,a.raw)},8:function(a){g.comment(a.value)},7:function(a){g.pi(a.name,a.value)},10:function(a){g.doctype(a.value)},4:function(a){g.cdata(a.value)},11:function(b){if(b=b.firstChild){do a(b);while(b=b.next)}}};g.reset();if(1==c.type&&!j.inner)a(c);else d[11](c);return g.getContent()}}})(tinymce);
(function(e){var j=e.each,i=e.is,g=e.isWebKit,c=e.isIE,a=e.html.Entities,d=/^([a-z0-9],?)+$/i,b=e.html.Schema.blockElementsMap,f=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(a,
b){var d;this.doc=a;this.win=window;this.files={};this.cssFlicker=!1;this.counter=0;this.stdMode=!e.isIE||8<=a.documentMode;this.boxModel=!e.isIE||"CSS1Compat"==a.compatMode||this.stdMode;this.hasOuterHTML="outerHTML"in a.createElement("a");this.settings=b=e.extend({keep_values:!1,hex_colors:1},b);this.schema=b.schema;this.styles=new e.html.Styles({url_converter:b.url_converter,url_converter_scope:b.url_converter_scope},b.schema);if(e.isIE6)try{a.execCommand("BackgroundImageCache",!1,!0)}catch(f){this.cssFlicker=
!0}if(c&&b.schema)for(d in"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(b){a.createElement(b)}),b.schema.getCustomElements())a.createElement(d);e.addUnload(this.destroy,this)},getRoot:function(){var a=this.settings;return a&&this.get(a.root_element)||this.doc.body},getViewPort:function(a){var b,a=!a?this.win:a;b=a.document;b=this.boxModel?b.documentElement:b.body;return{x:a.pageXOffset||
b.scrollLeft,y:a.pageYOffset||b.scrollTop,w:a.innerWidth||b.clientWidth,h:a.innerHeight||b.clientHeight}},getRect:function(a){var b,a=this.get(a);b=this.getPos(a);a=this.getSize(a);return{x:b.x,y:b.y,w:a.w,h:a.h}},getSize:function(a){var b,d,a=this.get(a);b=this.getStyle(a,"width");d=this.getStyle(a,"height");-1===b.indexOf("px")&&(b=0);-1===d.indexOf("px")&&(d=0);return{w:parseInt(b)||a.offsetWidth||a.clientWidth,h:parseInt(d)||a.offsetHeight||a.clientHeight}},getParent:function(a,b,d){return this.getParents(a,
b,d,!1)},getParents:function(a,b,d,c){var k=this,f,e=k.settings,g=[],a=k.get(a),c=void 0===c;e.strict_root&&(d=d||k.getRoot());i(b,"string")&&(f=b,b="*"===b?function(a){return 1==a.nodeType}:function(a){return k.is(a,f)});for(;a&&!(a==d||!a.nodeType||9===a.nodeType);){if(!b||b(a))if(c)g.push(a);else return a;a=a.parentNode}return c?g:null},get:function(a){var b;return a&&(this.doc&&"string"==typeof a)&&(b=a,(a=this.doc.getElementById(a))&&a.id!==b)?this.doc.getElementsByName(b)[1]:a},getNext:function(a,
b){return this._findSib(a,b,"nextSibling")},getPrev:function(a,b){return this._findSib(a,b,"previousSibling")},select:function(a,b){return e.dom.Sizzle(a,this.get(b)||this.get(this.settings.root_element)||this.doc,[])},is:function(a,b){var c;if(void 0===a.length){if("*"===b)return 1==a.nodeType;if(d.test(b)){b=b.toLowerCase().split(/,/);a=a.nodeName.toLowerCase();for(c=b.length-1;0<=c;c--)if(b[c]==a)return!0;return!1}}return 0<e.dom.Sizzle.matches(b,a.nodeType?[a]:a).length},add:function(a,b,d,c,
k){var f=this;return this.run(a,function(a){var h;h=i(b,"string")?f.doc.createElement(b):b;f.setAttribs(h,d);c&&(c.nodeType?h.appendChild(c):f.setHTML(h,c));return!k?a.appendChild(h):h})},create:function(a,b,d){return this.add(this.doc.createElement(a),a,b,d,1)},createHTML:function(a,b,d){var c,k;c="<"+a;for(k in b)b.hasOwnProperty(k)&&(c+=" "+k+'="'+this.encode(b[k])+'"');return"undefined"!=typeof d?c+">"+d+"</"+a+">":c+" />"},remove:function(a,b){return this.run(a,function(a){var d,k=a.parentNode;
if(!k)return null;if(b)for(;d=a.firstChild;)!e.isIE||3!==d.nodeType||d.nodeValue?k.insertBefore(d,a):a.removeChild(d);return k.removeChild(a)})},setStyle:function(a,b,d){var f=this;return f.run(a,function(k){var m;m=k.style;b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});if(f.pixelStyles.test(b)&&(e.is(d,"number")||/^[\-0-9\.]+$/.test(d)))d+="px";switch(b){case "opacity":if(c&&(m.filter=""===d?"":"alpha(opacity="+100*d+")",!a.currentStyle||!a.currentStyle.hasLayout))m.display="inline-block";
m[b]=m["-moz-opacity"]=m["-khtml-opacity"]=d||"";break;case "float":c?m.styleFloat=d:m.cssFloat=d;break;default:m[b]=d||""}f.settings.update_styles&&f.setAttrib(k,"data-mce-style")})},getStyle:function(a,b,d){if(a=this.get(a)){if(this.doc.defaultView&&d){b=b.replace(/[A-Z]/g,function(a){return"-"+a});try{return this.doc.defaultView.getComputedStyle(a,null).getPropertyValue(b)}catch(f){return null}}b=b.replace(/-(\D)/g,function(a,b){return b.toUpperCase()});"float"==b&&(b=c?"styleFloat":"cssFloat");
return a.currentStyle&&d?a.currentStyle[b]:a.style?a.style[b]:void 0}},setStyles:function(a,b){var d=this,c=d.settings,k;k=c.update_styles;c.update_styles=0;j(b,function(b,k){d.setStyle(a,k,b)});c.update_styles=k;c.update_styles&&d.setAttrib(a,c.cssText)},removeAllAttribs:function(a){return this.run(a,function(a){var b,d=a.attributes;for(b=d.length-1;0<=b;b--)a.removeAttributeNode(d.item(b))})},setAttrib:function(a,b,d){var c=this;if(a&&b)return c.settings.strict&&(b=b.toLowerCase()),this.run(a,function(a){var h=
c.settings,f=a.getAttribute(b);if(null!==d)switch(b){case "style":if(!i(d,"string")){j(d,function(b,d){c.setStyle(a,d,b)});return}h.keep_values&&(d&&!c._isRes(d)?a.setAttribute("data-mce-style",d,2):a.removeAttribute("data-mce-style",2));a.style.cssText=d;break;case "class":a.className=d||"";break;case "src":case "href":h.keep_values&&(h.url_converter&&(d=h.url_converter.call(h.url_converter_scope||c,d,b,a)),c.setAttrib(a,"data-mce-"+b,d,2));break;case "shape":a.setAttribute("data-mce-style",d)}i(d)&&
null!==d&&0!==d.length?a.setAttribute(b,""+d,2):a.removeAttribute(b,2);tinyMCE.activeEditor&&f!=d&&(h=tinyMCE.activeEditor,h.onSetAttrib.dispatch(h,a,b,d))})},setAttribs:function(a,b){var d=this;return this.run(a,function(a){j(b,function(b,c){d.setAttrib(a,c,b)})})},getAttrib:function(a,b,d){var f,a=this.get(a);if(!a||1!==a.nodeType)return void 0===d?!1:d;i(d)||(d="");if(/^(src|href|style|coords|shape)$/.test(b)&&(f=a.getAttribute("data-mce-"+b)))return f;c&&this.props[b]&&(f=(f=a[this.props[b]])&&
f.nodeValue?f.nodeValue:f);f||(f=a.getAttribute(b,2));if(/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(b))return!0===a[this.props[b]]&&""===f?b:f?b:"";if("FORM"===a.nodeName&&a.getAttributeNode(b))return a.getAttributeNode(b).nodeValue;if("style"===b&&(f=f||a.style.cssText))f=this.serializeStyle(this.parseStyle(f),a.nodeName),this.settings.keep_values&&!this._isRes(f)&&a.setAttribute("data-mce-style",f);g&&("class"===b&&f)&&(f=f.replace(/(apple|webkit)\-[a-z\-]+/gi,
""));if(c)switch(b){case "rowspan":case "colspan":1===f&&(f="");break;case "size":if("+0"===f||20===f||0===f)f="";break;case "width":case "height":case "vspace":case "checked":case "disabled":case "readonly":0===f&&(f="");break;case "hspace":-1===f&&(f="");break;case "maxlength":case "tabindex":if(32768===f||2147483647===f||"32768"===f)f="";break;case "multiple":case "compact":case "noshade":case "nowrap":return 65535===f?b:d;case "shape":f=f.toLowerCase();break;default:0===b.indexOf("on")&&f&&(f=
e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+f))}return void 0!==f&&null!==f&&""!==f?""+f:d},getPos:function(a,b){var d=0,c=0,k=this.doc,a=this.get(a),b=b||k.body;if(a){if(a.getBoundingClientRect)return a=a.getBoundingClientRect(),c=this.boxModel?k.documentElement:k.body,d=a.left+(k.documentElement.scrollLeft||k.body.scrollLeft)-c.clientTop,c=a.top+(k.documentElement.scrollTop||k.body.scrollTop)-c.clientLeft,{x:d,y:c};for(k=a;k&&k!=b&&k.nodeType;)d+=k.offsetLeft||0,c+=k.offsetTop||0,
k=k.offsetParent;for(k=a.parentNode;k&&k!=b&&k.nodeType;)d-=k.scrollLeft||0,c-=k.scrollTop||0,k=k.parentNode}return{x:d,y:c}},parseStyle:function(a){return this.styles.parse(a)},serializeStyle:function(a,b){return this.styles.serialize(a,b)},loadCSS:function(a){var b=this,d=b.doc,f;a||(a="");f=b.select("head")[0];j(a.split(","),function(a){var h;b.files[a]||(b.files[a]=!0,h=b.create("link",{rel:"stylesheet",href:e._addVer(a)}),c&&(d.documentMode&&d.recalc)&&(h.onload=function(){d.recalc&&d.recalc();
h.onload=null}),f.appendChild(h))})},addClass:function(a,b){return this.run(a,function(a){var d;if(!b)return 0;if(this.hasClass(a,b))return a.className;d=this.removeClass(a,b);return a.className=(""!=d?d+" ":"")+b})},removeClass:function(a,b){var d=this,c;return d.run(a,function(a){var f;return d.hasClass(a,b)?(c||(c=RegExp("(^|\\s+)"+b+"(\\s+|$)","g")),f=a.className.replace(c," "),f=e.trim(" "!=f?f:""),a.className=f,f||(a.removeAttribute("class"),a.removeAttribute("className")),f):a.className})},
hasClass:function(a,b){a=this.get(a);return!a||!b?!1:-1!==(" "+a.className+" ").indexOf(" "+b+" ")},show:function(a){return this.setStyle(a,"display","block")},hide:function(a){return this.setStyle(a,"display","none")},isHidden:function(a){a=this.get(a);return!a||"none"==a.style.display||"none"==this.getStyle(a,"display")},uniqueId:function(a){return(!a?"mce_":a)+this.counter++},setHTML:function(a,b){var d=this;return d.run(a,function(a){if(c){for(;a.firstChild;)a.removeChild(a.firstChild);try{a.innerHTML=
"<br />"+b,a.removeChild(a.firstChild)}catch(k){a=d.create("div"),a.innerHTML="<br />"+b,j(a.childNodes,function(b,d){d&&a.appendChild(b)})}}else a.innerHTML=b;return b})},getOuterHTML:function(a){var b,a=this.get(a);if(!a)return null;if(1===a.nodeType&&this.hasOuterHTML)return a.outerHTML;b=(a.ownerDocument||this.doc).createElement("body");b.appendChild(a.cloneNode(!0));return b.innerHTML},setOuterHTML:function(a,b,d){function f(a,b,d){d=d.createElement("body");d.innerHTML=b;for(b=d.lastChild;b;)k.insertAfter(b.cloneNode(!0),
a),b=b.previousSibling;k.remove(a)}var k=this;return this.run(a,function(a){a=k.get(a);if(1==a.nodeType)if(d=d||a.ownerDocument||k.doc,c)try{c&&1==a.nodeType?a.outerHTML=b:f(a,b,d)}catch(h){f(a,b,d)}else f(a,b,d)})},decode:a.decode,encode:a.encodeAllRaw,insertAfter:function(a,b){b=this.get(b);return this.run(a,function(a){var d,k;d=b.parentNode;(k=b.nextSibling)?d.insertBefore(a,k):d.appendChild(a);return a})},isBlock:function(a){var d=a.nodeType;return d?!!(1===d&&b[a.nodeName]):!!b[a]},replace:function(a,
b,d){i(b,"array")&&(a=a.cloneNode(!0));return this.run(b,function(b){d&&j(e.grep(b.childNodes),function(b){a.appendChild(b)});return b.parentNode.replaceChild(a,b)})},rename:function(a,b){var d=this,c;a.nodeName!=b.toUpperCase()&&(c=d.create(b),j(d.getAttribs(a),function(b){d.setAttrib(c,b.nodeName,d.getAttrib(a,b.nodeName))}),d.replace(c,a,1));return c||a},findCommonAncestor:function(a,b){for(var d=a,c;d;){for(c=b;c&&d!=c;)c=c.parentNode;if(d==c)break;d=d.parentNode}return!d&&a.ownerDocument?a.ownerDocument.documentElement:
d},toHex:function(a){function b(a){a=parseInt(a).toString(16);return 1<a.length?a:"0"+a}var d=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(a);d&&(a="#"+b(d[1])+b(d[2])+b(d[3]));return a},getClasses:function(){function a(f){j(f.imports,function(b){a(b)});j(f.cssRules||f.rules,function(f){switch(f.type||1){case 1:f.selectorText&&j(f.selectorText.split(","),function(a){a=a.replace(/^\s*|\s*$|^\s\./g,"");if(!/\.mce/.test(a)&&/\.[\w\-]+$/.test(a)&&(k=a,a=e._replace(/.*\.([a-z0-9_\-]+).*/i,
"$1",a),(!c||(a=c(a,k)))&&!d[a]))b.push({"class":a}),d[a]=1});break;case 3:a(f.styleSheet)}})}var b=[],d={},c=this.settings.class_filter,k;if(this.classes)return this.classes;try{j(this.doc.styleSheets,a)}catch(f){}0<b.length&&(this.classes=b);return b},run:function(a,b,d){var c=this,k;c.doc&&"string"===typeof a&&(a=c.get(a));if(!a)return!1;d=d||this;return!a.nodeType&&(a.length||0===a.length)?(k=[],j(a,function(a,f){a&&("string"==typeof a&&(a=c.doc.getElementById(a)),k.push(b.call(d,a,f)))}),k):
b.call(d,a)},getAttribs:function(a){var b,a=this.get(a);if(!a)return[];if(c){b=[];if("OBJECT"==a.nodeName)return a.attributes;"OPTION"===a.nodeName&&this.getAttrib(a,"selected")&&b.push({specified:1,nodeName:"selected"});a.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(a){b.push({specified:1,nodeName:a})});return b}return a.attributes},isEmpty:function(a,b){var d,c,k,m;if(a=a.firstChild){k=new e.dom.TreeWalker(a);b=b||this.schema?
this.schema.getNonEmptyElements():null;do{c=a.nodeType;if(1===c){if(a.getAttribute("data-mce-bogus"))continue;m=a.nodeName.toLowerCase();if(b&&b[m]){d=a.parentNode;if("br"===m&&this.isBlock(d)&&d.firstChild===a&&d.lastChild===a)continue;return!1}this.getAttribs(a);for(d=a.attributes.length;d--;)if(m=a.attributes[d].nodeName.toLowerCase(),"name"===m||"data-mce-bookmark"===m||"contenteditable"===m&&"true"===a.attributes[d].value)return!1}if(8==c||3===c&&!f.test(a.nodeValue))return!1}while(a=k.next())}return!0},
destroy:function(a){this.events&&this.events.destroy();this.win=this.doc=this.root=this.events=null;a||e.removeUnload(this.destroy)},createRng:function(){var a=this.doc;return a.createRange?a.createRange():new e.dom.Range(this)},nodeIndex:function(a,b){var d=0,c,k;if(a){c=a.nodeType;for(a=a.previousSibling;a;a=a.previousSibling)if(k=a.nodeType,!(b&&3==k)||k!=c&&a.nodeValue.length)d++,c=k}return d},split:function(a,b,d){function c(a){var b,d=a.childNodes,f=a.nodeType;if(!(1==f&&"bookmark"==a.getAttribute("data-mce-type"))){for(b=
d.length-1;0<=b;b--)c(d[b]);if(9!=f){if(3==f&&0<a.nodeValue.length){b=e.trim(a.nodeValue).length;if(!(d=!k.isBlock(a.parentNode)))if(!(d=0<b)){if(b=0==b)b=a.nextSibling&&"SPAN"==a.nextSibling.nodeName,b=a.previousSibling&&"SPAN"==a.previousSibling.nodeName&&b;d=b}if(d)return}else if(1==f&&(d=a.childNodes,1==d.length&&(d[0]&&1==d[0].nodeType&&"bookmark"==d[0].getAttribute("data-mce-type"))&&a.parentNode.insertBefore(d[0],a),d.length||/^(br|hr|input|img)$/i.test(a.nodeName)))return;k.remove(a)}return a}}
var k=this,f=k.createRng(),g,o;if(a&&b)return f.setStart(a.parentNode,k.nodeIndex(a)),f.setEnd(b.parentNode,k.nodeIndex(b)),g=f.extractContents(),f=k.createRng(),f.setStart(b.parentNode,k.nodeIndex(b)+1),f.setEnd(a.parentNode,k.nodeIndex(a)+1),f=f.extractContents(),o=a.parentNode,o.insertBefore(c(g),a),d?o.replaceChild(d,b):o.insertBefore(b,a),o.insertBefore(c(f),a),k.remove(a),d||b},bind:function(a,b,d,c){this.events||(this.events=new e.dom.EventUtils);return this.events.add(a,b,d,c||this)},unbind:function(a,
b,d){this.events||(this.events=new e.dom.EventUtils);return this.events.remove(a,b,d)},dumpRng:function(a){return"startContainer: "+a.startContainer.nodeName+", startOffset: "+a.startOffset+", endContainer: "+a.endContainer.nodeName+", endOffset: "+a.endOffset},_findSib:function(a,b,d){var c=this,k=b;if(a){i(k,"string")&&(k=function(a){return c.is(a,b)});for(a=a[d];a;a=a[d])if(k(a))return a}return null},_isRes:function(a){return/^(top|left|bottom|right|width|height)/i.test(a)||/;\s*(top|left|bottom|right|width|height)/i.test(a)}});
e.DOM=new e.dom.DOMUtils(document,{process_html:0})})(tinymce);
(function(e){function j(e){function g(a,b){h(v,a,b)}function c(a,b){h(u,a,b)}function a(a){g(a.parentNode,G(a))}function d(a){c(a.parentNode,G(a)+1)}function b(a,b){var d;if(3==a.nodeType||0>b)return a;for(d=a.firstChild;d&&0<b;)--b,d=d.nextSibling;return d?d:a}function f(a,b,d,c){var k,f;if(a==d)return b==c?0:b<c?-1:1;for(k=d;k&&k.parentNode!=a;)k=k.parentNode;if(k){f=0;for(d=a.firstChild;d!=k&&f<b;)f++,d=d.nextSibling;return b<=f?-1:1}for(k=a;k&&k.parentNode!=d;)k=k.parentNode;if(k){f=0;for(d=d.firstChild;d!=
k&&f<c;)f++,d=d.nextSibling;return f<c?-1:1}for(b=e.findCommonAncestor(a,d);a&&a.parentNode!=b;)a=a.parentNode;a||(a=b);for(c=d;c&&c.parentNode!=b;)c=c.parentNode;c||(c=b);if(a==c)return 0;for(d=b.firstChild;d;){if(d==a)return-1;if(d==c)return 1;d=d.nextSibling}}function h(a,b,d){a?(o[z]=b,o[x]=d):(o[y]=b,o[t]=d);for(b=o[y];b.parentNode;)b=b.parentNode;for(d=o[z];d.parentNode;)d=d.parentNode;d==b?0<f(o[z],o[x],o[y],o[t])&&o.collapse(a):o.collapse(a);o.collapsed=o[z]==o[y]&&o[x]==o[t];o.commonAncestorContainer=
e.findCommonAncestor(o[z],o[y])}function p(a){var b,d=0,c=0,f;if(o[z]==o[y])return l(a);b=o[y];for(f=b.parentNode;f;b=f,f=f.parentNode){if(f==o[z]){var e=b;f=c=d=d=f=b=void 0;a!=A&&(b=s.createDocumentFragment());f=n(e,a);b&&b.appendChild(f);d=G(e);d-=o[x];if(!(0>=d))for(f=e.previousSibling;0<d;)c=f.previousSibling,f=q(f,a),b&&b.insertBefore(f,b.firstChild),--d,f=c;a!=r&&(o.setEndBefore(e),o.collapse(u));a=b;return a}++d}b=o[z];for(f=b.parentNode;f;b=f,f=f.parentNode){if(f==o[y]){e=b;f=c=d=f=d=b=void 0;
a!=A&&(b=s.createDocumentFragment());f=k(e,a);b&&b.appendChild(f);d=G(e);++d;d=o[t]-d;for(f=e.nextSibling;0<d;)c=f.nextSibling,f=q(f,a),b&&b.appendChild(f),--d,f=c;a!=r&&(o.setStartAfter(e),o.collapse(v));return b}++c}c-=d;for(b=o[z];0<c;)b=b.parentNode,c--;for(d=o[y];0>c;)d=d.parentNode,c++;c=b.parentNode;for(f=d.parentNode;c!=f;c=c.parentNode,f=f.parentNode)b=c,d=f;var h;a!=A&&(e=s.createDocumentFragment());h=k(b,a);e&&e.appendChild(h);c=G(b);f=G(d);++c;c=f-c;for(h=b.nextSibling;0<c;)f=h.nextSibling,
h=q(h,a),e&&e.appendChild(h),h=f,--c;h=n(d,a);e&&e.appendChild(h);a!=r&&(o.setStartAfter(b),o.collapse(v));return e}function l(a){var d,c,f,k;a!=A&&(d=s.createDocumentFragment());if(o[x]==o[t])return d;if(3==o[z].nodeType){c=o[z].nodeValue;c=c.substring(o[x],o[t]);a!=r&&(o[z].deleteData(o[x],o[t]-o[x]),o.collapse(v));if(a==A)return;d.appendChild(s.createTextNode(c));return d}f=b(o[z],o[x]);for(c=o[t]-o[x];0<c;)k=f.nextSibling,f=q(f,a),d&&d.appendChild(f),--c,f=k;a!=r&&o.collapse(v);return d}function n(a,
d){var c=b(o[y],o[t]-1),f,k,e,h=c!=o[y];if(c==a)return m(c,h,u,d);f=c.parentNode;for(k=m(f,u,u,d);f;){for(;c;)e=c.previousSibling,c=m(c,h,u,d),d!=A&&k.insertBefore(c,k.firstChild),h=v,c=e;if(f==a)return k;c=f.previousSibling;f=f.parentNode;e=m(f,u,u,d);d!=A&&e.appendChild(k);k=e}}function k(a,d){var c=b(o[z],o[x]),f=c!=o[z],k,e,h;if(c==a)return m(c,f,v,d);k=c.parentNode;for(e=m(k,u,v,d);k;){for(;c;)h=c.nextSibling,c=m(c,f,v,d),d!=A&&e.appendChild(c),f=v,c=h;if(k==a)return e;c=k.nextSibling;k=k.parentNode;
h=m(k,u,v,d);d!=A&&h.appendChild(e);e=h}}function m(a,b,d,c){var f;if(b)return q(a,c);if(3==a.nodeType){b=a.nodeValue;d?(f=o[x],d=b.substring(f),b=b.substring(0,f)):(f=o[t],d=b.substring(0,f),b=b.substring(f));c!=r&&(a.nodeValue=b);if(c==A)return;a=a.cloneNode(u);a.nodeValue=d;return a}if(c!=A)return a.cloneNode(u)}function q(a,b){if(b!=A)return b==r?a.cloneNode(v):a;a.parentNode.removeChild(a)}var o=this,s=e.doc,r=1,A=2,v=!0,u=!1,x="startOffset",z="startContainer",y="endContainer",t="endOffset",
B=tinymce.extend,G=e.nodeIndex;B(o,{startContainer:s,startOffset:0,endContainer:s,endOffset:0,collapsed:v,commonAncestorContainer:s,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:g,setEnd:c,setStartBefore:a,setStartAfter:function(a){g(a.parentNode,G(a)+1)},setEndBefore:function(a){c(a.parentNode,G(a))},setEndAfter:d,collapse:function(a){a?(o[y]=o[z],o[t]=o[x]):(o[z]=o[y],o[x]=o[t]);o.collapsed=v},selectNode:function(b){a(b);d(b)},selectNodeContents:function(a){g(a,0);c(a,1===
a.nodeType?a.childNodes.length:a.nodeValue.length)},compareBoundaryPoints:function(a,b){var d=o[z],c=o[x],k=o[y],e=o[t],h=b.startContainer,m=b.startOffset,g=b.endContainer,A=b.endOffset;if(0===a)return f(d,c,h,m);if(1===a)return f(k,e,h,m);if(2===a)return f(k,e,g,A);if(3===a)return f(d,c,g,A)},deleteContents:function(){p(A)},extractContents:function(){return p(0)},cloneContents:function(){return p(r)},insertNode:function(a){var b=this[z],d=this[x],c;(3===b.nodeType||4===b.nodeType)&&b.nodeValue?d?
d>=b.nodeValue.length?e.insertAfter(a,b):(d=b.splitText(d),b.parentNode.insertBefore(a,d)):b.parentNode.insertBefore(a,b):(0<b.childNodes.length&&(c=b.childNodes[d]),c?b.insertBefore(a,c):b.appendChild(a))},surroundContents:function(a){var b=o.extractContents();o.insertNode(a);a.appendChild(b);o.selectNode(a)},cloneRange:function(){return B(new j(e),{startContainer:o[z],startOffset:o[x],endContainer:o[y],endOffset:o[t],collapsed:o.collapsed,commonAncestorContainer:o.commonAncestorContainer})}})}e.Range=
j})(tinymce.dom);
(function(){tinymce.dom.TridentSelection=function(e){function j(a,d){var b,c=0,h,g,i,j,k,m,q=-1,o;b=a.duplicate();b.collapse(d);o=b.parentElement();if(o.ownerDocument===e.dom.doc){for(;"false"===o.contentEditable;)o=o.parentNode;if(!o.hasChildNodes())return{node:o,inside:1};i=o.children;for(h=i.length-1;c<=h;)if(m=Math.floor((c+h)/2),j=i[m],b.moveToElementText(j),q=b.compareEndPoints(d?"StartToStart":"EndToEnd",a),0<q)h=m-1;else if(0>q)c=m+1;else return{node:j};if(0>q){j?b.collapse(!1):(b.moveToElementText(o),
b.collapse(!0),j=o,g=!0);b.setEndPoint(d?"EndToStart":"EndToEnd",a);if(0<b.compareEndPoints(d?"StartToStart":"StartToEnd",a)){b=a.duplicate();b.collapse(d);for(k=-1;o==b.parentElement()&&0!=b.move("character",-1);)k++}k=k||b.text.replace("\r\n"," ").length}else b.collapse(!0),b.setEndPoint(d?"StartToStart":"StartToEnd",a),k=b.text.replace("\r\n"," ").length;return{node:j,position:q,offset:k,inside:g}}}var i=this,g=e.dom,c=!0;this.getBookmark=function(a){function d(a){var b,d,c,f,e=[];b=a.parentNode;
for(d=g.doc.body.parentNode;b!=d&&9!==b.nodeType;){c=b.children;for(f=c.length;f--;)if(a===c[f]){e.push(f);break}a=b;b=b.parentNode}return e}function b(a){if(a=j(c,a))return{position:a.position,offset:a.offset,indexes:d(a.node),inside:a.inside}}var c=e.getRng(),h={};2===a&&(c.item?h.start={ctrl:!0,indexes:d(c.item(0))}:(h.start=b(!0),e.isCollapsed()||(h.end=b())));return h};this.moveToBookmark=function(a){function d(a){var b,d,c,f;b=g.doc.body;for(d=a.length-1;0<=d;d--)f=b.children,c=a[d],c<=f.length-
1&&(b=f[c]);return b}function b(b){var g=a[b?"start":"end"],i,k;g&&(i=0<g.position,k=e.createTextRange(),k.moveToElementText(d(g.indexes)),offset=g.offset,void 0!==offset?(k.collapse(g.inside||i),k.moveStart("character",i?-offset:offset)):k.collapse(b),c.setEndPoint(b?"StartToStart":"EndToStart",k),b&&c.collapse(!0))}var c,e=g.doc.body;a.start&&(a.start.ctrl?(c=e.createControlRange(),c.addElement(d(a.start.indexes))):(c=e.createTextRange(),b(!0),b()),c.select())};this.addRange=function(a){function d(a){var d,
f,e,q,u;e=g.create("a");d=a?h:j;f=a?i:n;q=b.duplicate();if(d==k||d==k.documentElement)d=m,f=0;3==d.nodeType?(d.parentNode.insertBefore(e,d),q.moveToElementText(e),q.moveStart("character",f),g.remove(e),b.setEndPoint(a?"StartToStart":"EndToEnd",q)):(u=d.childNodes,u.length?(f>=u.length?g.insertAfter(e,u[u.length-1]):d.insertBefore(e,u[f]),q.moveToElementText(e)):(e=k.createTextNode("﻿"),d.appendChild(e),q.moveToElementText(e.parentNode),q.collapse(c)),b.setEndPoint(a?"StartToStart":"EndToEnd",q),g.remove(e))}
var b,f,h,i,j,n,k=e.dom.doc,m=k.body;h=a.startContainer;i=a.startOffset;j=a.endContainer;n=a.endOffset;b=m.createTextRange();if(h==j&&(1==h.nodeType&&i==n-1)&&i==n-1)try{f=m.createControlRange();f.addElement(h.childNodes[i]);f.select();return}catch(q){}d(!0);d();b.select()};this.getRangeAt=function(){function a(a){var c=j(d,a),f,e,h=0,g;f=c.node;e=c.offset;if(c.inside&&!f.hasChildNodes())b[a?"setStart":"setEnd"](f,0);else if(void 0===e)b[a?"setStartBefore":"setEndAfter"](f);else{if(0>c.position){c=
c.inside?f.firstChild:f.nextSibling;if(!c){b[a?"setStartAfter":"setEndAfter"](f);return}if(!e){if(3==c.nodeType)b[a?"setStart":"setEnd"](c,0);else b[a?"setStartBefore":"setEndBefore"](c);return}for(;c;){g=c.nodeValue;h+=g.length;if(h>=e){f=c;h-=e;h=g.length-h;break}c=c.nextSibling}}else{c=f.previousSibling;if(!c)return b[a?"setStartBefore":"setEndBefore"](f);if(!e){if(3==f.nodeType)b[a?"setStart":"setEnd"](c,f.nodeValue.length);else b[a?"setStartAfter":"setEndAfter"](c);return}for(;c;){h+=c.nodeValue.length;
if(h>=e){f=c;h-=e;break}c=c.previousSibling}}b[a?"setStart":"setEnd"](f,h)}}var d=e.getRng(),b=g.createRng(),c,h,p,l;c=d.item?d.item(0):d.parentElement();if(c.ownerDocument!=g.doc)return b;h=e.isCollapsed();if(d.item)return b.setStart(c.parentNode,g.nodeIndex(c)),b.setEnd(b.startContainer,b.startOffset+1),b;try{a(!0),h||a()}catch(n){if(-2147024809==n.number)l=i.getBookmark(2),p=d.duplicate(),p.collapse(!0),c=p.parentElement(),h||(p=d.duplicate(),p.collapse(!1),p=p.parentElement(),p.innerHTML=p.innerHTML),
c.innerHTML=c.innerHTML,i.moveToBookmark(l),d=e.getRng(),a(!0),h||a();else throw n;}return b}}})();
(function(){function e(a,b,d,c,f,k){for(var f=0,e=c.length;f<e;f++){var h=c[f];if(h){for(var h=h[a],m=!1;h;){if(h.sizcache===d){m=c[h.sizset];break}1===h.nodeType&&!k&&(h.sizcache=d,h.sizset=f);if(h.nodeName.toLowerCase()===b){m=h;break}h=h[a]}c[f]=m}}}function j(a,d,c,f,k,e){for(var k=0,h=f.length;k<h;k++){var m=f[k];if(m){for(var m=m[a],g=!1;m;){if(m.sizcache===c){g=f[m.sizset];break}if(1===m.nodeType)if(e||(m.sizcache=c,m.sizset=k),"string"!==typeof d){if(m===d){g=!0;break}}else if(0<b.filter(d,
[m]).length){g=m;break}m=m[a]}f[k]=g}}}var i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,g=0,c=Object.prototype.toString,a=!1,d=!0;[0,0].sort(function(){d=!1;return 0});var b=function(a,d,k,e){var k=k||[],m=d=d||document;if(1!==d.nodeType&&9!==d.nodeType)return[];if(!a||"string"!==typeof a)return k;var g=[],o,j,s,p,q=!0,l=b.isXML(d),J=a,E;do if(i.exec(""),o=i.exec(J))if(J=o[3],g.push(o[1]),o[2]){p=o[3];break}while(o);
if(1<g.length&&h.exec(a))if(2===g.length&&f.relative[g[0]])j=r(g[0]+g[1],d);else for(j=f.relative[g[0]]?[d]:b(g.shift(),d);g.length;)a=g.shift(),f.relative[a]&&(a+=g.shift()),j=r(a,j);else if(!e&&(1<g.length&&9===d.nodeType&&!l&&f.match.ID.test(g[0])&&!f.match.ID.test(g[g.length-1]))&&(o=b.find(g.shift(),d,l),d=o.expr?b.filter(o.expr,o.set)[0]:o.set[0]),d){o=e?{expr:g.pop(),set:n(e)}:b.find(g.pop(),1===g.length&&("~"===g[0]||"+"===g[0])&&d.parentNode?d.parentNode:d,l);j=o.expr?b.filter(o.expr,o.set):
o.set;for(0<g.length?s=n(j):q=!1;g.length;)o=E=g.pop(),f.relative[E]?o=g.pop():E="",null==o&&(o=d),f.relative[E](s,o,l)}else s=[];s||(s=j);s||b.error(E||a);if("[object Array]"===c.call(s))if(q)if(d&&1===d.nodeType)for(a=0;null!=s[a];a++)s[a]&&(!0===s[a]||1===s[a].nodeType&&b.contains(d,s[a]))&&k.push(j[a]);else for(a=0;null!=s[a];a++)s[a]&&1===s[a].nodeType&&k.push(j[a]);else k.push.apply(k,s);else n(s,k);p&&(b(p,m,k,e),b.uniqueSort(k));return k};b.uniqueSort=function(b){if(m&&(a=d,b.sort(m),a))for(var c=
1;c<b.length;c++)b[c]===b[c-1]&&b.splice(c--,1);return b};b.matches=function(a,d){return b(a,null,null,d)};b.find=function(a,b,d){var c;if(!a)return[];for(var k=0,e=f.order.length;k<e;k++){var h=f.order[k],m;if(m=f.leftMatch[h].exec(a)){var g=m[1];m.splice(1,1);if("\\"!==g.substr(g.length-1)&&(m[1]=(m[1]||"").replace(/\\/g,""),c=f.find[h](m,b,d),null!=c)){a=a.replace(f.match[h],"");break}}}c||(c=b.getElementsByTagName("*"));return{set:c,expr:a}};b.filter=function(a,d,c,k){for(var e=a,h=[],m=d,g,o,
i=d&&d[0]&&b.isXML(d[0]);a&&d.length;){for(var j in f.filter)if(null!=(g=f.leftMatch[j].exec(a))&&g[2]){var s=f.filter[j],r,p;p=g[1];o=!1;g.splice(1,1);if("\\"!==p.substr(p.length-1)){m===h&&(h=[]);if(f.preFilter[j])if(g=f.preFilter[j](g,m,c,h,k,i)){if(!0===g)continue}else o=r=!0;if(g)for(var q=0;null!=(p=m[q]);q++)if(p){r=s(p,g,q,m);var l=k^!!r;c&&null!=r?l?o=!0:m[q]=!1:l&&(h.push(p),o=!0)}if(void 0!==r){c||(m=h);a=a.replace(f.match[j],"");if(!o)return[];break}}}if(a===e)if(null==o)b.error(a);else break;
e=a}return m};b.error=function(a){throw"Syntax error, unrecognized expression: "+a;};var f=b.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")}},relative:{"+":function(a,d){var c="string"===typeof d,f=c&&!/\W/.test(d),c=c&&!f;f&&(d=d.toLowerCase());for(var f=0,k=a.length,e;f<k;f++)if(e=a[f]){for(;(e=e.previousSibling)&&1!==e.nodeType;);a[f]=c||e&&e.nodeName.toLowerCase()===d?e||!1:e===d}c&&b.filter(d,a,!0)},">":function(a,d){var c="string"===
typeof d,f,k=0,e=a.length;if(c&&!/\W/.test(d))for(d=d.toLowerCase();k<e;k++){if(f=a[k])c=f.parentNode,a[k]=c.nodeName.toLowerCase()===d?c:!1}else{for(;k<e;k++)(f=a[k])&&(a[k]=c?f.parentNode:f.parentNode===d);c&&b.filter(d,a,!0)}},"":function(a,b,d){var c=g++,f=j,k;"string"===typeof b&&!/\W/.test(b)&&(k=b=b.toLowerCase(),f=e);f("parentNode",b,c,a,k,d)},"~":function(a,b,d){var c=g++,f=j,k;"string"===typeof b&&!/\W/.test(b)&&(k=b=b.toLowerCase(),f=e);f("previousSibling",b,c,a,k,d)}},find:{ID:function(a,
b,d){if("undefined"!==typeof b.getElementById&&!d)return(a=b.getElementById(a[1]))?[a]:[]},NAME:function(a,b){if("undefined"!==typeof b.getElementsByName){for(var d=[],c=b.getElementsByName(a[1]),f=0,k=c.length;f<k;f++)c[f].getAttribute("name")===a[1]&&d.push(c[f]);return 0===d.length?null:d}},TAG:function(a,b){return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,d,c,f,k){a=" "+a[1].replace(/\\/g,"")+" ";if(k)return a;for(var k=0,e;null!=(e=b[k]);k++)e&&(f^(e.className&&0<=(" "+e.className+
" ").replace(/[\t\n]/g," ").indexOf(a))?d||c.push(e):d&&(b[k]=!1));return!1},ID:function(a){return a[1].replace(/\\/g,"")},TAG:function(a){return a[1].toLowerCase()},CHILD:function(a){if("nth"===a[1]){var b=/(-?)(\d*)n((?:\+|-)?\d*)/.exec("even"===a[2]&&"2n"||"odd"===a[2]&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0;a[3]=b[3]-0}a[0]=g++;return a},ATTR:function(a,b,d,c,k,e){b=a[1].replace(/\\/g,"");!e&&f.attrMap[b]&&(a[1]=f.attrMap[b]);"~="===a[2]&&(a[4]=" "+a[4]+" ");return a},
PSEUDO:function(a,d,c,k,e){if("not"===a[1])if(1<(i.exec(a[3])||"").length||/^\w/.test(a[3]))a[3]=b(a[3],null,null,d);else return a=b.filter(a[3],d,c,1^e),c||k.push.apply(k,a),!1;else if(f.match.POS.test(a[0])||f.match.CHILD.test(a[0]))return!0;return a},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return!1===a.disabled&&"hidden"!==a.type},disabled:function(a){return!0===a.disabled},checked:function(a){return!0===a.checked},selected:function(a){a.parentNode.selectedIndex;return!0===
a.selected},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,d,c){return!!b(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){return"text"===a.type},radio:function(a){return"radio"===a.type},checkbox:function(a){return"checkbox"===a.type},file:function(a){return"file"===a.type},password:function(a){return"password"===a.type},submit:function(a){return"submit"===a.type},image:function(a){return"image"===a.type},reset:function(a){return"reset"===
a.type},button:function(a){return"button"===a.type||"button"===a.nodeName.toLowerCase()},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)}},setFilters:{first:function(a,b){return 0===b},last:function(a,b,d,c){return b===c.length-1},even:function(a,b){return 0===b%2},odd:function(a,b){return 1===b%2},lt:function(a,b,d){return b<d[3]-0},gt:function(a,b,d){return b>d[3]-0},nth:function(a,b,d){return d[3]-0===b},eq:function(a,b,d){return d[3]-0===b}},filter:{PSEUDO:function(a,
d,c,k){var e=d[1],h=f.filters[e];if(h)return h(a,c,d,k);if("contains"===e)return 0<=(a.textContent||a.innerText||b.getText([a])||"").indexOf(d[3]);if("not"===e){d=d[3];c=0;for(k=d.length;c<k;c++)if(d[c]===a)return!1;return!0}b.error("Syntax error, unrecognized expression: "+e)},CHILD:function(a,b){var d=b[1],c=a;switch(d){case "only":case "first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===d)return!0;c=a;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0;case "nth":var d=
b[2],f=b[3];if(1===d&&0===f)return!0;var k=b[0],e=a.parentNode;if(e&&(e.sizcache!==k||!a.nodeIndex)){for(var h=0,c=e.firstChild;c;c=c.nextSibling)1===c.nodeType&&(c.nodeIndex=++h);e.sizcache=k}c=a.nodeIndex-f;return 0===d?0===c:0===c%d&&0<=c/d}},ID:function(a,b){return 1===a.nodeType&&a.getAttribute("id")===b},TAG:function(a,b){return"*"===b&&1===a.nodeType||a.nodeName.toLowerCase()===b},CLASS:function(a,b){return-1<(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)},ATTR:function(a,b){var d=
b[1],d=f.attrHandle[d]?f.attrHandle[d](a):null!=a[d]?a[d]:a.getAttribute(d),c=d+"",k=b[2],e=b[4];return null==d?"!="===k:"="===k?c===e:"*="===k?0<=c.indexOf(e):"~="===k?0<=(" "+c+" ").indexOf(e):!e?c&&!1!==d:"!="===k?c!==e:"^="===k?0===c.indexOf(e):"$="===k?c.substr(c.length-e.length)===e:"|="===k?c===e||c.substr(0,e.length+1)===e+"-":!1},POS:function(a,b,d,c){var k=f.setFilters[b[2]];if(k)return k(a,d,b,c)}}},h=f.match.POS,p=function(a,b){return"\\"+(b-0+1)},l;for(l in f.match)f.match[l]=RegExp(f.match[l].source+
/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[l]=RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[l].source.replace(/\\(\d+)/g,p));var n=function(a,b){a=Array.prototype.slice.call(a,0);return b?(b.push.apply(b,a),b):a};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(k){n=function(a,b){var d=b||[],f=0;if("[object Array]"===c.call(a))Array.prototype.push.apply(d,a);else if("number"===typeof a.length)for(var k=a.length;f<k;f++)d.push(a[f]);else for(;a[f];f++)d.push(a[f]);
return d}}var m;document.documentElement.compareDocumentPosition?m=function(b,d){if(!b.compareDocumentPosition||!d.compareDocumentPosition)return b==d&&(a=!0),b.compareDocumentPosition?-1:1;var c=b.compareDocumentPosition(d)&4?-1:b===d?0:1;0===c&&(a=!0);return c}:"sourceIndex"in document.documentElement?m=function(b,d){if(!b.sourceIndex||!d.sourceIndex)return b==d&&(a=!0),b.sourceIndex?-1:1;var c=b.sourceIndex-d.sourceIndex;0===c&&(a=!0);return c}:document.createRange&&(m=function(b,d){if(!b.ownerDocument||
!d.ownerDocument)return b==d&&(a=!0),b.ownerDocument?-1:1;var c=b.ownerDocument.createRange(),f=d.ownerDocument.createRange();c.setStart(b,0);c.setEnd(b,0);f.setStart(d,0);f.setEnd(d,0);c=c.compareBoundaryPoints(Range.START_TO_END,f);0===c&&(a=!0);return c});b.getText=function(a){for(var d="",c,f=0;a[f];f++)c=a[f],3===c.nodeType||4===c.nodeType?d+=c.nodeValue:8!==c.nodeType&&(d+=b.getText(c.childNodes));return d};p=document.createElement("div");l="script"+(new Date).getTime();p.innerHTML="<a name='"+
l+"'/>";var q=document.documentElement;q.insertBefore(p,q.firstChild);document.getElementById(l)&&(f.find.ID=function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(b=b.getElementById(a[1]))?b.id===a[1]||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").nodeValue===a[1]?[b]:void 0:[]},f.filter.ID=function(a,b){var d="undefined"!==typeof a.getAttributeNode&&a.getAttributeNode("id");return 1===a.nodeType&&d&&d.nodeValue===b});q.removeChild(p);q=p=null;p=document.createElement("div");
p.appendChild(document.createComment(""));0<p.getElementsByTagName("*").length&&(f.find.TAG=function(a,b){var d=b.getElementsByTagName(a[1]);if(a[1]==="*"){for(var c=[],f=0;d[f];f++)d[f].nodeType===1&&c.push(d[f]);d=c}return d});p.innerHTML="<a href='#'></a>";p.firstChild&&("undefined"!==typeof p.firstChild.getAttribute&&"#"!==p.firstChild.getAttribute("href"))&&(f.attrHandle.href=function(a){return a.getAttribute("href",2)});p=null;if(document.querySelectorAll){var o=b,p=document.createElement("div");
p.innerHTML="<p class='TEST'></p>";if(!(p.querySelectorAll&&0===p.querySelectorAll(".TEST").length)){var b=function(a,d,c,f){d=d||document;if(!f&&d.nodeType===9&&!b.isXML(d))try{return n(d.querySelectorAll(a),c)}catch(k){}return o(a,d,c,f)},s;for(s in o)b[s]=o[s];p=null}}s=document.createElement("div");s.innerHTML="<div class='test e'></div><div class='test'></div>";s.getElementsByClassName&&0!==s.getElementsByClassName("e").length&&(s.lastChild.className="e",1!==s.getElementsByClassName("e").length&&
(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(a,b,d){if(typeof b.getElementsByClassName!=="undefined"&&!d)return b.getElementsByClassName(a[1])},s=null));b.contains=document.compareDocumentPosition?function(a,b){return!!(a.compareDocumentPosition(b)&16)}:function(a,b){return a!==b&&(a.contains?a.contains(b):true)};b.isXML=function(a){return(a=(a?a.ownerDocument||a:0).documentElement)?a.nodeName!=="HTML":false};var r=function(a,d){for(var c=[],k="",e,h=d.nodeType?[d]:d;e=f.match.PSEUDO.exec(a);){k=
k+e[0];a=a.replace(f.match.PSEUDO,"")}a=f.relative[a]?a+"*":a;e=0;for(var m=h.length;e<m;e++)b(a,h[e],c);return b.filter(k,c)};window.tinymce.dom.Sizzle=b})();
(function(e){var j=e.each,i=e.DOM,g=e.isIE,c;e.create("tinymce.dom.EventUtils",{EventUtils:function(){this.inits=[];this.events=[]},add:function(a,d,b,c){var h,p=this,l=p.events,n;if(d instanceof Array)return n=[],j(d,function(d){n.push(p.add(a,d,b,c))}),n;if(a&&a.hasOwnProperty&&a instanceof Array)return n=[],j(a,function(a){a=i.get(a);n.push(p.add(a,d,b,c))}),n;if(a=i.get(a)){h=function(a){if(!p.disabled){if((a=a||window.event)&&g&&!e.isIE11)a.target||(a.target=a.srcElement),e.extend(a,p._stoppers);
return!c?b(a):b.call(c,a)}};if("unload"==d)return e.unloads.unshift({func:h}),h;if("init"==d)return p.domLoaded?h():p.inits.push(h),h;l.push({obj:a,name:d,func:b,cfunc:h,scope:c});p._add(a,d,h);return b}},remove:function(a,d,b){var c=this,e=c.events,g=!1,l;if(a&&a.hasOwnProperty&&a instanceof Array)return l=[],j(a,function(a){a=i.get(a);l.push(c.remove(a,d,b))}),l;a=i.get(a);j(e,function(i,k){if(i.obj==a&&i.name==d&&(!b||i.func==b||i.cfunc==b))return e.splice(k,1),c._remove(a,d,i.cfunc),g=!0,!1});
return g},clear:function(a){var d=this.events,b,c;if(a){a=i.get(a);for(b=d.length-1;0<=b;b--)c=d[b],c.obj===a&&(this._remove(c.obj,c.name,c.cfunc),c.obj=c.cfunc=null,d.splice(b,1))}},cancel:function(a){if(!a)return!1;this.stop(a);return this.prevent(a)},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0;return!1},prevent:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return!1},destroy:function(){var a=this;j(a.events,function(d){a._remove(d.obj,d.name,d.cfunc);
d.obj=d.cfunc=null});a.events=[];a=null},_add:function(a,d,b){a.attachEvent?a.attachEvent("on"+d,b):a.addEventListener?a.addEventListener(d,b,!1):a["on"+d]=b},_remove:function(a,d,b){if(a)try{a.detachEvent?a.detachEvent("on"+d,b):a.removeEventListener?a.removeEventListener(d,b,!1):a["on"+d]=null}catch(c){}},_pageInit:function(){this.domLoaded||(this.domLoaded=!0,j(this.inits,function(a){a()}),this.inits=[])},_wait:function(a){var d=this,b=a.document;a.tinyMCE_GZ&&tinyMCE_GZ.loaded?d.domLoaded=1:"complete"===
b.readyState?d._pageInit(a):(b.attachEvent?(b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&(b.detachEvent("onreadystatechange",arguments.callee),d._pageInit(a))}),b.documentElement.doScroll&&a==a.top&&function(){if(!d.domLoaded){try{b.documentElement.doScroll("left")}catch(c){setTimeout(arguments.callee,0);return}d._pageInit(a)}}()):b.addEventListener&&d._add(a,"DOMContentLoaded",function(){d._pageInit(a)}),d._add(a,"load",function(){d._pageInit(a)}))},_stoppers:{preventDefault:function(){this.returnValue=
!1},stopPropagation:function(){this.cancelBubble=!0}}});c=e.dom.Event=new e.dom.EventUtils;c._wait(window);e.addUnload(function(){c.destroy()})})(tinymce);
(function(e){e.dom.Element=function(j,i){var g=this,c;g.settings=i=i||{};g.id=j;g.dom=c=i.dom||e.DOM;e.isIE||c.get(g.id);e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(a){g[a]=function(){var d=[j],b;for(b=0;b<arguments.length;b++)d.push(arguments[b]);d=c[a].apply(c,d);g.update(a);return d}});e.extend(g,{on:function(a,d,b){return e.dom.Event.add(g.id,
a,d,b)},getXY:function(){return{x:parseInt(g.getStyle("left")),y:parseInt(g.getStyle("top"))}},getSize:function(){var a=c.get(g.id);return{w:parseInt(g.getStyle("width")||a.clientWidth),h:parseInt(g.getStyle("height")||a.clientHeight)}},moveTo:function(a,d){g.setStyles({left:a,top:d})},moveBy:function(a,d){var b=g.getXY();g.moveTo(b.x+a,b.y+d)},resizeTo:function(a,d){g.setStyles({width:a,height:d})},resizeBy:function(a,d){var b=g.getSize();g.resizeTo(b.w+a,b.h+d)},update:function(a){e.isIE6&&i.blocker&&
(a=a||"",0===a.indexOf("get")||(0===a.indexOf("has")||0===a.indexOf("is"))||("remove"==a?c.remove(g.blocker):(g.blocker?a=c.get(g.blocker):(g.blocker=c.uniqueId(),a=c.add(i.container||c.getRoot(),"iframe",{id:g.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),c.setStyle(a,"opacity",0)),c.setStyles(a,{left:g.getStyle("left",1),top:g.getStyle("top",1),width:g.getStyle("width",1),height:g.getStyle("height",1),display:g.getStyle("display",1),zIndex:parseInt(g.getStyle("zIndex",1)||
0)-1}))))}})}})(tinymce);
(function(e){var j=e.is,i=e.isIE,g=e.each;e.create("tinymce.dom.Selection",{Selection:function(c,a,d){var b=this;b.dom=c;b.win=a;b.serializer=d;g(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(a){b[a]=new e.util.Dispatcher(b)});b.win.getSelection||(b.tridentSel=new e.dom.TridentSelection(b));e.isIE&&c.boxModel&&this._fixIESelection();e.addUnload(b.destroy,b)},setCursorLocation:function(c,a){var d=this.dom.createRng();d.setStart(c,a);d.setEnd(c,a);this.setRng(d);
this.collapse(!1)},getContent:function(c){var a=this.getRng(),d=this.dom.create("body"),b=this.getSel(),f,e,c=c||{};f=e="";c.get=!0;c.format=c.format||"html";c.forced_root_block="";this.onBeforeGetContent.dispatch(this,c);if("text"==c.format)return this.isCollapsed()?"":a.text||(b.toString?b.toString():"");a.cloneContents?(a=a.cloneContents())&&d.appendChild(a):j(a.item)||j(a.htmlText)?(d.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),d.removeChild(d.firstChild)):d.innerHTML=a.toString();
/^\s/.test(d.innerHTML)&&(f=" ");/\s+$/.test(d.innerHTML)&&(e=" ");c.getInner=!0;c.content=this.isCollapsed()?"":f+this.serializer.serialize(d,c)+e;this.onGetContent.dispatch(this,c);return c.content},setContent:function(c,a){var d=this.getRng(),b,f=this.win.document,e,a=a||{format:"html"};a.set=!0;a.content=c;a.no_events||this.onBeforeSetContent.dispatch(this,a);c=a.content;if(d.insertNode){c+='<span id="__caret">_</span>';if(d.startContainer==f&&d.endContainer==f)f.body.innerHTML=c;else if(d.deleteContents(),
0==f.body.childNodes.length)f.body.innerHTML=c;else if(d.createContextualFragment)try{d.insertNode(d.createContextualFragment(c))}catch(g){if(0===d.startOffset&&0===d.endOffset&&0===d.startContainer.children.length){b=f.createDocumentFragment();e=f.createElement("div");e.innerHTML=c;e=e.children[0];for(b.appendChild(e.cloneNode());e=e.nextSibling;)b.appendChild(e.cloneNode());d.startContainer.parentNode.insertBefore(b,d.startContainer)}else throw g;}else b=f.createDocumentFragment(),e=f.createElement("div"),
b.appendChild(e),e.outerHTML=c,d.insertNode(b);b=this.dom.get("__caret");d=f.createRange();d.setStartBefore(b);d.setEndBefore(b);this.setRng(d);this.dom.remove("__caret");try{this.setRng(d)}catch(i){}}else(d.item&&(f.execCommand("Delete",!1,null),d=this.getRng()),/^\s+/.test(c))?(d.pasteHTML('<span id="__mce_tmp">_</span>'+c),this.dom.remove("__mce_tmp")):d.pasteHTML(c);a.no_events||this.onSetContent.dispatch(this,a)},getStart:function(){var c=this.getRng(),a,d;if(c.duplicate||c.item){if(c.item)return c.item(0);
a=c.duplicate();a.collapse(1);a=a.parentElement();for(c=d=c.parentElement();d=d.parentNode;)if(d==a){a=c;break}return a}a=c.startContainer;1==a.nodeType&&a.hasChildNodes()&&(a=a.childNodes[Math.min(a.childNodes.length-1,c.startOffset)]);return a&&3==a.nodeType?a.parentNode:a},getEnd:function(){var c=this.getRng(),a;if(c.duplicate||c.item){if(c.item)return c.item(0);c=c.duplicate();c.collapse(0);return(a=c.parentElement())&&"BODY"==a.nodeName?a.lastChild||a:a}a=c.endContainer;c=c.endOffset;1==a.nodeType&&
a.hasChildNodes()&&(a=a.childNodes[0<c?c-1:c]);return a&&3==a.nodeType?a.parentNode:a},getBookmark:function(c,a){function d(a,b){var d=0;g(f.select(a),function(a,c){a==b&&(d=c)});return d}var b=this,f=b.dom,e,i,j,n,k;if(2==c){if(b.tridentSel)return b.tridentSel.getBookmark(c);e=function(d,c){var f=d[c?"startContainer":"endContainer"],k=d[c?"startOffset":"endOffset"],e=[],h,g=0;if(3==f.nodeType){if(a)for(h=f.previousSibling;h&&3==h.nodeType;h=h.previousSibling)k+=h.nodeValue.length;e.push(k)}else h=
f.childNodes,k>=h.length&&h.length&&(g=1,k=Math.max(0,h.length-1)),e.push(b.dom.nodeIndex(h[k],a)+g);for(;f&&f!=m;f=f.parentNode)e.push(b.dom.nodeIndex(f,a));return e};j=b.getRng(!0);var m=f.doc.body;n={};n.start=e(j,!0);b.isCollapsed()||(n.end=e(j));return n}if(c)return{rng:b.getRng()};e=b.getRng();j=f.uniqueId();n=tinyMCE.activeEditor.selection.isCollapsed();if(e.duplicate||e.item){if(e.item)return k=e.item(0),i=k.nodeName,{name:i,index:d(i,k)};i=e.duplicate();try{e.collapse(),e.pasteHTML('<span data-mce-type="bookmark" id="'+
j+'_start" style="overflow:hidden;line-height:0px">﻿</span>'),n||(i.collapse(!1),e.moveToElementText(i.parentElement()),0==e.compareEndPoints("StartToEnd",i)&&i.move("character",-1),i.pasteHTML('<span data-mce-type="bookmark" id="'+j+'_end" style="overflow:hidden;line-height:0px">﻿</span>'))}catch(q){return null}}else{k=b.getNode();i=k.nodeName;if("IMG"==i)return{name:i,index:d(i,k)};i=e.cloneRange();n||(i.collapse(!1),i.insertNode(f.create("span",{"data-mce-type":"bookmark",id:j+"_end",style:"overflow:hidden;line-height:0px"},
"﻿")));e.collapse(!0);e.insertNode(f.create("span",{"data-mce-type":"bookmark",id:j+"_start",style:"overflow:hidden;line-height:0px"},"﻿"))}b.moveToBookmark({id:j,keep:1});return{id:j}},moveToBookmark:function(c){var a=this.dom,d,b,f,h,j,l;if(c)if(c.start){d=a.createRng();b=a.doc.body;var n=function(a){var f=c[a?"start":"end"],k,e,h;if(f){h=f[0];e=b;for(k=f.length-1;1<=k;k--){e=e.childNodes;if(f[k]>e.length-1)return;e=e[f[k]]}3===e.nodeType&&(h=Math.min(f[0],e.nodeValue.length));1===e.nodeType&&(h=
Math.min(f[0],e.childNodes.length));a?d.setStart(e,h):d.setEnd(e,h)}return!0};if(this.tridentSel)return this.tridentSel.moveToBookmark(c);n(!0)&&n()&&this.setRng(d)}else if(c.id){var n=function(b){var d=a.get(c.id+"_"+b),k,i,r;r=c.keep;if(d&&(k=d.parentNode,"start"==b?(r?(k=d.firstChild,i=1):i=a.nodeIndex(d),f=h=k,j=l=i):(r?(k=d.firstChild,i=1):i=a.nodeIndex(d),h=k,l=i),!r)){r=d.previousSibling;k=d.nextSibling;for(g(e.grep(d.childNodes),function(a){if(a.nodeType==3)a.nodeValue=a.nodeValue.replace(/\uFEFF/g,
"")});d=a.get(c.id+"_"+b);)a.remove(d,1);r&&(k&&r.nodeType==k.nodeType&&3==r.nodeType&&!e.isOpera)&&(i=r.nodeValue.length,r.appendData(k.nodeValue),a.remove(k),"start"==b?(f=h=r,j=l=i):(h=r,l=i))}},k=function(b){a.isBlock(b)&&!b.innerHTML&&(b.innerHTML=!i?'<br data-mce-bogus="1" />':" ");return b};n("start");n("end");f&&(d=a.createRng(),d.setStart(k(f),j),d.setEnd(k(h),l),this.setRng(d))}else c.name?this.select(a.select(c.name)[c.index]):c.rng&&this.setRng(c.rng)},select:function(c,a){var d=this.dom,
b=d.createRng();c&&(d=d.nodeIndex(c),b.setStart(c.parentNode,d),b.setEnd(c.parentNode,d+1),a&&(d=function(a,d){var c=new e.dom.TreeWalker(a,a);do{if(3==a.nodeType&&0!=e.trim(a.nodeValue).length){d?b.setStart(a,0):b.setEnd(a,a.nodeValue.length);break}if("BR"==a.nodeName){d?b.setStartBefore(a):b.setEndBefore(a);break}}while(a=d?c.next():c.prev())},d(c,1),d(c)),this.setRng(b));return c},isCollapsed:function(){var c=this.getRng(),a=this.getSel();return!c||c.item?!1:c.compareEndPoints?0===c.compareEndPoints("StartToEnd",
c):!a||c.collapsed},collapse:function(c){var a=this.getRng(),d;a.item&&(d=a.item(0),a=this.win.document.body.createTextRange(),a.moveToElementText(d));a.collapse(!!c);this.setRng(a)},getSel:function(){var c=this.win;return c.getSelection?c.getSelection():c.document.selection},getRng:function(c){var a,d,b,f=this.win.document;if(c&&this.tridentSel)return this.tridentSel.getRangeAt(0);try{if(a=this.getSel())d=0<a.rangeCount?a.getRangeAt(0):a.createRange?a.createRange():f.createRange()}catch(h){}try{e.isIE&&
(d&&d.setStart&&f.selection&&f.selection.createRange().item)&&(b=f.selection.createRange().item(0),d=f.createRange(),d.setStartBefore(b),d.setEndAfter(b))}catch(g){}d||(d=f.createRange?f.createRange():f.body.createTextRange());this.selectedRange&&this.explicitRange&&(0===d.compareBoundaryPoints(d.START_TO_START,this.selectedRange)&&0===d.compareBoundaryPoints(d.END_TO_END,this.selectedRange)?d=this.explicitRange:this.explicitRange=this.selectedRange=null);return d},setRng:function(c){var a;if(this.tridentSel){if(c.cloneRange)try{this.tridentSel.addRange(c);
return}catch(d){AJS.logError("Exception occurred at tinymce setRng() - tridentSel.addRange(): "+d)}try{c.select()}catch(b){AJS.logError("Exception occurred at tinymce setRng() - select(): "+b)}}else if(a=this.getSel()){this.explicitRange=c;try{a.removeAllRanges()}catch(f){AJS.logError("Exception occurred at tinymce setRng() - removeAllRanges(): "+f)}try{a.addRange(c)}catch(e){AJS.logError("Exception occurred at tinymce setRng() - addRange(): "+e)}this.selectedRange=0<a.rangeCount?a.getRangeAt(0):
null}},setNode:function(c){this.setContent(this.dom.getOuterHTML(c));return c},getNode:function(){var c=this.getRng();this.getSel();var a,d=c.startContainer,b=c.endContainer;if(!c)return this.dom.getRoot();if(c.setStart){a=c.commonAncestorContainer;if(!c.collapsed&&(c.startContainer==c.endContainer&&2>c.endOffset-c.startOffset&&c.startContainer.hasChildNodes()&&(a=c.startContainer.childNodes[c.startOffset]),3===d.nodeType&&3===b.nodeType)){var f=function(a,b){for(var d=a;a&&3===a.nodeType&&0===a.length;)a=
b?a.nextSibling:a.previousSibling;return a||d},d=d.length===c.startOffset?f(d.nextSibling,!0):d.parentNode,b=0===c.endOffset?f(b.previousSibling,!1):b.parentNode;if(d&&d===b)return d}return a&&3==a.nodeType?a.parentNode:a}return c.item?c.item(0):c.parentElement()},getSelectedBlocks:function(c,a){var d=this.dom,b,f,h,g=[];b=d.getParent(c||this.getStart(),d.isBlock);f=d.getParent(a||this.getEnd(),d.isBlock);b&&g.push(b);if(b&&f&&b!=f){h=b;for(var i=new e.dom.TreeWalker(b,d.getRoot());(h=i.next())&&
h!=f;)d.isBlock(h)&&g.push(h)}f&&b!=f&&g.push(f);return g},normalize:function(){function c(c){var h,g,i,j=a.dom;i=j.getRoot();var k;h=d[(c?"start":"end")+"Container"];g=d[(c?"start":"end")+"Offset"];9===h.nodeType&&(h=h.body,g=0);if(h===i&&h.hasChildNodes()){h=h.childNodes[Math.min(!c&&0<g?g-1:g,h.childNodes.length-1)];g=0;if("TABLE"===h.nodeName)return;if(h.hasChildNodes()){k=h;i=new e.dom.TreeWalker(h,i);do{if(3===k.nodeType){g=c?0:k.nodeValue.length-1;h=k;b=!0;break}if(/^(BR|IMG)$/.test(k.nodeName)){g=
j.nodeIndex(k);h=k.parentNode;"IMG"==k.nodeName&&!c&&g++;b=!0;break}}while(k=c?i.next():i.prev())}}if(b)d["set"+(c?"Start":"End")](h,g)}var a=this,d,b;e.isIE||(d=a.getRng(),c(!0),d.collapsed&&b&&c(),b&&a.setRng(d))},destroy:function(c){this.win=null;c||e.removeUnload(this.destroy)},_fixIESelection:function(){function c(a,b){var d=e.createTextRange();try{d.moveToPoint(a,b)}catch(c){d=null}return d}function a(a){if(a.button){if(a=c(a.x,a.y))0<a.compareEndPoints("StartToStart",i)?a.setEndPoint("StartToStart",
i):a.setEndPoint("EndToEnd",i),a.select()}else d()}function d(){var c=f.selection?f.selection.createRange():tinyMCE.activeEditor.getBody().createTextRange();i&&(!c.item&&0===c.compareEndPoints("StartToEnd",c))&&i.select();b.unbind(f,"mouseup",d);b.unbind(f,"mousemove",a);i=g=0}var b=this.dom,f=b.doc,e=f.body,g,i,j;f.documentElement.unselectable=!0;b.bind(f,["mousedown","contextmenu"],function(k){if("HTML"===k.target.nodeName&&(g&&d(),j=f.documentElement,!(j.scrollHeight>j.clientHeight)&&(g=1,i=c(k.x,
k.y))))b.bind(f,"mouseup",d),b.bind(f,"mousemove",a),b.win.focus(),i.select()})}})})(tinymce);
(function(e){e.dom.Serializer=function(j,i,g){var c,a,d=e.each,b;j.apply_source_formatting||(j.indent=!1);i=i||e.DOM;g=g||new e.html.Schema(j);j.entity_encoding=j.entity_encoding||"named";j.remove_trailing_brs="remove_trailing_brs"in j?j.remove_trailing_brs:!0;c=new e.util.Dispatcher(self);a=new e.util.Dispatcher(self);b=new e.html.DomParser(j,g);b.addAttributeFilter("src,href,style",function(a,b){for(var d=a.length,c,e,k="data-mce-"+b,g=j.url_converter,q=j.url_converter_scope;d--;){c=a[d];e=c.attributes.map[k];
if(e!==void 0){c.attr(b,e.length>0?e:null);c.attr(k,null)}else{e=c.attributes.map[b];b==="style"?e=i.serializeStyle(i.parseStyle(e),c.name):g&&(e=g.call(q,e,b,c.name));c.attr(b,e.length>0?e:null)}}});b.addAttributeFilter("class",function(a){for(var b=a.length,d,c;b--;){d=a[b];c=d.attr("class").replace(/\s*mce(Item\w+|Selected)\s*/g,"");d.attr("class",c.length>0?c:null)}});b.addAttributeFilter("data-mce-type",function(a,b,d){for(var b=a.length,c;b--;){c=a[b];c.attributes.map["data-mce-type"]==="bookmark"&&
!d.cleanup&&c.remove()}});b.addNodeFilter("script,style",function(a,b){function d(a){return a.replace(/(<\!--\[CDATA\[|\]\]--\>)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<\!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<\!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<\!--|\/\*\s*<\!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(--\>)?|\s*\/\/\s*\]\]>(--\>)?|\/\/\s*(--\>)?|\]\]>|\/\*\s*--\>\s*\*\/|\s*--\>\s*)\s*$/g,"")}for(var c=a.length,e,k;c--;){e=a[c];k=e.firstChild?e.firstChild.value:
"";if(b==="script"){e.attr("type",(e.attr("type")||"text/javascript").replace(/^mce\-/,""));if(k.length>0)e.firstChild.value="// <![CDATA[\n"+d(k)+"\n// ]]\>"}else if(k.length>0)e.firstChild.value="<\!--\n"+d(k)+"\n--\>"}});b.addNodeFilter("#comment",function(a){for(var b=a.length,d;b--;){d=a[b];if(d.value.indexOf("[CDATA[")===0){d.name="#cdata";d.type=4;d.value=d.value.replace(/^\[CDATA\[|\]\]$/g,"")}else if(d.value.indexOf("mce:protected ")===0){d.name="#text";d.type=3;d.raw=true;d.value=unescape(d.value).substr(14)}}});
b.addNodeFilter("xml:namespace,input",function(a,b){for(var d=a.length,c;d--;){c=a[d];c.type===7?c.remove():c.type===1&&b==="input"&&!("type"in c.attributes.map)&&c.attr("type","text")}});j.fix_list_elements&&b.addNodeFilter("ul,ol",function(a){for(var b=a.length,d,c;b--;){d=a[b];c=d.parent;(c.name==="ul"||c.name==="ol")&&d.prev&&d.prev.name==="li"&&d.prev.append(d)}});b.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(a,b){for(var d=a.length;d--;)a[d].attr(b,null)});return{schema:g,
addNodeFilter:b.addNodeFilter,addAttributeFilter:b.addAttributeFilter,onPreProcess:c,onPostProcess:a,serialize:function(f,h){var p,l,n,f=f.cloneNode(true);p=f.ownerDocument.implementation;if(p.createHTMLDocument){l=p.createHTMLDocument("");d(f.nodeName=="BODY"?f.childNodes:[f],function(a){l.body.appendChild(l.importNode(a,true))});f=f.nodeName!="BODY"?l.body.firstChild:l.body;n=i.doc;i.doc=l}h=h||{};h.format=h.format||"html";if(!h.no_events){h.node=f;c.dispatch(self,h)}p=new e.html.Serializer(j,g);
h.content=p.serialize(b.parse(h.getInner?f.innerHTML:e.trim(i.getOuterHTML(f),h),h));if(!h.cleanup)h.content=h.content.replace(/\uFEFF|\u200B/g,"");h.no_events||a.dispatch(self,h);if(n)i.doc=n;h.node=null;return h.content},addRules:function(a){g.addValidElements(a)},setRules:function(a){g.setValidElements(a)}}}})(tinymce);
(function(e){e.dom.ScriptLoader=function(){var j={},i=[],g={},c=[],a=0;this.isDone=function(a){return 2==j[a]};this.markDone=function(a){j[a]=2};this.add=this.load=function(a,b,c){void 0==j[a]&&(i.push(a),j[a]=0);b&&(g[a]||(g[a]=[]),g[a].push({func:b,scope:c||this}))};this.loadQueue=function(a,b){this.loadScripts(i,a,b)};this.loadScripts=function(d,b,f){function h(a){e.each(g[a],function(a){a.func.call(a.scope)});g[a]=void 0}var i;c.push({func:b,scope:f||this});i=function(){var b=e.grep(d);d.length=
0;e.each(b,function(b){if(2==j[b])h(b);else if(1!=j[b]){j[b]=1;a++;a:{var d=function(){f.remove(l);g&&(g.onreadystatechange=g.onload=g=null);j[b]=2;a--;h(b);i()},c=function(){AJS.log("Failed to load: "+b)},f=e.DOM,g,s,r,l;l=f.uniqueId();if(e.isIE6&&(s=new e.util.URI(b),r=location,s.host==r.hostname&&s.port==r.port&&s.protocol+":"==r.protocol&&"file"!=s.protocol.toLowerCase())){e.util.XHR.send({url:e._addVer(s.getURI()),success:function(a){var b=f.create("script",{type:"text/javascript"});b.text=a;
document.getElementsByTagName("head")[0].appendChild(b);f.remove(b);d()},error:c});break a}g=f.create("script",{id:l,type:"text/javascript",src:e._addVer(b)});e.isIE||(g.onload=d);g.onerror=c;e.isOpera||(g.onreadystatechange=function(){var a=g.readyState;(a=="complete"||a=="loaded")&&d()});(document.getElementsByTagName("head")[0]||document.body).appendChild(g)}}});a||(e.each(c,function(a){a.func.call(a.scope)}),c.length=0)};i()}};e.ScriptLoader=new e.dom.ScriptLoader})(tinymce);
tinymce.dom.TreeWalker=function(e,j){function i(c,a,d,b){if(c){if(!b&&c[a])return c[a];if(c!=j){if(a=c[d])return a;for(c=c.parentNode;c&&c!=j;c=c.parentNode)if(a=c[d])return a}}}var g=e;this.current=function(){return g};this.next=function(c){return g=i(g,"firstChild","nextSibling",c)};this.prev=function(c){return g=i(g,"lastChild","previousSibling",c)}};
(function(e){e.dom.RangeUtils=function(j){this.walk=function(i,g){function c(a){var b;b=a[0];3===b.nodeType&&(b===f&&h>=b.nodeValue.length)&&a.splice(0,1);b=a[a.length-1];0===l&&(0<a.length&&b===p&&3===b.nodeType)&&a.splice(a.length-1,1);return a}function a(a,b,d){for(var c=[];a&&a!=d;a=a[b])c.push(a);return c}function d(a,b){do{if(a.parentNode==b)return a;a=a.parentNode}while(a)}function b(b,d,k){var f=k?"nextSibling":"previousSibling";m=b;for(q=m.parentNode;m&&m!=d;m=q)q=m.parentNode,o=a(m==b?m:
m[f],f),o.length&&(k||o.reverse(),g(c(o)))}var f=i.startContainer,h=i.startOffset,p=i.endContainer,l=i.endOffset,n,k,m,q,o;k=j.select("td.mceSelected,th.mceSelected");if(0<k.length)e.each(k,function(a){g([a])});else{1==f.nodeType&&f.hasChildNodes()&&(f=f.childNodes[h]);1==p.nodeType&&p.hasChildNodes()&&(p=p.childNodes[Math.min(l-1,p.childNodes.length-1)]);if(f==p)return g(c([f]));n=j.findCommonAncestor(f,p);for(m=f;m;m=m.parentNode){if(m===p)return b(f,n,!0);if(m===n)break}for(m=p;m;m=m.parentNode){if(m===
f)return b(p,n);if(m===n)break}k=d(f,n)||f;n=d(p,n)||p;b(f,k,!0);o=a(k==f?k:k.nextSibling,"nextSibling",n==p?n.nextSibling:n);o.length&&g(c(o));b(p,n)}};this.split=function(e){var g=e.startContainer,c=e.startOffset,a=e.endContainer,e=e.endOffset;if(g==a&&3==g.nodeType)0<c&&c<g.nodeValue.length&&(a=g.splitText(c),g=a.previousSibling,e>c?(g=a=a.splitText(e-c).previousSibling,e=a.nodeValue.length,c=0):e=0);else if(3==g.nodeType&&(0<c&&c<g.nodeValue.length)&&(g=g.splitText(c),c=0),3==a.nodeType&&0<e&&
e<a.nodeValue.length)a=a.splitText(e).previousSibling,e=a.nodeValue.length;return{startContainer:g,startOffset:c,endContainer:a,endOffset:e}}};e.dom.RangeUtils.compareRanges=function(e,i){if(e&&i)if(e.item||e.duplicate){if(e.item&&i.item&&e.item(0)===i.item(0)||e.isEqual&&i.isEqual&&i.isEqual(e))return!0}else return e.startContainer==i.startContainer&&e.startOffset==i.startOffset;return!1}})(tinymce);
(function(e){var j=e.dom.Event,i=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(g,c){var a=this,d=g.root,b=g.items,f=g.enableUpDown,h=g.enableLeftRight||!g.enableUpDown,p=g.excludeFromTabOrder,l,n,k,m,q,c=c||e.DOM;l=function(a){q=a.target.id};n=function(a){c.setAttrib(a.target.id,"tabindex","-1")};m=function(){var a=c.get(q);c.setAttrib(a,"tabindex","0");a.focus()};a.focus=function(){c.get(q).focus()};a.destroy=function(){i(b,function(a){c.unbind(c.get(a.id),"focus",
l);c.unbind(c.get(a.id),"blur",n)});c.unbind(c.get(d),"focus",m);c.unbind(c.get(d),"keydown",k);b=c=d=a.focus=l=n=k=m=null;a.destroy=function(){}};a.moveFocus=function(a,d){var k=-1,f;if(q){i(b,function(a,b){if(a.id===q)return k=b,!1});k+=a;0>k?k=b.length-1:k>=b.length&&(k=0);f=b[k];c.setAttrib(q,"tabindex","-1");c.setAttrib(f.id,"tabindex","0");c.get(f.id).focus();if(g.actOnFocus)g.onAction(f.id);d&&j.cancel(d)}};k=function(b){switch(b.keyCode){case 37:h&&a.moveFocus(-1);break;case 39:h&&a.moveFocus(1);
break;case 38:f&&a.moveFocus(-1);break;case 40:f&&a.moveFocus(1);break;case 27:g.onCancel&&(g.onCancel(),j.cancel(b));break;case 14:case 13:case 32:g.onAction&&(g.onAction(q),j.cancel(b))}};i(b,function(a,b){var d;a.id||(a.id=c.uniqueId("_mce_item_"));p?(c.bind(a.id,"blur",n),d="-1"):d=0===b?"0":"-1";c.setAttrib(a.id,"tabindex",d);c.bind(c.get(a.id),"focus",l)});b[0]&&(q=b[0].id);c.setAttrib(d,"tabindex","-1");c.bind(c.get(d),"focus",m);c.bind(c.get(d),"keydown",k)}})})(tinymce);
(function(e){var j=e.DOM,i=e.is;e.create("tinymce.ui.Control",{Control:function(g,c,a){this.id=g;this.settings=c=c||{};this.rendered=!1;this.onRender=new e.util.Dispatcher(this);this.classPrefix="";this.scope=c.scope||this;this.active=this.disabled=0;this.editor=a},setAriaProperty:function(e,c){var a=j.get(this.id+"_aria")||j.get(this.id);a&&j.setAttrib(a,"aria-"+e,!!c)},focus:function(){j.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",
e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,c){var a=j.get(this.id),e=this.classPrefix+e;c?j.addClass(a,e):j.removeClass(a,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){j.setHTML(e,this.renderHTML())},postRender:function(){var e;i(this.disabled)&&
(e=this.disabled,this.disabled=-1,this.setDisabled(e));i(this.active)&&(e=this.active,this.active=-1,this.setActive(e))},remove:function(){j.remove(this.id);this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})})(tinymce);tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,j,i){this.parent(e,j,i);this.controls=[];this.lookup={}},add:function(e){this.lookup[e.id]=e;this.controls.push(e);return e},get:function(e){return this.lookup[e]}});
tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,j){this.parent(e,j);this.classPrefix="mceSeparator";this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}});
(function(e){var j=e.is;e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,g){this.parent(e,g);this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e);this.setAriaProperty("checked",!!e);this.selected=e},isSelected:function(){return this.selected},postRender:function(){this.parent();j(this.selected)&&this.setSelected(this.selected)}})})(tinymce);
(function(e){var j=e.DOM,i=e.walk;e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(g,c){this.parent(g,c);this.items={};this.collapsed=!1;this.menuCount=0;this.onAddItem=new e.util.Dispatcher(this)},expand:function(e){e&&i(this,function(c){c.expand&&c.expand()},"items",this);this.collapsed=!1},collapse:function(e){e&&i(this,function(c){c.collapse&&c.collapse()},"items",this);this.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(g){g.settings||(g=new e.ui.MenuItem(g.id||
j.uniqueId(),g));this.onAddItem.dispatch(this,g);return this.items[g.id]=g},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){e.collapse||(e=this.createMenu(e));this.menuCount++;return this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){i(this,function(e){e.removeAll?e.removeAll():e.remove();e.destroy()},"items",this);this.items={}},createMenu:function(g){g=new e.ui.Menu(g.id||j.uniqueId(),g);g.onAddItem.add(this.onAddItem.dispatch,
this.onAddItem);return g}})})(tinymce);
(function(e){var j=e.is,i=e.DOM,g=e.each,c=e.dom.Event,a=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(a,b){b=b||{};b.container=b.container||i.doc.body;b.offset_x=b.offset_x||0;b.offset_y=b.offset_y||0;b.vp_offset_x=b.vp_offset_x||0;b.vp_offset_y=b.vp_offset_y||0;j(b.icons)&&!b.icons&&(b["class"]+=" mceNoIcons");this.parent(a,b);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.classPrefix="mceMenu"},createMenu:function(a){var b=
this.settings;a.container=a.container||b.container;a.parent=this;a.constrain=a.constrain||b.constrain;a["class"]=a["class"]||b["class"];a.vp_offset_x=a.vp_offset_x||b.vp_offset_x;a.vp_offset_y=a.vp_offset_y||b.vp_offset_y;a.keyboard_focus=b.keyboard_focus;a=new e.ui.DropMenu(a.id||i.uniqueId(),a);a.onAddItem.add(this.onAddItem.dispatch,this.onAddItem);return a},focus:function(){this.keyboardNav&&this.keyboardNav.focus()},update:function(){var a=this.settings,b=i.get("menu_"+this.id+"_tbl"),c=i.get("menu_"+
this.id+"_co"),e,g;e=a.max_width?Math.min(b.clientWidth,a.max_width):b.clientWidth;g=a.max_height?Math.min(b.clientHeight,a.max_height):b.clientHeight;i.boxModel?this.element.setStyles({width:e,height:g}):this.element.setStyles({width:e+2,height:g+2});a.max_width&&i.setStyle(c,"width",e);a.max_height&&(i.setStyle(c,"height",g),b.clientHeight<a.max_height&&i.setStyle(c,"overflow","hidden"))},showMenu:function(d,b,f){var h=this,j=h.settings,l,n=i.getViewPort(),k,m,q,o,s=h.classPrefix;h.collapse(1);
h.isMenuVisible||(h.rendered?l=i.get("menu_"+h.id):(l=i.add(h.settings.container,h.renderNode()),g(h.items,function(a){a.postRender()}),h.element=new a("menu_"+h.id,{blocker:1,container:j.container})),e.isOpera||i.setStyles(l,{left:-65535,top:-65535}),i.show(l),h.update(),d+=j.offset_x||0,b+=j.offset_y||0,n.w-=4,n.h-=4,j.constrain&&(k=l.clientWidth-2,m=l.clientHeight-2,q=n.x+n.w,n=n.y+n.h,d+j.vp_offset_x+k>q&&(d=f?f-k:Math.max(0,q-j.vp_offset_x-k)),b+j.vp_offset_y+m>n&&(b=Math.max(0,n-j.vp_offset_y-
m))),i.setStyles(l,{left:d,top:b}),h.element.update(),h.isMenuVisible=1,h.mouseClickFunc=c.add(l,"click",function(a){var b;if((a=a.target)&&(a=i.getParent(a,"tr"))&&!i.hasClass(a,s+"ItemSub")){b=h.items[a.id];if(!b.isDisabled()){for(o=h;o;){o.hideMenu&&o.hideMenu();o=o.settings.parent}if(b.settings.onclick)b.settings.onclick(a);return c.cancel(a)}}}),h.hasMenus()&&(h.mouseOverFunc=c.add(l,"mouseover",function(a){var b;if((a=a.target)&&(a=i.getParent(a,"tr"))){b=h.items[a.id];h.lastMenu&&h.lastMenu.collapse(1);
if(!b.isDisabled()&&a&&i.hasClass(a,s+"ItemSub")){a=i.getRect(a);b.showMenu(a.x+a.w-2,a.y-2,a.x);h.lastMenu=b;i.addClass(i.get(b.id).firstChild,s+"ItemActive")}}})),c.add(l,"keydown",h._keyHandler,h),h.onShowMenu.dispatch(h),j.keyboard_focus&&h._setupKeyboardNav())},hideMenu:function(a){var b=i.get("menu_"+this.id),e;this.isMenuVisible&&(this.keyboardNav&&this.keyboardNav.destroy(),c.remove(b,"mouseover",this.mouseOverFunc),c.remove(b,"click",this.mouseClickFunc),c.remove(b,"keydown",this._keyHandler),
i.hide(b),this.isMenuVisible=0,a||this.collapse(1),this.element&&this.element.hide(),(e=i.get(this.id))&&i.removeClass(e.firstChild,this.classPrefix+"ItemActive"),this.onHideMenu.dispatch(this))},add:function(a){var b,a=this.parent(a);this.isRendered&&(b=i.get("menu_"+this.id))&&this._add(i.select("tbody",b)[0],a);return a},collapse:function(a){this.parent(a);this.hideMenu(1)},remove:function(a){i.remove(a.id);this.destroy();return this.parent(a)},destroy:function(){var a=i.get("menu_"+this.id);this.keyboardNav&&
this.keyboardNav.destroy();c.remove(a,"mouseover",this.mouseOverFunc);c.remove(i.select("a",a),"focus",this.mouseOverFunc);c.remove(a,"click",this.mouseClickFunc);c.remove(a,"keydown",this._keyHandler);this.element&&this.element.remove();i.remove(a)},renderNode:function(){var d=this,b=d.settings,c,e,j;j=i.create("div",{role:"listbox",id:"menu_"+d.id,"class":b["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"});d.settings.parent&&i.setAttrib(j,"aria-parent","menu_"+d.settings.parent.id);
e=i.add(j,"div",{role:"presentation",id:"menu_"+d.id+"_co","class":d.classPrefix+(b["class"]?" "+b["class"]:"")});d.element=new a("menu_"+d.id,{blocker:1,container:b.container});b.menu_line&&i.add(e,"span",{"class":d.classPrefix+"Line"});b=i.add(e,"table",{role:"presentation",id:"menu_"+d.id+"_tbl",border:0,cellPadding:0,cellSpacing:0});c=i.add(b,"tbody");g(d.items,function(a){d._add(c,a)});d.rendered=!0;return j},_setupKeyboardNav:function(){var a,b,c=this;a=i.get("menu_"+c.id);b=i.select("a[role=option]",
"menu_"+c.id);b.splice(0,0,a);c.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+c.id,items:b,onCancel:function(){c.hideMenu()},enableUpDown:!0});a.focus()},_keyHandler:function(a){switch(a.keyCode){case 37:this.settings.parent&&(this.hideMenu(),this.settings.parent.focus(),c.cancel(a));break;case 39:this.mouseOverFunc&&this.mouseOverFunc(a)}},_add:function(a,b){var c,e=b.settings,g,j,n,k=this.classPrefix;e.separator?(j=i.add(a,"tr",{id:b.id,"class":k+"ItemSeparator"}),i.add(j,"td",{"class":k+
"ItemSeparator"}),(c=j.previousSibling)&&i.addClass(c,"mceLast")):(c=j=i.add(a,"tr",{id:b.id,"class":k+"Item "+k+"ItemEnabled"}),c=n=i.add(c,e.titleItem?"th":"td"),c=g=i.add(c,"a",{id:b.id+"_aria",role:e.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),e.parent&&(i.setAttrib(g,"aria-haspopup","true"),i.setAttrib(g,"aria-owns","menu_"+b.id)),i.addClass(n,e["class"]),g=i.add(c,"span",{"class":"mceIcon"+(e.icon?" mce_"+e.icon:"")}),e.icon_src&&
i.add(g,"img",{src:e.icon_src}),c=i.add(c,e.element||"span",{"class":"mceText",title:b.settings.title},b.settings.title),b.settings.style&&i.setAttrib(c,"style",b.settings.style),1==a.childNodes.length&&i.addClass(j,"mceFirst"),(c=j.previousSibling)&&i.hasClass(c,k+"ItemSeparator")&&i.addClass(j,"mceFirst"),b.collapse&&i.addClass(j,k+"ItemSub"),(c=j.previousSibling)&&i.removeClass(c,"mceLast"),i.addClass(j,"mceLast"))}})})(tinymce);
(function(e){var j=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,g,c){this.parent(e,g,c);this.classPrefix="mceButton"},renderHTML:function(){var e=this.classPrefix,g=this.settings,c,a;a=j.encode(g.label||"");c='<a role="button" id="'+this.id+'" href="javascript:;" class="'+e+" "+e+"Enabled "+g["class"]+(a?" "+e+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+j.encode(g.title)+'">';c=g.image&&(!this.editor||
!this.editor.forcedHighContrastMode)?c+('<img class="mceIcon" src="'+g.image+'" alt="'+j.encode(g.title)+'" />'+a):c+('<span class="mceIcon '+g["class"]+'"></span>'+(a?'<span class="'+e+'Label">'+a+"</span>":""));c+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+g.title+"</span>";return c+"</a>"},postRender:function(){var j=this,g=j.settings,c;e.isIE&&j.editor&&e.dom.Event.add(j.id,"mousedown",function(){c="IMG"===j.editor.selection.getNode().nodeName?j.editor.selection.getBookmark():
null});e.dom.Event.add(j.id,"click",function(a){if(!j.isDisabled())return e.isIE&&(j.editor&&null!==c)&&j.editor.selection.moveToBookmark(c),g.onclick.call(g.scope,a)});e.dom.Event.add(j.id,"keyup",function(a){if(!j.isDisabled()&&a.keyCode==e.VK.SPACEBAR)return g.onclick.call(g.scope,a)})}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event,g=e.each,c=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(a,d,b){this.parent(a,d,b);this.items=[];this.onChange=new c(this);this.onPostRender=new c(this);this.onAdd=new c(this);this.onRenderMenu=new e.util.Dispatcher(this);this.classPrefix="mceListBox"},select:function(a){var d=this,b,c;if(void 0==a)return d.selectByIndex(-1);c=a&&"function"==typeof a?a:function(b){return b==a};a!=d.selectedValue&&(g(d.items,function(a,e){if(c(a.value))return b=
1,d.selectByIndex(e),!1}),b||d.selectByIndex(-1))},selectByIndex:function(a){var d,b,c;a!=this.selectedIndex&&(d=j.get(this.id+"_text"),c=j.get(this.id+"_voiceDesc"),(b=this.items[a])?(this.selectedValue=b.value,this.selectedIndex=a,j.setHTML(d,j.encode(b.title)),j.setHTML(c,this.settings.title+" - "+b.title),j.removeClass(d,"mceTitle"),j.setAttrib(this.id,"aria-valuenow",b.title)):(j.setHTML(d,j.encode(this.settings.title)),j.setHTML(c,j.encode(this.settings.title)),j.addClass(d,"mceTitle"),this.selectedValue=
this.selectedIndex=null,j.setAttrib(this.id,"aria-valuenow",this.settings.title)))},add:function(a,d,b){b=b||{};b=e.extend(b,{title:a,value:d});this.items.push(b);this.onAdd.dispatch(this,b)},getLength:function(){return this.items.length},renderHTML:function(){var a="",a=this.settings,d=this.classPrefix,a='<span role="listbox" aria-haspopup="true" aria-labelledby="'+this.id+'_voiceDesc" aria-describedby="'+this.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+this.id+'" cellpadding="0" cellspacing="0" class="'+
d+" "+d+"Enabled"+(a["class"]?" "+a["class"]:"")+'"><tbody><tr>',a=a+("<td>"+j.createHTML("span",{id:this.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},this.settings.title)),a=a+(j.createHTML("a",{id:this.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},j.encode(this.settings.title))+"</td>"),a=a+("<td>"+j.createHTML("a",{id:this.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},
'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span></span>')+"</td>");return a+"</tr></tbody></table></span>"},showMenu:function(){var a=this,d,b=j.get(this.id),c;if(!(a.isDisabled()||0==a.items.length)){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);d=j.getPos(b);c=a.menu;c.settings.offset_x=d.x;c.settings.offset_y=d.y;c.settings.keyboard_focus=!e.isOpera;a.oldID&&c.items[a.oldID].setSelected(0);g(a.items,
function(b){if(b.value===a.selectedValue){c.items[b.id].setSelected(1);a.oldID=b.id}});c.showMenu(0,b.clientHeight);i.add(j.doc,"mousedown",a.hideMenu,a);j.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(a){if(this.menu&&this.menu.isMenuVisible&&(j.removeClass(this.id,this.classPrefix+"Selected"),!a||!("mousedown"==a.type&&(a.target.id==this.id+"_text"||a.target.id==this.id+"_open"))))if(!a||!j.getParent(a.target,".mceMenu"))j.removeClass(this.id,this.classPrefix+"Selected"),i.remove(j.doc,
"mousedown",this.hideMenu,this),this.menu.hideMenu()},renderMenu:function(){var a=this,d;d=a.settings.control_manager.createDropMenu(a.id+"_menu",{menu_line:1,"class":a.classPrefix+"Menu mceNoIcons",max_width:150,max_height:150});d.onHideMenu.add(function(){a.hideMenu();a.focus()});d.add({title:a.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==a.settings.onselect("")&&a.select("")}});g(a.items,function(b){void 0===b.value?d.add({title:b.title,role:"option","class":"mceMenuItemTitle",
onclick:function(){!1!==a.settings.onselect("")&&a.select("")}}):(b.id=j.uniqueId(),b.role="option",b.onclick=function(){!1!==a.settings.onselect(b.value)&&a.select(b.value)},d.add(b))});a.onRenderMenu.dispatch(a,d);a.menu=d},postRender:function(){var a=this,d=a.classPrefix;i.add(a.id,"click",a.showMenu,a);i.add(a.id,"keydown",function(b){32==b.keyCode&&(a.showMenu(b),i.cancel(b))});i.add(a.id,"focus",function(){a._focused||(a.keyDownHandler=i.add(a.id,"keydown",function(b){40==b.keyCode&&(a.showMenu(),
i.cancel(b))}),a.keyPressHandler=i.add(a.id,"keypress",function(b){var d;13==b.keyCode&&(d=a.selectedValue,a.selectedValue=null,i.cancel(b),a.settings.onselect(d))}));a._focused=1});i.add(a.id,"blur",function(){i.remove(a.id,"keydown",a.keyDownHandler);i.remove(a.id,"keypress",a.keyPressHandler);a._focused=0});if(e.isIE6||!j.boxModel)i.add(a.id,"mouseover",function(){j.hasClass(a.id,d+"Disabled")||j.addClass(a.id,d+"Hover")}),i.add(a.id,"mouseout",function(){j.hasClass(a.id,d+"Disabled")||j.removeClass(a.id,
d+"Hover")});a.onPostRender.dispatch(a,j.get(a.id))},destroy:function(){this.parent();i.clear(this.id+"_text");i.clear(this.id+"_open")}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event,g=e.each;e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(c,a){this.parent(c,a);this.classPrefix="mceNativeListBox"},setDisabled:function(c){j.get(this.id).disabled=c;this.setAriaProperty("disabled",c)},isDisabled:function(){return j.get(this.id).disabled},select:function(c){var a=this,d,b;if(void 0==c)return a.selectByIndex(-1);b=c&&"function"==typeof c?c:function(a){return a==c};c!=a.selectedValue&&(g(a.items,function(c,e){if(b(c.value))return d=
1,a.selectByIndex(e),!1}),d||a.selectByIndex(-1))},selectByIndex:function(c){j.get(this.id).selectedIndex=c+1;this.selectedValue=this.items[c]?this.items[c].value:null},add:function(c,a,d){d=d||{};d.value=a;this.isRendered()&&j.add(j.get(this.id),"option",d,c);c={title:c,value:a,attribs:d};this.items.push(c);this.onAdd.dispatch(this,c)},getLength:function(){return this.items.length},renderHTML:function(){var c;c=j.createHTML("option",{value:""},"-- "+this.settings.title+" --");g(this.items,function(a){c+=
j.createHTML("option",{value:a.value},a.title)});c=j.createHTML("select",{id:this.id,"class":"mceNativeListBox","aria-labelledby":this.id+"_aria"},c);return c+=j.createHTML("span",{id:this.id+"_aria",style:"display: none"},this.settings.title)},postRender:function(){function c(b){if((b=a.items[b.target.selectedIndex-1])&&(b=b.value))if(a.onChange.dispatch(a,b),a.settings.onselect)a.settings.onselect(b)}var a=this,d=!0;a.rendered=!0;i.add(a.id,"change",c);i.add(a.id,"keydown",function(b){var f;i.remove(a.id,
"change",void 0);d=!1;f=i.add(a.id,"blur",function(){d||(d=!0,i.add(a.id,"change",c),i.remove(a.id,"blur",f))});if(e.isWebKit&&(37==b.keyCode||39==b.keyCode))return i.prevent(b);if(13==b.keyCode||32==b.keyCode)return c(b),i.cancel(b)});a.onPostRender.dispatch(a,j.get(a.id))}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event;e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(g,c,a){this.parent(g,c,a);this.onRenderMenu=new e.util.Dispatcher(this);c.menu_container=c.menu_container||j.doc.body},showMenu:function(){var e,c=j.get(this.id),a;if(!this.isDisabled()){this.isMenuRendered||(this.renderMenu(),this.isMenuRendered=!0);if(this.isMenuVisible)return this.hideMenu();j.getPos(this.settings.menu_container);e=j.getPos(c);a=this.menu;a.settings.offset_x=e.x;a.settings.offset_y=
e.y;a.settings.vp_offset_x=e.x;a.settings.vp_offset_y=e.y;a.settings.keyboard_focus=this._focused;a.showMenu(0,c.clientHeight);i.add(j.doc,"mousedown",this.hideMenu,this);this.setState("Selected",1);this.isMenuVisible=1}},renderMenu:function(){var e=this,c;c=e.settings.control_manager.createDropMenu(e.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:e.settings.icons});c.onHideMenu.add(function(){e.hideMenu();e.focus()});e.onRenderMenu.dispatch(e,c);e.menu=c},hideMenu:function(e){var c=
this;if(!e||!("mousedown"==e.type&&j.getParent(e.target,function(a){return a.id===c.id||a.id===c.id+"_open"}))){if(!e||!j.getParent(e.target,".mceMenu"))c.setState("Selected",0),i.remove(j.doc,"mousedown",c.hideMenu,c),c.menu&&c.menu.hideMenu();c.isMenuVisible=0}},postRender:function(){var e=this,c=e.settings;i.add(e.id,"click",function(){if(!e.isDisabled()){if(c.onclick)c.onclick(e.value);e.showMenu()}})}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event;e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,c,a){this.parent(e,c,a);this.classPrefix="mceSplitButton"},renderHTML:function(){var e,c=this.settings,a;e="<tbody><tr>";a=c.image?j.createHTML("img ",{src:c.image,role:"presentation","class":"mceAction "+c["class"]}):j.createHTML("span",{"class":"mceAction "+c["class"]},"");a+=j.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:this.id+"_voice",style:"display:none;"},c.title);
e+="<td >"+j.createHTML("a",{role:"button",id:this.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+c["class"],onclick:"return false;",onmousedown:"return false;",title:c.title},a)+"</td>";a=j.createHTML("span",{"class":"mceOpen "+c["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">▼</span>');e+="<td >"+j.createHTML("a",{role:"button",id:this.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+c["class"],onclick:"return false;",onmousedown:"return false;",
title:c.title},a)+"</td>";e=j.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+c["class"],cellpadding:"0",cellspacing:"0",title:c.title},e+"</tr></tbody>");return j.createHTML("div",{id:this.id,role:"button",tabindex:"0","aria-labelledby":this.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var g=this,c=g.settings,a;c.onclick&&(a=function(a){g.isDisabled()||(c.onclick(g.value),i.cancel(a))},i.add(g.id+"_action","click",a),i.add(g.id,["click","keydown"],
function(d){if((32===d.keyCode||13===d.keyCode||14===d.keyCode)&&!d.altKey&&!d.ctrlKey&&!d.metaKey)a(),i.cancel(d);else if("click"===d.type||40===d.keyCode)g.showMenu(),i.cancel(d)}));i.add(g.id+"_open","click",function(a){g.showMenu();i.cancel(a)});i.add([g.id,g.id+"_open"],"focus",function(){g._focused=1});i.add([g.id,g.id+"_open"],"blur",function(){g._focused=0});if(e.isIE6||!j.boxModel)i.add(g.id,"mouseover",function(){j.hasClass(g.id,"mceSplitButtonDisabled")||j.addClass(g.id,"mceSplitButtonHover")}),
i.add(g.id,"mouseout",function(){j.hasClass(g.id,"mceSplitButtonDisabled")||j.removeClass(g.id,"mceSplitButtonHover")})},destroy:function(){this.parent();i.clear(this.id+"_action");i.clear(this.id+"_open");i.clear(this.id)}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event,g=e.is,c=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(a,d,b){this.parent(a,d,b);this.settings=d=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},
this.settings);this.onShowMenu=new e.util.Dispatcher(this);this.onHideMenu=new e.util.Dispatcher(this);this.value=d.default_color},showMenu:function(){var a=this,d,b;if(!a.isDisabled()){a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0);if(a.isMenuVisible)return a.hideMenu();d=j.get(a.id);j.show(a.id+"_menu");j.addClass(d,"mceSplitButtonSelected");b=j.getPos(d);j.setStyles(a.id+"_menu",{left:b.x,top:b.y+d.clientHeight,zIndex:2E5});d=0;i.add(j.doc,"mousedown",a.hideMenu,a);a.onShowMenu.dispatch(a);
a._focused&&(a._keyHandler=i.add(a.id+"_menu","keydown",function(b){b.keyCode==27&&a.hideMenu()}),j.select("a",a.id+"_menu")[0].focus());a.isMenuVisible=1}},hideMenu:function(a){var d=this;if(d.isMenuVisible&&(!a||!("mousedown"==a.type&&j.getParent(a.target,function(a){return a.id===d.id+"_open"})))){if(!a||!j.getParent(a.target,".mceSplitButtonMenu"))j.removeClass(d.id,"mceSplitButtonSelected"),i.remove(j.doc,"mousedown",d.hideMenu,d),i.remove(d.id+"_menu","keydown",d._keyHandler),j.hide(d.id+"_menu");
d.isMenuVisible=0;d.onHideMenu.dispatch()}},renderMenu:function(){var a=this,d,b=0,f=a.settings,h,p,l,n,k;n=j.add(f.menu_container,"div",{role:"listbox",id:a.id+"_menu","class":f.menu_class+" "+f["class"],style:"position:absolute;left:0;top:-1000px;"});d=j.add(n,"div",{"class":f["class"]+" mceSplitButtonMenu"});j.add(d,"span",{"class":"mceMenuLine"});h=j.add(d,"table",{role:"presentation","class":"mceColorSplitMenu"});p=j.add(h,"tbody");b=0;c(g(f.colors,"array")?f.colors:f.colors.split(","),function(d){d=
d.replace(/^#/,"");b--||(l=j.add(p,"tr"),b=f.grid_width-1);h=j.add(l,"td");var c={href:"javascript:;",style:{backgroundColor:"#"+d},title:a.editor.getLang("colors."+d,d),"data-mce-color":"#"+d};e.isIE||(c.role="option");h=j.add(h,"a",c);a.editor.forcedHighContrastMode&&(h=j.add(h,"canvas",{width:16,height:16,"aria-hidden":"true"}),h.getContext&&(k=h.getContext("2d"))?(k.fillStyle="#"+d,k.fillRect(0,0,16,16)):j.remove(h))});f.more_colors_func&&(h=j.add(p,"tr"),h=j.add(h,"td",{colspan:f.grid_width,
"class":"mceMoreColors"}),h=j.add(h,"a",{role:"option",id:a.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},f.more_colors_title),i.add(h,"click",function(a){f.more_colors_func.call(f.more_colors_scope||this);return i.cancel(a)}));j.addClass(d,"mceColorSplitMenu");new e.ui.KeyboardNavigation({root:a.id+"_menu",items:j.select("a",a.id+"_menu"),onCancel:function(){a.hideMenu();a.focus()}});i.add(a.id+"_menu","mousedown",function(a){return i.cancel(a)});i.add(a.id+"_menu",
"click",function(b){var d;(b=j.getParent(b.target,"a",p))&&(b.nodeName.toLowerCase()=="a"&&(d=b.getAttribute("data-mce-color")))&&a.setColor(d);return i.cancel(b)});return n},setColor:function(a){this.displayColor(a);this.hideMenu();this.settings.onselect(a)},displayColor:function(a){j.setStyle(this.id+"_preview","backgroundColor",a);this.value=a},postRender:function(){var a=this.id;this.parent();j.add(a+"_action","div",{id:a+"_preview","class":"mceColorPreview"});j.setStyle(this.id+"_preview","backgroundColor",
this.value)},destroy:function(){this.parent();i.clear(this.id+"_menu");i.clear(this.id+"_more");j.remove(this.id+"_menu")}})})(tinymce);
(function(e){var j=e.DOM,i=e.each,g=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var c=[],a=this.controls,d=e.each,b=this.settings;c.push('<div id="'+this.id+'" role="group" aria-labelledby="'+this.id+'_voice">');c.push("<span role='application'>");c.push('<span id="'+this.id+'_voice" class="mceVoiceLabel" style="display:none;">'+j.encode(b.name)+"</span>");d(a,function(a){c.push(a.renderHTML())});c.push("</span>");c.push("</div>");return c.join("")},
focus:function(){j.get(this.id).focus()},postRender:function(){var c=this,a=[];i(c.controls,function(d){i(d.controls,function(b){b.id&&a.push(b)})});c.keyNav=new e.ui.KeyboardNavigation({root:c.id,items:a,onCancel:function(){e.isWebKit&&j.get(c.editor.id+"_ifr").focus();c.editor.focus()},excludeFromTabOrder:!c.settings.tab_focus_toolbar})},destroy:function(){this.parent();this.keyNav.destroy();g.clear(this.id)}})})(tinymce);
(function(e){var j=e.DOM;e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e="",g,c,a=this.settings,d,b,f,h;h=this.controls;for(d=0;d<h.length;d++){c=h[d];b=h[d-1];f=h[d+1];0===d&&(g="mceToolbarStart",c.Button?g+=" mceToolbarStartButton":c.SplitButton?g+=" mceToolbarStartSplitButton":c.ListBox&&(g+=" mceToolbarStartListBox"),e+=j.createHTML("td",{"class":g},j.createHTML("span",null,"<\!-- IE --\>")));if(b&&c.ListBox&&(b.Button||b.SplitButton))e+=j.createHTML("td",{"class":"mceToolbarEnd"},
j.createHTML("span",null,"<\!-- IE --\>"));e=j.stdMode?e+('<td style="position: relative">'+c.renderHTML()+"</td>"):e+("<td>"+c.renderHTML()+"</td>");if(f&&c.ListBox&&(f.Button||f.SplitButton))e+=j.createHTML("td",{"class":"mceToolbarStart"},j.createHTML("span",null,"<\!-- IE --\>"))}g="mceToolbarEnd";c.Button?g+=" mceToolbarEndButton":c.SplitButton?g+=" mceToolbarEndSplitButton":c.ListBox&&(g+=" mceToolbarEndListBox");e+=j.createHTML("td",{"class":g},j.createHTML("span",null,"<\!-- IE --\>"));return j.createHTML("table",
{id:this.id,"class":"mceToolbar"+(a["class"]?" "+a["class"]:""),cellpadding:"0",cellspacing:"0",align:this.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+e+"</tr></tbody>")}})})(tinymce);
(function(e){var j=e.util.Dispatcher;e.create("tinymce.AddOnManager",{AddOnManager:function(){this.items=[];this.urls={};this.lookup={};this.onAdd=new j(this)},get:function(e){if(this.lookup[e])return this.lookup[e].instance},dependencies:function(e){var g;this.lookup[e]&&(g=this.lookup[e].dependencies);return g||[]},requireLangPack:function(j){var g=e.settings;g&&(g.language&&!1!==g.language_load)&&e.ScriptLoader.add(this.urls[j]+"/langs/"+g.language+".js")},add:function(e,g,c){this.items.push(g);
this.lookup[e]={instance:g,dependencies:c};this.onAdd.dispatch(this,e,g);return g},createUrl:function(e,g){return"object"===typeof g?g:{prefix:e.prefix,resource:g,suffix:e.suffix}},addComponents:function(j,g){var c=this.urls[j];e.each(g,function(a){e.ScriptLoader.add(c+"/"+a)})},load:function(j,g,c,a){function d(){var d=b.dependencies(j);e.each(d,function(a){a=b.createUrl(g,a);b.load(a.resource,a,void 0,void 0)});c&&(a?c.call(a):c.call(e.ScriptLoader))}var b=this,f=g;b.urls[j]||("object"===typeof g&&
(f=g.prefix+g.resource+g.suffix),0!=f.indexOf("/")&&-1==f.indexOf("://")&&(f=e.baseURL+"/"+f),b.urls[j]=f.substring(0,f.lastIndexOf("/")),e.settings.atlassian||(b.lookup[j]?d():e.ScriptLoader.add(f,d,a)))}});e.PluginManager=new e.AddOnManager;e.ThemeManager=new e.AddOnManager})(tinymce);
(function(e){var j=e.each,i=e.extend,g=e.DOM,c=e.dom.Event,a=e.explode,d=e.util.Dispatcher,b=0;e.documentBaseURL=e.baseURL;AJS.log("tinymce.documentBaseURL = "+e.documentBaseURL);/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/");e.baseURL=(new e.util.URI(e.documentBaseURL)).toAbsolute(e.baseURL);e.baseURI=new e.util.URI(e.baseURL);e.onBeforeUnload=new d(e);c.add(window,"beforeunload",function(a){e.onBeforeUnload.dispatch(e,a)});e.onAddEditor=new d(e);e.onRemoveEditor=new d(e);e.EditorManager=
i(e,{editors:[],i18n:{},activeEditor:null,init:function(d){function h(a,b,d){var c=a[b];if(c){if(e.is(c,"string")){d=(d=c.replace(/\.\w+$/,""))?e.resolve(d):0;c=e.resolve(c)}return c.apply(d||this,Array.prototype.slice.call(arguments,2))}}function p(){var c,i;h(d,"onpageload");switch(d.mode){case "exact":c=d.elements||"";c.length>0&&j(a(c),function(a){if(g.get(a)){m=new e.Editor(a,d);k.push(m);m.render(1)}else j(document.forms,function(c){j(c.elements,function(c){if(c.name===a){a="mce_editor_"+b++;
g.setAttrib(c,"id",a);m=new e.Editor(a,d);k.push(m);m.render(1)}})})});break;case "textareas":case "specific_textareas":j(g.select("textarea"),function(a){if(!d.editor_deselector||!(d.editor_deselector.constructor===RegExp?d.editor_deselector.test(a.className):g.hasClass(a,d.editor_deselector)))if(!d.editor_selector||(d.editor_selector.constructor===RegExp?d.editor_selector.test(a.className):g.hasClass(a,d.editor_selector))){n=g.get(a.name);if(!a.id&&!n)a.id=a.name;if(!a.id||l.get(a.id))a.id=g.uniqueId();
m=new e.Editor(a.id,d);k.push(m);m.render(1)}})}if(d.oninit){c=i=0;j(k,function(a){i++;a.initialized?c++:a.onInit.add(function(){c++;c==i&&h(d,"oninit")});c==i&&h(d,"oninit")})}}var l=this,n,k=[],m,d=i({theme:"simple",language:"en"},d);l.settings=d;d.atlassian?p():c.add(document,"init",p)},get:function(a){return a===void 0?this.editors:this.editors[a]},getInstanceById:function(a){return this.get(a)},add:function(a){var b=this.editors;b[a.id]=a;b.push(a);this._setActive(a);this.onAddEditor.dispatch(this,
a);e.adapter&&e.adapter.patchEditor(a);return a},remove:function(a){var b,d=this.editors;if(!d[a.id])return null;delete d[a.id];for(b=0;b<d.length;b++)if(d[b]==a){d.splice(b,1);break}this.activeEditor==a&&this._setActive(d[0]);a.destroy();this.onRemoveEditor.dispatch(this,a);return a},execCommand:function(a,b,d){var c=this.get(d),g;switch(a){case "mceFocus":c.focus();return true;case "mceAddEditor":case "mceAddControl":this.get(d)||(new e.Editor(d,this.settings)).render();return true;case "mceAddFrameControl":g=
d.window;g.tinyMCE=tinyMCE;g.tinymce=e;e.DOM.doc=g.document;e.DOM.win=g;c=new e.Editor(d.element_id,d);c.render();if(e.isIE){var k=function(){c.destroy();g.detachEvent("onunload",k);g=g.tinyMCE=g.tinymce=null};g.attachEvent("onunload",k)}d.page_window=null;return true;case "mceRemoveEditor":case "mceRemoveControl":c&&c.remove();return true;case "mceToggleEditor":if(!c){this.execCommand("mceAddControl",0,d);return true}c.isHidden()?c.show():c.hide();return true}return this.activeEditor?this.activeEditor.execCommand(a,
b,d):false},execInstanceCommand:function(a,b,d,c){return(a=this.get(a))?a.execCommand(b,d,c):false},triggerSave:function(){j(this.editors,function(a){a.save()})},addI18n:function(a,b){var d=this.i18n;e.is(a,"string")?j(b,function(b,c){d[a+"."+c]=b}):j(a,function(a,b){j(a,function(a,c){j(a,function(a,e){c==="common"?d[b+"."+e]=a:d[b+"."+c+"."+e]=a})})})},_setActive:function(a){this.selectedInstance=this.activeEditor=a}})})(tinymce);
(function(e){var j=e.DOM,i=e.dom.Event,g=e.extend,c=e.util.Dispatcher,a=e.each,d=e.isGecko,b=e.isIE,f=e.is,h=e.ThemeManager,p=e.PluginManager,l=e.explode,n=e.VK;e.create("tinymce.Editor",{Editor:function(b,d){var f=this;f.id=f.editorId=b;f.execCommands={};f.queryStateCommands={};f.queryValueCommands={};f.isNotDirty=!1;f.plugins={};a("onPreInit onBeforeRenderUI onPostRender onLoad onInit onRemove onActivate onDeactivate onClick onEvent onMouseUp onMouseDown onDblClick onKeyDown onKeyUp onKeyPress onContextMenu onSubmit onReset onPaste onPreProcess onPostProcess onBeforeSetContent onBeforeGetContent onSetContent onGetContent onLoadContent onSaveContent onNodeChange onChange onBeforeExecCommand onExecCommand onUndo onRedo onVisualAid onSetProgressState onSetAttrib".split(" "),
function(a){f[a]=new c(f)});f.settings=d=g({id:b,language:"en",docs_language:"en",theme:"simple",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:1,submit_patch:1,add_unload_trigger:1,convert_urls:1,relative_urls:1,remove_script_host:1,table_inline_editing:0,object_resizing:1,cleanup:1,accessibility_focus:1,custom_shortcuts:1,custom_undo_redo_keyboard_shortcuts:1,custom_undo_redo_restore_selection:1,custom_undo_redo:1,
doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE html>",visual_table_class:"mceItemTable",visual:1,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:1,directionality:"ltr",forced_root_block:"p",hidden_input:1,padd_empty_editor:1,render_ui:1,init_theme:1,force_p_newlines:1,indentation:"30px",keep_styles:1,fix_table_elements:1,inline_styles:1,
convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr",validate:!0,entity_encoding:"named",url_converter:f.convertURL,url_converter_scope:f,ie7_compat:!0},d);f.documentBaseURI=new e.util.URI(d.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI});f.baseURI=e.baseURI;f.contentCSS=
[];f.execCallback("setup",f)},render:function(){var b=this,d=b.settings,c=b.id,f=e.ScriptLoader;if(!d.atlassian&&!i.domLoaded)i.add(document,"init",function(){b.render()});else if(tinyMCE.settings=d,b.getElement()&&(!e.isIDevice||e.isIOS5))!/TEXTAREA|INPUT/i.test(b.getElement().nodeName)&&(d.hidden_input&&j.getParent(c,"form"))&&j.insertAfter(j.create("input",{type:"hidden",name:c}),c),e.WindowManager&&(b.windowManager=new e.WindowManager(b)),"xml"==d.encoding&&b.onGetContent.add(function(a,b){if(b.save)b.content=
j.encode(b.content)}),d.add_form_submit_trigger&&b.onSubmit.addToTop(function(){if(b.initialized){b.save();b.isNotDirty=1}}),d.add_unload_trigger&&(b._beforeUnload=tinyMCE.onBeforeUnload.add(function(){b.initialized&&(!b.destroyed&&!b.isHidden())&&b.save({format:"raw",no_events:true})})),e.addUnload(b.destroy,b),d.submit_patch&&b.onBeforeRenderUI.add(function(){var a=b.getElement().form;if(a&&!a._mceOldSubmit){if(!a.submit.nodeType&&!a.submit.length){b.formElement=a;a._mceOldSubmit=a.submit;a.submit=
function(){e.triggerSave();b.isNotDirty=1;return b.formElement._mceOldSubmit(b.formElement)}}a=null}}),c=function(){b.removed||b.init()},d.theme&&("-"!=d.theme.charAt(0)&&!h.urls[d.theme])&&h.load(d.theme,"themes/"+d.theme+"/editor_template"+e.suffix+".js"),a(l(d.plugins),function(b){if(b&&!p.urls[b])if(b.charAt(0)=="-"){b=b.substr(1,b.length);b=p.dependencies(b);a(b,function(a){a=p.createUrl({prefix:"plugins/",resource:a,suffix:"/editor_plugin"+e.suffix+".js"},a);p.load(a.resource,a)})}else b!="safari"&&
p.load(b,{prefix:"plugins/",resource:b,suffix:"/editor_plugin"+e.suffix+".js"})}),d.atlassian?c():f.loadQueue(c)},init:function(){function c(b){var d=p.get(b),g=p.urls[b]||e.documentBaseURL.replace(/\/$/,"");d&&-1===e.inArray(x,b)&&(a(p.dependencies(b),function(a){c(a)}),d=new d(f,g),f.plugins[b]=d,d.init&&(d.init(f,g),x.push(b)),AJS.log("initPlugin: "+b+" initialised"))}var f=this,g=f.settings,i,s,r=f.getElement(),n,v,u,x=[];e.add(f);g.aria_label=g.aria_label||j.getAttrib(r,"aria-label",f.getLang("aria.rich_text_area"));
g.theme&&(g.theme=g.theme.replace(/-/,""),n=h.get(g.theme),f.theme=new n,f.theme.init&&g.init_theme&&f.theme.init(f,h.urls[g.theme]||e.documentBaseURL.replace(/\/$/,"")));a(l(g.plugins.replace(/\-/g,"")),c);!1!==g.popup_css&&(g.popup_css=g.popup_css?f.documentBaseURI.toAbsolute(g.popup_css):f.baseURI.toAbsolute("themes/"+g.theme+"/skins/"+g.skin+"/dialog.css"));g.popup_css_add&&(g.popup_css+=","+f.documentBaseURI.toAbsolute(g.popup_css_add));f.controlManager=new e.ControlManager(f);g.custom_undo_redo&&
(f.onBeforeExecCommand.add(function(a,b,d,c,e){b!="Undo"&&(b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo))&&f.undoManager.beforeChange()}),f.onExecCommand.add(function(a,b,d,c,e){b!="Undo"&&(b!="Redo"&&b!="mceRepaint"&&(!e||!e.skip_undo))&&f.undoManager.add()}));f.onExecCommand.add(function(a,b){/^(FontName|FontSize)$/.test(b)||f.nodeChanged()});d&&(u=function(a,b){(!b||!b.initial)&&f.execCommand("mceRepaint")},f.onUndo.add(u),f.onRedo.add(u),f.onSetContent.add(u));f.onBeforeRenderUI.dispatch(f,f.controlManager);
g.render_ui&&(i=g.width||r.style.width||r.offsetWidth,s=g.height||r.style.height||r.offsetHeight,f.orgDisplay=r.style.display,u=/^[0-9\.]+(|px)$/i,u.test(""+i)&&(i=Math.max(parseInt(i)+(n.deltaWidth||0),100)),u.test(""+s)&&(s=Math.max(parseInt(s)+(n.deltaHeight||0),100)),n=f.theme.renderUI({targetNode:r,width:i,height:s,deltaWidth:g.delta_width,deltaHeight:g.delta_height}),f.editorContainer=n.editorContainer);if(g.content_editable)return r=n=null,f.setupContentEditable();document.domain&&location.hostname!=
document.domain&&(e.relaxedDomain=document.domain);j.setStyles(n.sizeContainer||n.editorContainer,{width:i,height:s});g.content_css&&e.each(l(g.content_css),function(a){f.contentCSS.push(f.documentBaseURI.toAbsolute(a))});100>s&&(s=100);f.iframeHTML=g.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">';f.iframeHTML=g.ie7_compat?f.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=7" />':f.iframeHTML+'<meta http-equiv="X-UA-Compatible" content="IE=edge" />';f.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';
for(i=0;i<f.contentCSS.length;i++)f.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+f.contentCSS[i]+'" />';g.contentCssTags&&(f.iframeHTML+=g.contentCssTags);f.contentCSS=[];i=g.body_id||"tinymce";-1!=i.indexOf("=")&&(i=f.getParam("body_id","","hash"),i=i[f.id]||i);r=g.body_class||"";-1!=r.indexOf("=")&&(r=f.getParam("body_class","","hash"),r=r[f.id]||"");f.iframeHTML+='</head><body id="'+i+'" class="mceContentBody aui-theme-default '+r+'" onload="window.parent.tinyMCE.get(\''+f.id+"').onLoad.dispatch();\"><br></body></html>";
if(e.relaxedDomain&&(b||e.isOpera&&11>parseFloat(opera.version())))v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.setupIframe();})()';j.add(n.iframeContainer,"iframe",{id:f.id+"_ifr",src:v||'javascript:""',frameBorder:"0",allowTransparency:"true",title:g.aria_label,style:{width:"100%",height:s,display:"block"}});f.contentAreaContainer=n.iframeContainer;j.get(n.editorContainer).style.display=
f.orgDisplay;j.get(f.id).style.display="none";j.setAttrib(f.id,"aria-hidden",!0);(!e.relaxedDomain||!v)&&f.setupIframe();r=n=null},setupIframe:function(){var c=this,f=c.settings;j.get(c.id);var g=c.getDoc();if(!b||!e.relaxedDomain)g.open(),g.write(c.iframeHTML),g.close(),e.relaxedDomain&&(g.domain=e.relaxedDomain);g=c.getBody();g.disabled=!0;f.readonly||(g.contentEditable=!0);g.disabled=!1;c.schema=new e.html.Schema(f);c.dom=new e.dom.DOMUtils(c.getDoc(),{keep_values:!0,url_converter:c.convertURL,
url_converter_scope:c,hex_colors:f.force_hex_style_colors,class_filter:f.class_filter,update_styles:1,fix_ie_paragraphs:1,schema:c.schema});c.parser=new e.html.DomParser(f,c.schema);c.settings.allow_html_in_named_anchor||c.parser.addAttributeFilter("name",function(a){for(var b=a.length,d,c,e,f;b--;){f=a[b];if(f.name==="a"&&f.firstChild){e=f.parent;d=f.lastChild;do{c=d.prev;e.insert(d,f);d=c}while(d)}}});c.parser.addAttributeFilter("src,href,style",function(a,b){for(var d=a.length,e,f=c.dom,g,h;d--;){e=
a[d];g=e.attr(b);h="data-mce-"+b;e.attributes.map[h]||(b==="style"?e.attr(h,f.serializeStyle(f.parseStyle(g),e.name)):e.attr(h,c.convertURL(g,b,e.name)))}});c.parser.addNodeFilter("script",function(a){for(var b=a.length,d;b--;){d=a[b];d.attr("type","mce-"+(d.attr("type")||"text/javascript"))}});c.parser.addNodeFilter("#cdata",function(a){for(var b=a.length,d;b--;){d=a[b];d.type=8;d.name="#comment";d.value="[CDATA["+d.value+"]]"}});c.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(a){var b=
a.length,d;for(c.schema.getNonEmptyElements();b--;){d=a[b];if(d.isEmpty(c.schema))d.empty().append(new e.html.Node("br",1)).shortEnded=true}});c.serializer=new e.dom.Serializer(f,c.dom,c.schema);c.selection=new e.dom.Selection(c.dom,c.getWin(),c.serializer);c.formatter=new e.Formatter(this);c.formatter.register({alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img.confluence-embedded-image",classes:"image-left"},{selector:"img,table",collapsed:!1,
styles:{"float":"left"}}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img.confluence-embedded-image",classes:"image-center"},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img.confluence-embedded-image",classes:"image-right"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",
styles:{textAlign:"justify"}}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},exact:!0}],strikethrough:[{inline:"s",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},
wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return true},onformat:function(b,d,e){a(e,function(a,d){c.dom.setAttrib(b,d,a)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",
remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]});a("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(a){c.formatter.register(a,{block:a,remove:"all"})});c.formatter.register(c.settings.formats);c.undoManager=new e.UndoManager(c);c.undoManager.onAdd.add(function(a,b){if(a.hasUndo())return c.onChange.dispatch(c,
b,a)});c.undoManager.onUndo.add(function(a,b){return c.onUndo.dispatch(c,b,a)});c.undoManager.onRedo.add(function(a,b){return c.onRedo.dispatch(c,b,a)});c.forceBlocks=new e.ForceBlocks(c,{forced_root_block:f.forced_root_block});c.editorCommands=new e.EditorCommands(c);c.serializer.onPreProcess.add(function(a,b){return c.onPreProcess.dispatch(c,b,a)});c.serializer.onPostProcess.add(function(a,b){return c.onPostProcess.dispatch(c,b,a)});AJS.log("Editor:setupIframe: dispatch onPreInit");c.onPreInit.dispatch(c);
f.gecko_spellcheck||(c.getBody().spellcheck=0);f.readonly||c._addEvents();AJS.log("Editor:setupIframe: dispatch controlManager onPostRender");c.controlManager.onPostRender.dispatch(c,c.controlManager);AJS.log("Editor:setupIframe: dispatch onPostRender");c.onPostRender.dispatch(c);c.quirks=new e.util.Quirks(this);f.directionality&&(c.getBody().dir=f.directionality);f.nowrap&&(c.getBody().style.whiteSpace="nowrap");f.handle_node_change_callback&&c.onNodeChange.add(function(a,b,d){c.execCallback("handle_node_change_callback",
c.id,d,-1,-1,true,c.selection.isCollapsed())});f.save_callback&&c.onSaveContent.add(function(a,b){var d=c.execCallback("save_callback",c.id,b.content,c.getBody());if(d)b.content=d});f.onchange_callback&&c.onChange.add(function(a,b){c.execCallback("onchange_callback",c,b)});f.protect&&c.onBeforeSetContent.add(function(b,d){f.protect&&a(f.protect,function(a){d.content=d.content.replace(a,function(a){return"<\!--mce:protected "+escape(a)+"--\>"})})});f.convert_newlines_to_brs&&c.onBeforeSetContent.add(function(a,
b){if(b.initial)b.content=b.content.replace(/\r?\n/g,"<br />")});f.preformatted&&c.onPostProcess.add(function(a,b){b.content=b.content.replace(/^\s*<pre.*?>/,"");b.content=b.content.replace(/<\/pre>\s*$/,"");if(b.set)b.content='<pre class="mceItemHidden">'+b.content+"</pre>"});f.verify_css_classes&&(c.serializer.attribValueFilter=function(b,d){var e,f;if(b=="class"){if(!c.classesRE){f=c.dom.getClasses();if(f.length>0){e="";a(f,function(a){e=e+((e?"|":"")+a["class"])});c.classesRE=RegExp("("+e+")",
"gi")}}return!c.classesRE||/(\bmceItem\w+\b|\bmceTemp\w+\b)/g.test(d)||c.classesRE.test(d)?d:""}return d});f.cleanup_callback&&(c.onBeforeSetContent.add(function(a,b){b.content=c.execCallback("cleanup_callback","insert_to_editor",b.content,b)}),c.onPreProcess.add(function(a,b){b.set&&c.execCallback("cleanup_callback","insert_to_editor_dom",b.node,b);b.get&&c.execCallback("cleanup_callback","get_from_editor_dom",b.node,b)}),c.onPostProcess.add(function(a,b){if(b.set)b.content=c.execCallback("cleanup_callback",
"insert_to_editor",b.content,b);if(b.get)b.content=c.execCallback("cleanup_callback","get_from_editor",b.content,b)}));f.save_callback&&c.onGetContent.add(function(a,b){if(b.save)b.content=c.execCallback("save_callback",c.id,b.content,c.getBody())});f.handle_event_callback&&c.onEvent.add(function(a,b,d){c.execCallback("handle_event_callback",b,a,d)===false&&i.cancel(b)});c.onSetContent.add(function(){c.addVisual(c.getBody())});f.padd_empty_editor&&c.onPostProcess.add(function(a,b){b.content=b.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,
"")});if(d){var h=function(b){a(b.dom.select("a"),function(a){var d=a.parentNode;b.dom.isBlock(d)&&d.lastChild===a&&b.dom.add(d,"br",{"data-mce-bogus":1})})};c.onExecCommand.add(function(a,b){b==="CreateLink"&&h(a)});c.onSetContent.add(c.selection.onSetContent.add(h))}c.load({initial:!0,format:"html"});c.startContent=c.getContent({format:"raw"});c.undoManager.add();c.initialized=!0;AJS.log("Editor:setupIframe: dispatch onInit");c.onInit.dispatch(c);AJS.log("Editor:setupIframe: Callback setupcontent_callback");
c.execCallback("setupcontent_callback",c.id,c.getBody(),c.getDoc());AJS.log("Editor:setupIframe: Completed setupcontent_callback");AJS.log("Editor:setupIframe: Callback init_instance_callback");c.execCallback("init_instance_callback",c);AJS.log("Editor:setupIframe: Completed init_instance_callback");c.focus(!0);c.nodeChanged({initial:1});a(c.contentCSS,function(a){c.dom.loadCSS(a)});f.auto_focus&&setTimeout(function(){var a=e.get(f.auto_focus);a.selection.select(a.getBody(),1);a.selection.collapse(1);
a.getBody().focus();a.getWin().focus()},100)},setupContentEditable:function(){var d=this,c=d.settings,f=d.getElement();d.contentDocument=c.content_document||document;d.contentWindow=c.content_window||window;d.bodyElement=f;c.content_document=c.content_window=null;j.hide(f);f.contentEditable=d.getParam("content_editable_state",!0);j.show(f);c.gecko_spellcheck||(d.getDoc().body.spellcheck=0);d.dom=new e.dom.DOMUtils(d.getDoc(),{keep_values:!0,url_converter:d.convertURL,url_converter_scope:d,hex_colors:c.force_hex_style_colors,
class_filter:c.class_filter,root_element:d.id,fix_ie_paragraphs:1,update_styles:1});d.serializer=new e.dom.Serializer(c,d.dom,schema);d.selection=new e.dom.Selection(d.dom,d.getWin(),d.serializer);d.forceBlocks=new e.ForceBlocks(d,{forced_root_block:c.forced_root_block});d.editorCommands=new e.EditorCommands(d);d.serializer.onPreProcess.add(function(a,b){return d.onPreProcess.dispatch(d,b,a)});d.serializer.onPostProcess.add(function(a,b){return d.onPostProcess.dispatch(d,b,a)});d.onPreInit.dispatch(d);
d._addEvents();d.controlManager.onPostRender.dispatch(d,d.controlManager);d.onPostRender.dispatch(d);d.onSetContent.add(function(){d.addVisual(d.getBody())});d.startContent=d.getContent({format:"raw"});d.undoManager.add({initial:!0});d.initialized=!0;d.onInit.dispatch(d);d.focus(!0);d.nodeChanged({initial:1});c.content_css&&a(l(c.content_css),function(a){d.dom.loadCSS(d.documentBaseURI.toAbsolute(a))});b&&(d.dom.bind(d.getElement(),"beforedeactivate",function(){d.lastSelectionBookmark=d.selection.getBookmark(1)}),
d.onBeforeExecCommand.add(function(a,b,d,c,e){if(!j.getParent(a.selection.getStart(),function(b){return b==a.getBody()}))e.terminate=1;if(!j.getParent(a.selection.getEnd(),function(b){return b==a.getBody()}))e.terminate=1}));f=null},focus:function(a){var b,d=this.selection,c=this.settings.content_editable,f,g=this.getDoc(),h,i;if(!a){a=d.getRng();a.item&&(f=a.item(0));this._refreshContentEditable();if(!c)if(e.isIE)try{h=this.getWin(),i=j.getViewPort(h),this.dom.getRoot().focus(),h.scrollTo(i.x,i.y)}catch(l){}else this.getWin().focus();
e.isGecko&&this.getBody().focus();f&&f.ownerDocument==g&&(a=g.body.createControlRange(),a.addElement(f),a.select());c&&(e.isWebKit?this.getWin().focus():e.isIE?this.getElement().setActive():this.getElement().focus())}e.activeEditor!=this&&(null!=(b=e.activeEditor)&&b.onDeactivate.dispatch(b,this),this.onActivate.dispatch(this,b));e._setActive(this)},execCallback:function(a){var b=this.settings[a],d;if(b){if(this.callbackLookup&&(d=this.callbackLookup[a]))b=d.func,d=d.scope;f(b,"string")&&(d=(d=b.replace(/\.\w+$/,
""))?e.resolve(d):0,b=e.resolve(b),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:b,scope:d});return b.apply(d||this,Array.prototype.slice.call(arguments,1))}},translate:function(a){var b=this.settings.language||"en",d=e.i18n;return!a?"":d[b+"."+a]||a.replace(/{\#([^}]+)\}/g,function(a,c){return d[b+"."+c]||"{#"+c+"}"})},getLang:function(a,b){return e.i18n[(this.settings.language||"en")+"."+a]||(f(b)?b:"{#"+a+"}")},getParam:function(b,d,c){var g=e.trim,b=f(this.settings[b])?
this.settings[b]:d,h;return"hash"===c?(h={},f(b,"string")?a(0<b.indexOf("=")?b.split(/[;,](?![^=;,]*(?:[;,]|$))/):b.split(","),function(a){a=a.split("=");1<a.length?h[g(a[0])]=g(a[1]):h[g(a[0])]=g(a)}):h=b,h):b},nodeChanged:function(a){var d=this.selection,c=d.getStart()||this.getBody();this.initialized&&(a=a||{},c=b&&c.ownerDocument!=this.getDoc()?this.getBody():c,a.parents=[],this.dom.getParent(c,function(b){if("BODY"==b.nodeName)return!0;a.parents.push(b)}),this.onNodeChange.dispatch(this,a?a.controlManager||
this.controlManager:this.controlManager,c,d.isCollapsed(),a))},addButton:function(a,b){this.buttons=this.buttons||{};this.buttons[a]=b},addCommand:function(a,b,d){this.execCommands[a]={func:b,scope:d||this}},addQueryStateHandler:function(a,b,d){this.queryStateCommands[a]={func:b,scope:d||this}},addQueryValueHandler:function(a,b,d){this.queryValueCommands[a]={func:b,scope:d||this}},addShortcut:function(b,d,c,e){var g=this,h;if(!g.settings.custom_shortcuts)return!1;g.shortcuts=g.shortcuts||{};f(c,"string")&&
(h=c,c=function(){g.execCommand(h,!1,null)});f(c,"object")&&(h=c,c=function(){g.execCommand(h[0],h[1],h[2])});a(l(b),function(b){var f={func:c,scope:e||this,desc:d,alt:false,ctrl:false,shift:false};a(l(b,"+"),function(a){switch(a){case "alt":case "ctrl":case "shift":f[a]=true;break;default:f.charCode=a.charCodeAt(0);f.keyCode=a.toUpperCase().charCodeAt(0)}});g.shortcuts[(f.ctrl?"ctrl":"")+","+(f.alt?"alt":"")+","+(f.shift?"shift":"")+","+f.keyCode]=f});return!0},execCommand:function(b,d,c,e){var f=
this,h=0,j;!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(b)&&(!e||!e.skip_focus)&&f.focus();e=g({},e);f.onBeforeExecCommand.dispatch(f,b,d,c,e);if(e.terminate)return!1;if(f.execCallback("execcommand_callback",f.id,f.selection.getNode(),b,d,c))return f.onExecCommand.dispatch(f,b,d,c,e),!0;if(j=f.execCommands[b])if(j=j.func.call(j.scope,d,c),!0!==j)return f.onExecCommand.dispatch(f,b,d,c,e),j;a(f.plugins,function(a){if(a.execCommand&&a.execCommand(b,d,c))return f.onExecCommand.dispatch(f,
b,d,c,e),h=1,!1});if(h)return!0;if(f.theme&&f.theme.execCommand&&f.theme.execCommand(b,d,c)||f.editorCommands.execCommand(b,d,c))return f.onExecCommand.dispatch(f,b,d,c,e),!0;f.getDoc().execCommand(b,d,c);f.onExecCommand.dispatch(f,b,d,c,e)},queryCommandState:function(a){var b;if(!this._isHidden()){if(b=this.queryStateCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandState(a);if(-1!==b)return b;try{return this.getDoc().queryCommandState(a)}catch(d){}}},queryCommandValue:function(a){var b;
if(!this._isHidden()){if(b=this.queryValueCommands[a])if(b=b.func.call(b.scope),!0!==b)return b;b=this.editorCommands.queryCommandValue(a);if(f(b))return b;try{return this.getDoc().queryCommandValue(a)}catch(d){}}},show:function(){j.show(this.getContainer());j.hide(this.id);this.load()},hide:function(){var a=this.getDoc();b&&a&&a.execCommand("SelectAll");this.save();j.hide(this.getContainer());j.setStyle(this.id,"display",this.orgDisplay)},isHidden:function(){return!j.isHidden(this.id)},setProgressState:function(a,
b,d){this.onSetProgressState.dispatch(this,a,b,d);return a},load:function(a){var b=this.getElement(),d;if(b)return a=a||{},a.load=!0,d=this.setContent(f(b.value)?b.value:b.innerHTML,a),a.element=b,a.no_events||this.onLoadContent.dispatch(this,a),a.element=null,d},save:function(b){var d=this,c=d.getElement(),e,f;if(c&&d.initialized){b=b||{};b.save=!0;try{b.no_events||(d.undoManager.typing=!1,d.undoManager.add())}catch(g){AJS.logError("editor.save() : "+g)}b.element=c;e=b.content=d.getContent(b);b.no_events||
d.onSaveContent.dispatch(d,b);e=b.content;/TEXTAREA|INPUT/i.test(c.nodeName)?c.value=e:(c.innerHTML=e,(f=j.getParent(d.id,"form"))&&a(f.elements,function(a){if(a.name==d.id)return a.value=e,!1}));b.element=c=null;return e}},setContent:function(a,b){var d=this.getBody(),c,b=b||{};b.format=b.format||"html";b.set=!0;b.content=a;b.no_events||this.onBeforeSetContent.dispatch(this,b);a=b.content;if(!e.isIE&&(0===a.length||/^\s+$/.test(a)))a=(c=this.settings.forced_root_block)?"<"+c+'><br data-mce-bogus="1"></'+
c+">":'<br data-mce-bogus="1">',d.innerHTML=a,this.selection.select(d,!0),this.selection.collapse(!0);"raw"!==b.format&&(a=(new e.html.Serializer({},this.schema)).serialize(this.parser.parse(a)));b.content=e.trim(a);this.dom.setHTML(d,b.content);b.no_events||this.onSetContent.dispatch(this,b);this.selection.normalize();return b.content},getContent:function(a){var b,a=a||{};a.format=a.format||"html";a.get=!0;a.no_events||this.onBeforeGetContent.dispatch(this,a);b="raw"==a.format?this.getBody().innerHTML:
this.serializer.serialize(this.getBody(),a);a.content=e.trim(b);a.no_events||this.onGetContent.dispatch(this,a);return a.content},isDirty:function(){return e.trim(this.startContent)!=e.trim(this.getContent({format:"raw",no_events:1}))&&!this.isNotDirty},setDirty:function(a){this.isNotDirty=a?0:1},getContainer:function(){this.container||(this.container=j.get(this.editorContainer||this.id+"_parent"));return this.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return j.get(this.settings.content_element||
this.id)},getWin:function(){var a;if(!this.contentWindow&&(a=j.get(this.id+"_ifr")))this.contentWindow=a.contentWindow;return this.contentWindow},getDoc:function(){var a;if(!this.contentDocument&&(a=this.getWin()))this.contentDocument=a.document;return this.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(a,b,d){var c=this.settings;return c.urlconverter_callback?this.execCallback("urlconverter_callback",a,d,!0,b):!c.convert_urls||d&&"LINK"==d.nodeName||
0===a.indexOf("file:")?a:c.relative_urls?this.documentBaseURI.toRelative(a):a=this.documentBaseURI.toAbsolute(a,c.remove_script_host)},addVisual:function(b){var d=this,c=d.settings,b=b||d.getBody();f(d.hasVisual)||(d.hasVisual=c.visual);a(d.dom.select("table,a",b),function(a){var b;switch(a.nodeName){case "TABLE":b=d.dom.getAttrib(a,"border");if(!b||b=="0")d.hasVisual?d.dom.addClass(a,c.visual_table_class):d.dom.removeClass(a,c.visual_table_class);break;case "A":(b=d.dom.getAttrib(a,"name"))&&(d.hasVisual?
d.dom.addClass(a,"mceItemAnchor"):d.dom.removeClass(a,"mceItemAnchor"))}});d.onVisualAid.dispatch(d,b,d.hasVisual)},remove:function(){var a=this.getContainer();this.removed=1;this.hide();this.execCallback("remove_instance_callback",this);this.onRemove.dispatch(this);this.onExecCommand.listeners=[];e.remove(this);j.remove(a)},destroy:function(a){this.destroyed||(a||(e.removeUnload(this.destroy),tinyMCE.onBeforeUnload.remove(this._beforeUnload),this.theme&&this.theme.destroy&&this.theme.destroy(),this.controlManager.destroy(),
this.selection.destroy(),this.dom.destroy(),this.settings.content_editable||(i.clear(this.getWin()),i.clear(this.getDoc())),i.clear(this.getBody()),i.clear(this.formElement)),this.formElement&&(this.formElement.submit=this.formElement._mceOldSubmit,this.formElement._mceOldSubmit=null),this.contentAreaContainer=this.formElement=this.container=this.settings.content_element=this.bodyElement=this.contentDocument=this.contentWindow=null,this.selection&&(this.selection=this.selection.win=this.selection.dom=
this.selection.dom.doc=null),this.destroyed=1)},_addEvents:function(){function b(a,d){c.removed||!1!==c.onEvent.dispatch(c,a,d)&&c[h[a.fakeType||a.type]].dispatch(c,a,d)}var c=this,f=c.settings,g=c.dom,h={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"};a(h,function(a,d){switch(d){case "contextmenu":g.bind(c.getDoc(),d,b);break;case "paste":g.bind(c.getBody(),
d,function(a){b(a)});break;case "submit":case "reset":g.bind(c.getElement().form||j.getParent(c.id,"form"),d,b);break;default:g.bind(f.content_editable?c.getBody():c.getDoc(),d,b)}});g.bind(f.content_editable?c.getBody():d?c.getDoc():c.getWin(),"focus",function(){c.focus(!0)});if(f.content_editable&&e.isOpera){var l=function(){c.focus(!0)};g.bind(c.getBody(),"click",l);g.bind(c.getBody(),"keydown",l)}e.isGecko&&g.bind(c.getDoc(),"DOMNodeInserted",function(a){var b,a=a.target;if(1===a.nodeType&&"IMG"===
a.nodeName&&(b=a.getAttribute("data-mce-src")))a.src=c.documentBaseURI.toAbsolute(b)});d&&(l=function(){var a=this.getDoc(),b=this.settings;if(d&&!b.readonly){this._refreshContentEditable();try{a.execCommand("styleWithCSS",0,!1)}catch(c){if(!this._isHidden())try{a.execCommand("useCSS",0,!0)}catch(e){}}if(!b.table_inline_editing)try{a.execCommand("enableInlineTableEditing",!1,!1)}catch(f){}if(!b.object_resizing)try{a.execCommand("enableObjectResizing",!1,!1)}catch(g){}}},c.onBeforeExecCommand.add(l),
c.onMouseDown.add(l));c.onMouseUp.add(c.nodeChanged);c.onKeyUp.add(function(a,b){var d=b.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||d==46||d==8||e.isMac&&(d==91||d==93)||b.ctrlKey)&&c.nodeChanged()});c.onKeyDown.add(function(a,b){if(b.keyCode==n.BACKSPACE){var d=a.selection.getRng(true);if(d.collapsed){for(var c=d.startContainer,e=d.startOffset;c&&c.nodeType&&c.nodeType!=1&&c.parentNode;)c=c.parentNode;if(c&&c.parentNode&&c.parentNode.tagName==="BLOCKQUOTE"&&c.parentNode.firstChild==c&&e===
0){a.formatter.toggle("blockquote",null,c.parentNode);d.setStart(c,0);d.setEnd(c,0);a.selection.setRng(d);a.selection.collapse(false)}}}});c.onReset.add(function(){c.setContent(c.startContent,{format:"raw"})});if(f.custom_shortcuts){f.custom_undo_redo_keyboard_shortcuts&&(c.addShortcut("ctrl+z",c.getLang("undo_desc"),"Undo"),c.addShortcut("ctrl+y",c.getLang("redo_desc"),"Redo"));c.addShortcut("ctrl+b",c.getLang("bold_desc"),"Bold");c.addShortcut("ctrl+i",c.getLang("italic_desc"),"Italic");c.addShortcut("ctrl+u",
c.getLang("underline_desc"),"Underline");var p=function(b){var d=null;if(!b.altKey&&!b.ctrlKey&&!b.metaKey)return d;a(c.shortcuts,function(a){if(!(e.isMac&&a.ctrl!=b.metaKey)&&(e.isMac||a.ctrl==b.ctrlKey)&&a.alt==b.altKey&&a.shift==b.shiftKey)if(b.keyCode==a.keyCode||b.charCode&&b.charCode==a.charCode){d=a;return false}});return d};c.onKeyUp.add(function(a,b){if(p(b))return i.cancel(b)});c.onKeyPress.add(function(a,b){if(p(b))return i.cancel(b)});c.onKeyDown.add(function(a,b){var d=p(b);if(d){d.func.call(d.scope);
return i.cancel(b)}})}e.isIE&&g.bind(c.getDoc(),"controlselect",function(a){var b=c.resizeInfo,a=a.target;if(a.nodeName==="IMG"){b&&g.unbind(b.node,b.ev,b.cb);if(g.hasClass(a,"mceItemNoResize")){ev="resizestart";b=g.bind(a,"resizestart",i.cancel,i)}else{ev="resizeend";b=g.bind(a,ev,function(a){var b,a=a.target;if(b=g.getStyle(a,"width")){g.setAttrib(a,"width",b.replace(/[^0-9%]+/g,""));g.setStyle(a,"width","")}if(b=g.getStyle(a,"height")){g.setAttrib(a,"height",b.replace(/[^0-9%]+/g,""));g.setStyle(a,
"height","")}})}b=c.resizeInfo={node:a,ev:ev,cb:b}}});e.isOpera&&c.onClick.add(function(a,b){i.prevent(b)});if(f.custom_undo_redo){var v=function(){c.undoManager.typing=false;c.undoManager.add()},l=e.isGecko?"blur":"focusout";g.bind(c.getDoc(),l,function(){!c.removed&&c.undoManager.typing&&v()});c.dom.bind(c.dom.getRoot(),"dragend",function(){v()});c.onKeyUp.add(function(a,b){var d=b.keyCode;(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45||b.ctrlKey)&&v()});c.onKeyDown.add(function(a,b){var d=b.keyCode,
f;if(d==8)if((f=c.getDoc().selection)&&f.createRange&&f.createRange().item){c.undoManager.beforeChange();a.dom.remove(f.createRange().item(0));v();return i.cancel(b)}if(d>=33&&d<=36||d>=37&&d<=40||d==13||d==45){e.isIE&&d==13&&c.undoManager.beforeChange();c.undoManager.typing&&v()}else if((d<16||d>20)&&d!=224&&d!=91&&!c.undoManager.typing){c.undoManager.beforeChange();c.undoManager.typing=true;c.undoManager.add()}});c.onMouseDown.add(function(){c.undoManager.typing&&v()})}if(e.isGecko){var u=function(){var b=
c.dom.getAttribs(c.selection.getStart().cloneNode(false));return function(){var d=c.selection.getStart();if(d!==c.getBody()){c.dom.setAttrib(d,"style",null);a(b,function(a){d.setAttributeNode(a.cloneNode(true))})}}},x=function(){var a=c.selection;return!a.isCollapsed()&&a.getStart()!=a.getEnd()};c.onKeyPress.add(function(a,b){var d;if((b.keyCode==8||b.keyCode==46)&&x()){d=u();c.getDoc().execCommand("delete",false,null);d();return i.cancel(b)}});c.dom.bind(c.getDoc(),"cut",function(){var a;if(x()){a=
u();c.onKeyUp.addToTop(i.cancel,i);setTimeout(function(){a();c.onKeyUp.remove(i.cancel,i)},0)}})}},_refreshContentEditable:function(){var a,b;this._isHidden()&&(a=this.getBody(),b=a.parentNode,b.removeChild(a),b.appendChild(a),a.focus())},_isHidden:function(){var a;if(!d)return 0;a=this.selection.getSel();return!a||!a.rangeCount||0==a.rangeCount}})})(tinymce);
(function(e){var j=e.each,i=!0,g=!1;e.EditorCommands=function(c){function a(a,b,d){var c,a=a.toLowerCase();return(c=n.exec[a])?(c(a,b,d),i):g}function d(a){var b,a=a.toLowerCase();return(b=n.state[a])?b(a):-1}function b(a,b){b=b||"exec";j(a,function(a,d){j(d.toLowerCase().split(","),function(d){n[b][d]=a})})}function f(a,b,d){void 0===b&&(b=g);void 0===d&&(d=null);return c.getDoc().execCommand(a,b,d)}function h(a,b){m.toggle(a,b?{value:b}:void 0)}var p=c.dom,l=c.selection,n={state:{},exec:{},value:{}},
k=c.settings,m=c.formatter,q;e.extend(this,{execCommand:a,queryCommandState:d,queryCommandValue:function(a){var b,a=a.toLowerCase();return(b=n.value[a])?b(a):g},addCommands:b});b({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){c.undoManager.add()},"Cut,Copy,Paste":function(a){var b=c.getDoc(),d;try{f(a)}catch(g){d=i}if(d||!b.queryCommandSupported(a))e.isGecko?c.windowManager.confirm(c.getLang("clipboard_msg"),function(a){a&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html",
"_blank")}):c.windowManager.alert(c.getLang("clipboard_no_support"))},unlink:function(a){l.isCollapsed()&&l.select(l.getNode());f(a);l.collapse(g)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(b){var d=b.substring(7);c.undoManager.add();var e=l.getRng(),f=l.getNode();j(["left","center","right","full"],function(a){d!=a&&m.remove("align"+a);!tinyMCE.isIE&&("IMG"==f.nodeName&&("#document"==l.getRng().startContainer.nodeName||"#text"==l.getRng().startContainer.nodeName))&&l.setRng(e)});
h("align"+d);a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(a){var b;f(a);if(a=p.getParent(l.getNode(),"ol,ul"))b=a.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(b.nodeName)&&(q=l.getBookmark(void 0),p.split(b,a),l.moveToBookmark(q))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){h(a)},"ForeColor,HiliteColor,FontName":function(a,b,d){h(a,d)},FontSize:function(a,b,d){var c;1<=d&&7>=d&&(c=e.explode(k.font_size_style_values),d=(b=e.explode(k.font_size_classes))?
b[d-1]||d:c[d-1]||d);h(a,d)},RemoveFormat:function(a){m.remove(a)},mceBlockQuote:function(){h("blockquote")},FormatBlock:function(a,b,d){return h(d||"p")},mceCleanup:function(){var a=l.getBookmark();c.setContent(c.getContent({cleanup:i}),{cleanup:i});l.moveToBookmark(a)},mceRemoveNode:function(a,b,d){a=d||l.getNode();a!=c.getBody()&&(q=l.getBookmark(void 0),c.dom.remove(a,i),l.moveToBookmark(q))},mceSelectNodeDepth:function(a,b,d){var e=0;p.getParent(l.getNode(),function(a){if(1==a.nodeType&&e++==
d)return l.select(a),g},c.getBody())},mceSelectNode:function(a,b,d){l.select(d)},mceInsertContent:function(a,b,d){var f,g,h,k,j;f=c.parser;g=new e.html.Serializer({},c.schema);a={content:d,format:"html"};l.onBeforeSetContent.dispatch(l,a);d=a.content;-1==d.indexOf("{$caret}")&&(d+="{$caret}");d=d.replace(/\{\$caret\}/,'<span id="mce_marker" data-mce-type="bookmark">﻿</span>');!l.isCollapsed()&&l.getContent().length&&c.execCommand("mceDelete",!1,null,{skip_undo:!0});h=l.getNode();a={context:h.nodeName.toLowerCase()};
j=f.parse(d,a);b=j.lastChild;if("mce_marker"==b.attr("id")){d=b;for(b=b.prev;b;b=b.walk(!0))if(3==b.type||!p.isBlock(b.name)){b.parent.insert(d,b,"br"===b.name);break}}if(a.invalid){l.setContent('<span id="mce_marker" data-mce-type="bookmark">﻿</span>');h=c.selection.getNode();k=c.getBody();for(9==h.nodeType?h=b=k:b=h;b!==k;)h=b,b=b.parentNode;d=h==k?k.innerHTML:p.getOuterHTML(h);d=g.serialize(f.parse(d.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return g.serialize(j)})));
h==k?p.setHTML(k,d):p.setOuterHTML(h,d)}else d=g.serialize(j),b=h.firstChild,f=h.lastChild,!b||b===f&&"BR"===b.nodeName?p.setHTML(h,d):l.setContent(d);d=p.get("mce_marker");b=p.getRect(d);h=p.getViewPort(c.getWin());if(b.y+b.h>h.y+h.h||b.y<h.y||b.x>h.x+h.w||b.x<h.x)f=e.isIE?c.getDoc().documentElement:c.getBody(),f.scrollLeft=b.x,f.scrollTop=b.y-h.h+25;h=p.createRng();(b=d.previousSibling)&&3==b.nodeType?h.setStart(b,b.nodeValue.length):(h.setStartBefore(d),h.setEndBefore(d));p.remove(d);l.setRng(h);
l.onSetContent.dispatch(l,a);c.addVisual()},mceInsertRawHTML:function(a,b,d){l.setContent("tiny_mce_marker");c.setContent(c.getContent().replace(/tiny_mce_marker/g,function(){return d}))},mceSetContent:function(a,b,d){c.setContent(d)},"Indent,Outdent":function(a){var b,c,e;b=k.indentation;c=/[a-z%]+$/i.exec(b);b=parseInt(b);!d("InsertUnorderedList")&&!d("InsertOrderedList")&&!d("InsertInlineTaskList")?j(l.getSelectedBlocks(),function(d){"outdent"==a?(e=Math.max(0,parseInt(d.style.paddingLeft||0)-
b),p.setStyle(d,"paddingLeft",e?e+c:"")):p.setStyle(d,"paddingLeft",parseInt(d.style.paddingLeft||0)+b+c)}):f(a)},mceRepaint:function(){if(e.isGecko)try{q=l.getBookmark(i),l.getSel()&&l.getSel().selectAllChildren(c.getBody()),l.collapse(i),l.moveToBookmark(q)}catch(a){}},mceToggleFormat:function(a,b,d){m.toggle(d)},InsertHorizontalRule:function(){c.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){c.hasVisual=!c.hasVisual;c.addVisual()},mceReplaceContent:function(a,b,d){c.execCommand("mceInsertContent",
!1,d.replace(/\{\$selection\}/g,l.getContent({format:"text"})))},mceInsertLink:function(a,b,d){"string"==typeof d&&(d={href:d});a=p.getParent(l.getNode(),"a");d.href=d.href.replace(" ","%20");(!a||!d.href)&&m.remove("link");d.href&&m.apply("link",d,a)},selectAll:function(){var a=p.getRoot(),b=p.createRng();b.setStart(a,0);b.setEnd(a,a.childNodes.length);c.selection.setRng(b)}});b({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(a){var b="align"+a.substring(7),a=l.isCollapsed()?[l.getNode()]:
l.getSelectedBlocks(),a=e.map(a,function(a){return!!m.matchNode(a,b)});return-1!==e.inArray(a,i)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(a){return m.match(a)},mceBlockQuote:function(){return m.match("blockquote")},Outdent:function(){var a;return k.inline_styles&&((a=p.getParent(l.getStart(),p.isBlock))&&0<parseInt(a.style.paddingLeft)||(a=p.getParent(l.getEnd(),p.isBlock))&&0<parseInt(a.style.paddingLeft))?i:d("InsertUnorderedList")||d("InsertOrderedList")||d("InsertInlineTaskList")||
!k.inline_styles&&!!p.getParent(l.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList,InsertInlineTaskList":function(a){var b=p.getParent(l.getNode(),"ul,ol"),d;if(!b)return!1;d=b.tagName;return"OL"===d&&"insertorderedlist"===a||"UL"===d&&!p.hasClass(b,"inline-task-list")&&"insertunorderedlist"===a||"UL"===d&&p.hasClass(b,"inline-task-list")&&"insertinlinetasklist"===a}},"state");b({"FontSize,FontName":function(a){var b=0,d;if(d=p.getParent(l.getNode(),"span"))b="fontsize"==a?d.style.fontSize:
d.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase();return b}},"value");k.custom_undo_redo&&b({Undo:function(){c.undoManager.undo()},Redo:function(){c.undoManager.redo()}})}})(tinymce);
(function(e){var j=e.util.Dispatcher;e.UndoManager=function(i){var g,c=0,a=[],d;return g={typing:!1,onAdd:new j(g),onUndo:new j(g),onRedo:new j(g),beforeChange:function(){d=i.selection.getBookmark(2,!0)},add:function(b){var f;f=i.settings;var h,b=b||{};b.content=e.trim(i.getContent({format:"raw",no_events:1}));if((h=a[c])&&h.content==b.content)return null;a[c]&&(a[c].beforeBookmark=d);if(f.custom_undo_redo_levels&&a.length>f.custom_undo_redo_levels){for(f=0;f<a.length-1;f++)a[f]=a[f+1];a.length--;
c=a.length}b.bookmark=i.selection.getBookmark(2,!0);c<a.length-1&&(a.length=c+1);a.push(b);c=a.length-1;g.onAdd.dispatch(g,b);i.isNotDirty=0;return b},undo:function(){var b;g.typing&&(g.add(),g.typing=!1);0<c&&(b=a[--c],i.setContent(b.content,{format:"raw"}),i.selection.moveToBookmark(b.beforeBookmark),g.onUndo.dispatch(g,b));return b},redo:function(){var b;c<a.length-1&&(b=a[++c],i.setContent(b.content,{format:"raw"}),i.selection.moveToBookmark(b.bookmark),g.onRedo.dispatch(g,b));return b},clear:function(){a=
[];c=0;g.typing=!1},hasUndo:function(){return 0<c||this.typing},hasRedo:function(){return c<a.length-1&&!this.typing},ignore:function(b,d){var c=a.slice();b.call(d||i);a=c}}}})(tinymce);
(function(e){var j=e.dom.Event,i=e.isIE,g=e.isGecko,c=e.isOpera,a=!1;e.create("tinymce.ForceBlocks",{ForceBlocks:function(a){var b=a.settings,c;this.editor=a;this.dom=a.dom;c=(b.forced_root_block||"p").toLowerCase();b.element=c.toUpperCase();a.onPreInit.add(this.setup,this)},setup:function(){var a=this,b=a.editor,c=b.settings,h=b.dom,p=b.selection,l=b.schema.getBlockElements();if(c.forced_root_block){var n=function(){var a=p.getStart(),d=h.getRoot(),e=b.getDoc().body,g,j,i,n,v,u;if(a&&1===a.nodeType){for(;a!=
d;)if(a&&1===a.nodeType){if(l[a.nodeName])return;a=a.parentNode}else return;g=p.getRng();if(g.setStart)j=g.startContainer,i=g.startOffset,n=g.endContainer,v=g.endOffset;else if(g.item&&(g=b.getDoc().body.createTextRange(),g.moveToElementText(g.item(0))),tmpRng=g.duplicate(),tmpRng.collapse(!0),i=-1*tmpRng.move("character",-16777215),!tmpRng.collapsed)tmpRng=g.duplicate(),tmpRng.collapse(!1),v=-1*tmpRng.move("character",-16777215)-i;for(a=d.firstChild;a;a)3===a.nodeType||1==a.nodeType&&!l[a.nodeName]?
(u||(u=h.create(c.forced_root_block),a.parentNode.insertBefore(u,a)),d=a,a=a.nextSibling,u.appendChild(d)):(u=null,a=a.nextSibling);if(g.setStart)g.setStart(j,i),g.setEnd(n,v),p.setRng(g);else try{g=e.createTextRange(),g.moveToElementText(e),g.move("character",-16777215),g.collapse(!0),g.moveStart("character",i),0<v&&g.moveEnd("character",v),g.select()}catch(x){}b.nodeChanged()}};b.onKeyUp.add(n);b.onKeyDown.add(n);b.onClick.add(n)}c.force_br_newlines&&i&&b.onKeyPress.add(function(a,b){var d;if(13==
b.keyCode&&"LI"!=p.getNode().nodeName)return p.setContent('<br id="__" /> ',{format:"raw"}),d=h.get("__"),d.removeAttribute("id"),p.select(d),p.collapse(),j.cancel(b)});c.force_p_newlines&&(i||b.onKeyPress.add(function(b,c){13==c.keyCode&&(!c.shiftKey&&!a.insertPara(c))&&j.cancel(c)}),g&&b.onKeyDown.add(function(b,c){(8==c.keyCode||46==c.keyCode)&&!c.shiftKey&&a.backspaceDelete(c,8==c.keyCode)}));e.isWebKit&&b.onKeyPress.add(function(a,b){if(b.keyCode==13&&(b.shiftKey||c.force_br_newlines&&!h.getParent(p.getNode(),
"h1,h2,h3,h4,h5,h6,ol,ul"))){var d=p.getRng(),e,g=h.create("div",null," "),i=h.getViewPort(a.getWin());d.insertNode(e=h.create("br"));d.setStartAfter(e);d.setEndAfter(e);p.setRng(d);if(p.getSel().focusNode==e.previousSibling){p.select(h.insertAfter(h.doc.createTextNode(" "),e));p.collapse(true)}h.insertAfter(g,e);d=h.getPos(g).y;e=h.getSize(g).h;h.remove(g);g=d+e;g>i.y+i.h&&a.getWin().scrollTo(0,g-i.h);j.cancel(b)}});i&&"P"!=c.element&&(b.onKeyPress.add(function(){a.lastElm=p.getNode().nodeName}),
b.onKeyUp.add(function(b,e){var g;g=p.getNode();if(b.getBody().childNodes.length===1&&g.nodeName=="P"){g=h.rename(g,c.element);p.select(g);p.collapse();b.nodeChanged()}else if(e.keyCode==13&&!e.shiftKey&&a.lastElm!="P")if(g=h.getParent(g,"p")){h.rename(g,c.element);b.nodeChanged()}}))},getParentBlock:function(a){var b=this.dom;return b.getParent(a,b.isBlock)},insertPara:function(){function d(b,d){var e=[],g,h;b.innerHTML="";if(j.keep_styles){h=d;do/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(h.nodeName)&&
(g=h.cloneNode(a),f.setAttrib(g,"id",""),e.push(g));while(h=h.parentNode)}if(0<e.length){h=e.length-1;for(g=b;0<=h;h--)g=g.appendChild(e[h]);e[0].innerHTML=c?" ":"<br />";return e[0]}b.innerHTML=c?" ":"<br />"}var b=this.editor,f=b.dom,g=b.getDoc(),j=b.settings,i=b.selection.getSel(),n=i.getRangeAt(0),k=g.body,m,q,o,s,r,A,v,u,x,z,y,t=f.getViewPort(b.getWin());b.undoManager.beforeChange();m=g.createRange();m.setStart(i.anchorNode,i.anchorOffset);m.collapse(!0);q=g.createRange();q.setStart(i.focusNode,
i.focusOffset);q.collapse(!0);s=(o=0>m.compareBoundaryPoints(m.START_TO_END,q))?i.anchorNode:i.focusNode;r=o?i.anchorOffset:i.focusOffset;A=o?i.focusNode:i.anchorNode;i=o?i.focusOffset:i.anchorOffset;if(e.isWebKit&&s===A&&1===s.nodeType&&0<s.childNodes.length&&b.dom.is(x=s.childNodes[0<r?r-1:0],"table"))return g=f.create("p",0,'<br data-mce-bogus="1" />'),f.insertAfter(g,x),n.setStart(g,0),b.selection.setRng(n),g=b.dom.getPos(g).y,g>t.y&&b.getWin().scrollTo(0,g),b.undoManager.add(),a;if(s===A&&/^(TD|TH)$/.test(s.nodeName))return"BR"==
s.firstChild.nodeName&&f.remove(s.firstChild),0==s.childNodes.length?b.dom.add(s,j.element,null,"<br />"):(y=s.innerHTML,s.innerHTML="",b.dom.add(s,j.element,null,y)),u=b.dom.add(s,j.element,null,"<br />"),n=g.createRange(),n.selectNodeContents(u),n.collapse(1),b.selection.setRng(n),a;s==k&&(A==k&&k.firstChild&&b.dom.isBlock(k.firstChild))&&(s=A=s.firstChild,r=i=0,m=g.createRange(),m.setStart(s,0),q=g.createRange(),q.setStart(A,0));g.body.hasChildNodes()||g.body.appendChild(f.create("br"));s="HTML"==
s.nodeName?g.body:s;s="BODY"==s.nodeName?s.firstChild:s;A="HTML"==A.nodeName?g.body:A;A="BODY"==A.nodeName?A.firstChild:A;x=b.dom.getRoot();s===x&&(s=s.firstChild,r=0);A===x&&(A=A.firstChild,i=0);v=this.getParentBlock(s);u=this.getParentBlock(A);x=v?v.nodeName:j.element;if(y=this.dom.getParent(v,"li,pre"))return"LI"==y.nodeName?(b=b.selection,t=this.dom,g=y,t.isEmpty(g)?(k=t.getParent(g,"ul,ol"),t.getParent(k.parentNode,"ul,ol")||(t.split(k,g),k=t.create("p",0,'<br data-mce-bogus="1" />'),t.replace(k,
g),b.select(k,1)),AJS.Rte.showSelection(),b=a):b=!0,b):!0;if(v&&("CAPTION"==v.nodeName||/absolute|relative|fixed/gi.test(f.getStyle(v,"position",1))))x=j.element,v=null;if(u&&("CAPTION"==u.nodeName||/absolute|relative|fixed/gi.test(f.getStyle(v,"position",1))))x=j.element,u=null;if(/(TD|TABLE|TH|CAPTION)/.test(x)||v&&"DIV"==x&&/left|right/gi.test(f.getStyle(v,"float",1)))x=j.element,v=u=null;o=v&&v.nodeName==x?v.cloneNode(0):b.dom.create(x);u=u&&u.nodeName==x?u.cloneNode(0):b.dom.create(x);u.removeAttribute("id");
if(y=/^(H[1-6])$/.test(x))y=v,v=y.ownerDocument.createRange(),v.setStart(n.endContainer,n.endOffset),v.setEndAfter(y),y=0==v.cloneContents().textContent.length;y&&(u=b.dom.create(j.element));y=v=s;do{if(y==k||9==y.nodeType||this.dom.isBlock(y)||/(TD|TABLE|TH|CAPTION)/.test(y.nodeName))break;v=y}while(y=y.previousSibling?y.previousSibling:y.parentNode);y=z=A;do{if(y==k||9==y.nodeType||this.dom.isBlock(y)||/(TD|TABLE|TH|CAPTION)/.test(y.nodeName))break;z=y}while(y=y.nextSibling?y.nextSibling:y.parentNode);
v.nodeName==x?m.setStart(v,0):m.setStartBefore(v);m.setEnd(s,r);o.appendChild(m.cloneContents()||g.createTextNode(""));try{q.setEndAfter(z)}catch(B){}q.setStart(A,i);u.appendChild(q.cloneContents()||g.createTextNode(""));n=g.createRange();!v.previousSibling&&v.parentNode.nodeName==x?n.setStartBefore(v.parentNode):m.startContainer.nodeName==x&&0==m.startOffset?n.setStartBefore(m.startContainer):n.setStart(m.startContainer,m.startOffset);!z.nextSibling&&z.parentNode.nodeName==x?n.setEndAfter(z.parentNode):
n.setEnd(q.endContainer,q.endOffset);n.deleteContents();c&&b.getWin().scrollTo(0,t.y);o.firstChild&&o.firstChild.nodeName==x&&(o.innerHTML=o.firstChild.innerHTML);u.firstChild&&u.firstChild.nodeName==x&&(u.innerHTML=u.firstChild.innerHTML);f.isEmpty(o)&&d(o,s);f.isEmpty(u)&&d(u,A);c&&9.5>parseFloat(opera.version())?(n.insertNode(o),n.insertNode(u)):(n.insertNode(u),n.insertNode(o));u.normalize();o.normalize();b.selection.select(u,!0);b.selection.collapse(!0);g=b.dom.getPos(u).y;if(g<t.y||g+25>t.y+
t.h)b.getWin().scrollTo(0,g<t.y?g:g-t.h+25);b.undoManager.add();return a},backspaceDelete:function(d,b){var c=this.editor,g=c.getBody(),i,l=c.selection,n=l.getRng(),k=n.startContainer,m;if(!(d.getPreventDefault?d.getPreventDefault():d.defaultPrevented)){if(!b&&n.collapsed&&1==k.nodeType&&n.startOffset==k.childNodes.length){m=new e.dom.TreeWalker(k.lastChild,k);for(i=k.lastChild;i;i=m.prev())if(3==i.nodeType){n.setStart(i,i.nodeValue.length);n.collapse(!0);l.setRng(n);return}}if(k&&(c.dom.isBlock(k)&&
!/^(TD|TH)$/.test(k.nodeName)&&b)&&(0==k.childNodes.length||1==k.childNodes.length&&"BR"==k.firstChild.nodeName)){for(i=k;(i=i.previousSibling)&&!c.dom.isBlock(i););if(i){if(k!=g.firstChild){for(g=c.dom.doc.createTreeWalker(i,NodeFilter.SHOW_TEXT,null,a);n=g.nextNode();)i=n;n=c.getDoc().createRange();n.setStart(i,i.nodeValue?i.nodeValue.length:0);n.setEnd(i,i.nodeValue?i.nodeValue.length:0);l.setRng(n);c.dom.remove(k)}return j.cancel(d)}}if(!b&&n.collapsed&&/^(BODY)$/.test(k.nodeName)&&(k=k.childNodes[n.startOffset])&&
(c.dom.isBlock(k)&&!/^(TD|TH)$/.test(k.nodeName))&&(0==k.childNodes.length||1==k.childNodes.length&&"BR"==k.firstChild.nodeName)){i=k;for(var q;i=i.nextSibling;)if(c.dom.isBlock(i)){q=i;break}if(q&&k!=g.lastChild)return g=c.dom.doc.createTreeWalker(q,NodeFilter.SHOW_TEXT,null,a),q=g.nextNode(),n=c.getDoc().createRange(),n.setStart(q,0),n.setEnd(q,0),l.setRng(n),c.dom.remove(k),j.cancel(d)}}}})})(tinymce);
(function(e){var j=e.dom.Event,i=e.each,g=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(c,a){var d=this,a=a||{};d.editor=c;d.controls={};d.onAdd=new e.util.Dispatcher(d);d.onPostRender=new e.util.Dispatcher(d);d.prefix=a.prefix||c.id+"_";d._cls={};d.onPostRender.add(function(){i(d.controls,function(a){a.postRender()})})},get:function(c){return this.controls[this.prefix+c]||this.controls[c]},setActive:function(c,a){var d=null;(d=this.get(c))&&d.setActive(a);return d},setDisabled:function(c,
a){var d=null;(d=this.get(c))&&d.setDisabled(a);return d},add:function(c){c&&(this.controls[c.id]=c,this.onAdd.dispatch(c,this));return c},createControl:function(c){var a,d=this,b=d.editor;i(b.plugins,function(b){if(b.createControl&&(a=b.createControl(c,d)))return!1});switch(c){case "|":case "separator":return d.createSeparator()}return!a&&b.buttons&&(a=b.buttons[c])?d.createButton(c,a):d.add(a)},createDropMenu:function(c,a,d){var b=this.editor,f,h,j,a=g({"class":"mceDropDown",constrain:b.settings.constrain_menus},
a);a["class"]=a["class"]+" "+b.getParam("skin")+"Skin";if(j=b.getParam("skin_variant"))a["class"]+=" "+b.getParam("skin")+"Skin"+j.substring(0,1).toUpperCase()+j.substring(1);c=this.prefix+c;f=this.controls[c]=new (d||this._cls.dropmenu||e.ui.DropMenu)(c,a);f.onAddItem.add(function(a,d){var c=d.settings;c.title=b.getLang(c.title,c.title);c.onclick||(c.onclick=function(){c.cmd&&b.execCommand(c.cmd,c.ui||!1,c.value)})});b.onRemove.add(function(){f.destroy()});e.isIE&&(f.onShowMenu.add(function(){b.focus();
h=b.selection.getBookmark(1)}),f.onHideMenu.add(function(){h&&(b.selection.moveToBookmark(h),h=0)}));return this.add(f)},createListBox:function(c,a,d){var b=this.editor;if(this.get(c))return null;a.title=b.translate(a.title);a.scope=a.scope||b;a.onselect||(a.onselect=function(d){b.execCommand(a.cmd,a.ui||!1,d||a.value)});a=g({title:a.title,"class":"mce_"+c,scope:a.scope,control_manager:this},a);c=this.prefix+c;b.settings.use_native_selects||b.settings.use_accessible_selects&&!e.isGecko?d=new e.ui.NativeListBox(c,
a):(d=d||this._cls.listbox||e.ui.ListBox,d=new d(c,a,b));this.controls[c]=d;e.isWebKit&&d.onPostRender.add(function(a,d){j.add(d,"mousedown",function(){b.bookmark=b.selection.getBookmark(1)});j.add(d,"focus",function(){b.selection.moveToBookmark(b.bookmark);b.bookmark=null})});d.hideMenu&&b.onMouseDown.add(d.hideMenu,d);return this.add(d)},createButton:function(c,a,d){var b=this.editor;if(this.get(c))return null;a.title=b.translate(a.title);a.label=b.translate(a.label);a.scope=a.scope||b;!a.onclick&&
!a.menu_button&&(a.onclick=function(){b.execCommand(a.cmd,a.ui||!1,a.value)});a=g({title:a.title,"class":"mce_"+c,unavailable_prefix:b.getLang("unavailable",""),scope:a.scope,control_manager:this},a);c=this.prefix+c;a.menu_button?(d=d||this._cls.menubutton||e.ui.MenuButton,c=new d(c,a,b),b.onMouseDown.add(c.hideMenu,c)):(d=this._cls.button||e.ui.Button,c=new d(c,a,b));return this.add(c)},createMenuButton:function(c,a,d){a=a||{};a.menu_button=1;return this.createButton(c,a,d)},createSplitButton:function(c,
a,d){var b=this.editor;if(this.get(c))return null;a.title=b.translate(a.title);a.scope=a.scope||b;a.onclick||(a.onclick=function(d){b.execCommand(a.cmd,a.ui||!1,d||a.value)});a.onselect||(a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)});a=g({title:a.title,"class":"mce_"+c,scope:a.scope,control_manager:this},a);c=this.prefix+c;c=this.add(new (d||this._cls.splitbutton||e.ui.SplitButton)(c,a,b));b.onMouseDown.add(c.hideMenu,c);return c},createColorSplitButton:function(c,a,d){var b=
this.editor,f,h;if(this.get(c))return null;a.title=b.translate(a.title);a.scope=a.scope||b;a.onclick||(a.onclick=function(d){e.isIE&&(h=b.selection.getBookmark(1));b.execCommand(a.cmd,a.ui||!1,d||a.value)});a.onselect||(a.onselect=function(d){b.execCommand(a.cmd,a.ui||false,d||a.value)});a=g({title:a.title,"class":"mce_"+c,menu_class:b.getParam("skin")+"Skin",scope:a.scope,more_colors_title:b.getLang("more_colors")},a);c=this.prefix+c;f=new (d||this._cls.colorsplitbutton||e.ui.ColorSplitButton)(c,
a,b);b.onMouseDown.add(f.hideMenu,f);b.onRemove.add(function(){f.destroy()});e.isIE&&(f.onShowMenu.add(function(){b.focus();h=b.selection.getBookmark(1)}),f.onHideMenu.add(function(){if(h){b.selection.moveToBookmark(h);h=0}}));return this.add(f)},createToolbar:function(c,a,d){c=this.prefix+c;a=new (d||this._cls.toolbar||e.ui.Toolbar)(c,a,this.editor);return this.get(c)?null:this.add(a)},createToolbarGroup:function(c,a,d){c=this.prefix+c;a=new (d||this._cls.toolbarGroup||e.ui.ToolbarGroup)(c,a,this.editor);
return this.get(c)?null:this.add(a)},createSeparator:function(c){return new (c||this._cls.separator||e.ui.Separator)},setControlType:function(c,a){return this._cls[c.toLowerCase()]=a},destroy:function(){i(this.controls,function(c){c.destroy()});this.controls=null}})})(tinymce);
(function(e){var j=e.util.Dispatcher,i=e.each,g=e.isIE,c=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(a){this.editor=a;this.onOpen=new j(this);this.onClose=new j(this);this.params={};this.features={}},open:function(a,d){var b="",f="modal"==this.editor.settings.dialog_type,h,j,l;l=e.DOM.getViewPort();a=a||{};d=d||{};j=c?l.w:screen.width;l=c?l.h:screen.height;a.name=a.name||"mc_"+(new Date).getTime();a.width=parseInt(a.width||320);a.height=parseInt(a.height||240);a.resizable=!0;
a.left=a.left||parseInt(j/2)-a.width/2;a.top=a.top||parseInt(l/2)-a.height/2;d.inline=!1;d.mce_width=a.width;d.mce_height=a.height;d.mce_auto_focus=a.auto_focus;f&&g&&(a.center=!0,a.help=!1,a.dialogWidth=a.width+"px",a.dialogHeight=a.height+"px",a.scroll=a.scrollbars||!1);i(a,function(a,d){e.is(a,"boolean")&&(a=a?"yes":"no");/^(name|url)$/.test(d)||(b=g&&f?b+((b?";":"")+d+":"+a):b+((b?",":"")+d+"="+a))});this.features=a;this.params=d;this.onOpen.dispatch(this,a,d);j=a.url||a.file;j=e._addVer(j);try{g&&
f?(h=1,window.showModalDialog(j,window,b)):h=window.open(j,a.name,b)}catch(n){}h||alert(this.editor.getLang("popup_blocked"))},close:function(a){a.close();this.onClose.dispatch(this)},createInstance:function(a,d,b,c,g,j){return new (e.resolve(a))(d,b,c,g,j)},confirm:function(a,d,b,c){c=c||window;d.call(b||this,c.confirm(this._decode(this.editor.getLang(a,a))))},alert:function(a,d,b,c){c=c||window;c.alert(this._decode(this.editor.getLang(a,a)));d&&d.call(b||this)},resizeBy:function(a,d,b){b.resizeBy(a,
d)},_decode:function(a){return e.DOM.decode(a).replace(/\\n/g,"\n")}})})(tinymce);
(function(e){e.Formatter=function(j){function i(a){return 1===a.nodeType&&"_mce_caret"===a.id}function g(a){return a?z[a]:z}function c(a,b){a&&("string"!==typeof a?y(a,function(a,b){c(b,a)}):(b=b.length?b:[b],y(b,function(a){a.deep===N&&(a.deep=!a.selector);a.split===N&&(a.split=!a.selector||a.inline);a.remove===N&&(a.selector&&!a.inline)&&(a.remove="none");a.selector&&a.inline&&(a.mixed=!0,a.block_expand=!0);"string"===typeof a.classes&&(a.classes=a.classes.split(/\s+/))}),z[a]=b))}function a(a,
d,c){function f(a,b){b=b||I;if(a){if(b.onformat)b.onformat(a,b,d,c);y(b.styles,function(b,c){t.setStyle(a,c,n(b,d))});y(b.attributes,function(b,c){t.setAttrib(a,c,n(b,d))});y(b.classes,function(b){b=n(b,d);t.hasClass(a,b)||t.addClass(a,b)})}}function l(){var a=j.selection.getRng(),b=a.startContainer,d=a.endContainer;if(b!=d&&0==a.endOffset){a:{d=new G(d);for(c=d.current();c;c=d.prev())if(1<c.childNodes.length||c==b){b=c;break a}b=void 0}a.setEnd(b,3==b.nodeType?b.length:b.childNodes.length)}return a}
function m(c,g,j){var l=[],n,q;n=I.inline||I.block;q=t.create(n);f(q);K.walk(c,function(c){function g(c){var k=c.nodeName.toLowerCase(),m=c.parentNode.nodeName.toLowerCase(),o;if(p(k,"br"))h=0,I.block&&t.remove(c);else if(I.wrapper&&b(c,a,d))h=0;else if(I.block&&!I.wrapper&&/^(h[1-6]|p|div|pre|address|dl|dt|dd)$/.test(k))c=t.rename(c,n),f(c),l.push(c),h=0;else{if(I.selector&&(y(v,function(a){!("collapsed"in a&&a.collapsed!==R)&&(t.is(c,a.selector)&&!i(c))&&(f(c,a),o=!0)}),!I.inline||o)){h=0;return}C(n,
k)&&C(m,n)&&(j||!(3===c.nodeType&&1===c.nodeValue.length&&65279===c.nodeValue.charCodeAt(0)))&&!i(c)?(h||(h=q.cloneNode(H),c.parentNode.insertBefore(h,c),l.push(h)),h.appendChild(c)):(h=0,y(e.grep(c.childNodes),g),h=0)}}var h;y(c,g)});!1===I.wrap_links&&y(l,function(a){function b(a){var d,c,f;if("A"===a.nodeName){c=q.cloneNode(H);l.push(c);f=e.grep(a.childNodes);for(d=0;d<f.length;d++)c.appendChild(f[d]);a.appendChild(c)}y(e.grep(a.childNodes),b)}b(a)});y(l,function(c){var e,g=0;y(c.childNodes,function(a){!k(a)&&
!r(a)&&g++});e=g;if((1<l.length||!D(c))&&0===e)t.remove(c,1);else if(I.inline||I.wrapper){if(!I.exact&&1===e){e=c;var j,n;y(e.childNodes,function(a){if(1==a.nodeType&&!r(a)&&!i(a))return j=a,H});j&&h(j,I)&&(n=j.cloneNode(H),f(n),t.replace(n,e,F),t.remove(j,1));c=n||e}y(v,function(a){y(t.select(a.inline,c),function(b){var c;if(!1===a.wrap_links){c=b.parentNode;do if("A"===c.nodeName)return;while(c=c.parentNode)}o(a,d,b,a.exact?b:null)})});if(b(c.parentNode,a,d))return t.remove(c,1),c=0,F;I.merge_with_parents&&
t.getParent(c.parentNode,function(e){if(b(e,a,d))return t.remove(c,1),c=0,F});c&&!1!==I.merge_siblings&&(c=A(s(c),c),c=A(c,s(c,F)))}})}var v=g(a),I=v[0],z,R=B.isCollapsed();if(I)if(c)c.nodeType?(z=t.createRng(),z.setStartBefore(c),z.setEndAfter(c),m(q(z,v),null,!0)):m(c,null,!0);else if(!R||!I.inline||t.select("td.mceSelected,th.mceSelected").length){if(!t.select("td.mceSelected.numberingColumn").length){var S=j.selection.getNode();j.selection.setRng(l());z=B.getBookmark();m(q(B.getRng(F),v),z);if(I.styles&&
(I.styles.color||I.styles.textDecoration))e.walk(S,P,"childNodes"),P(S);B.moveToBookmark(z);x(B.getRng(F));j.nodeChanged()}}else u("apply",a,d)}function d(a,d,c){function h(a){var b,c,f;b=e.grep(a.childNodes);c=0;for(f=p.length;c<f&&!o(p[c],d,a,a);c++);if(s.deep){c=0;for(f=b.length;c<f;c++)h(b[c])}}function k(c){var e;y(t.getParents(c.parentNode,void 0,t.getRoot()).reverse(),function(c){var f;!e&&"_start"!=c.id&&"_end"!=c.id&&(f=b(c,a,d))&&!1!==f.split&&(e=c)});return e}function i(a,b,c,e){var f,
g,h,k,j,l;if(a){l=a.parentNode;for(f=b.parentNode;f&&f!=l;f=f.parentNode){g=f.cloneNode(H);for(j=0;j<p.length;j++)if(o(p[j],d,g,g)){g=0;break}g&&(h&&g.appendChild(h),k||(k=g),h=g)}if(e&&(!s.mixed||!D(a)))b=t.split(a,b);h&&(c.parentNode.insertBefore(h,c),k.appendChild(c))}return b}function l(a){var b=t.get(a?"_start":"_end"),d=b[a?"firstChild":"lastChild"];r(d)&&(d=d[a?"firstChild":"lastChild"]);t.remove(b,!0);return d}function n(a){var b,d,c,a=q(a,p,F);s.split&&(b=v(a,F),d=v(a),b!=d?(c=b.firstChild,
"TD"==b.nodeName&&c&&(b=c),b=m(b,"span",{id:"_start","data-mce-type":"bookmark"}),d=m(d,"span",{id:"_end","data-mce-type":"bookmark"}),i(k(b),b,b,!0),i(k(d),d,d,!0),b=l(F),d=l()):b=d=i(k(b),b,b,!0),a.startContainer=b.parentNode,a.startOffset=E(b),a.endContainer=d.parentNode,a.endOffset=E(d)+1);K.walk(a,function(a){y(a,function(a){h(a);a.nodeType===1&&(j.dom.getStyle(a,"text-decoration")==="underline"&&a.parentNode&&O(a.parentNode)==="underline")&&o({deep:false,exact:true,inline:"span",styles:{textDecoration:"underline"}},
null,a)})})}var p=g(a),s=p[0],z;c?c.nodeType?(z=t.createRng(),z.setStartBefore(c),z.setEndAfter(c),n(z)):n(c):!B.isCollapsed()||!s.inline||t.select("td.mceSelected,th.mceSelected").length?t.select("td.mceSelected.numberingColumn").length||(c=B.getBookmark(),n(B.getRng(F)),B.moveToBookmark(c),s.inline&&f(a,d,B.getStart())&&x(B.getRng(!0)),j.nodeChanged()):u("remove",a,d)}function b(a,b,d,c){function e(a,b,f){var g,h,k=b[f];if(b.onmatch)return b.onmatch(a,b,f);if(k)if(k.length===N)for(g in k){if(k.hasOwnProperty(g)&&
(h="attributes"===f?t.getAttrib(a,g):l(a,g),c&&!h&&!b.exact||(!c||b.exact)&&!p(h,n(k[g],d))))return}else for(g=0;g<k.length&&!("attributes"===f?t.getAttrib(a,k[g]):l(a,k[g]));g++);return b}var f=g(b),k;if(f&&a)for(k=0;k<f.length;k++)if(b=f[k],h(a,b)&&e(a,b,"attributes")&&e(a,b,"styles")){if(f=b.classes)for(k=0;k<f.length;k++)if(!t.hasClass(a,f[k]))return;return b}}function f(a,d,c){function e(c){c=t.getParent(c,function(c){return!!b(c,a,d,!0)});return b(c,a,d)}var f;if(c)return e(c);c=B.getNode();
if(e(c))return F;f=B.getStart();return f!=c&&e(f)?F:H}function h(a,b){if(p(a,b.inline)||p(a,b.block))return F;if(b.selector)return t.is(a,b.selector)}function p(a,b){a=a||"";b=b||"";a=""+(a.nodeName||a);b=""+(b.nodeName||b);return a.toLowerCase()==b.toLowerCase()}function l(a,b){var d=t.getStyle(a,b);if("color"==b||"backgroundColor"==b)d=t.toHex(d);"fontWeight"==b&&700==d&&(d="bold");return""+d}function n(a,b){"string"!=typeof a?a=a(b):b&&(a=a.replace(/%(\w+)/g,function(a,d){return b[d]||a}));return a}
function k(a){return a&&3===a.nodeType&&/^([\t \r\n]+|)$/.test(a.nodeValue)}function m(a,b,d){b=t.create(b,d);a.parentNode.insertBefore(b,a);b.appendChild(a);return b}function q(a,b,d){function c(a){var d,e,j;d=e=a?f:h;j=a?"previousSibling":"nextSibling";root=t.getRoot();if(3==d.nodeType&&!k(d)&&(a?0<g:i<d.nodeValue.length))return d;for(;;){if(!b[0].block_expand&&D(e))return e;for(a=e[j];a;a=a[j])if(!r(a)&&!k(a))return e;if(e.parentNode==root){d=e;break}e=e.parentNode}return d}function e(a,b){for(b===
N&&(b=3===a.nodeType?a.length:a.childNodes.length);a&&a.hasChildNodes();)(a=a.childNodes[b])&&(b=3===a.nodeType?a.length:a.childNodes.length);return{node:a,offset:b}}var f=a.startContainer,g=a.startOffset,h=a.endContainer,i=a.endOffset,l;1==f.nodeType&&f.hasChildNodes()&&(l=f.childNodes.length-1,f=f.childNodes[g>l?l:g],3==f.nodeType&&(g=0));1==h.nodeType&&h.hasChildNodes()&&(l=h.childNodes.length-1,h=h.childNodes[i>l?l:i-1],3==h.nodeType&&(i=h.nodeValue.length));if(r(f.parentNode)||r(f))f=r(f)?f:
f.parentNode,f=f.nextSibling||f,3==f.nodeType&&(g=0);if(r(h.parentNode)||r(h))h=r(h)?h:h.parentNode,h=h.previousSibling||h,3==h.nodeType&&(i=h.length);if(b[0].inline){if(a.collapsed){var n=function(a,b,c){function e(a,b){var f,g;g=a.nodeValue;typeof b=="undefined"&&(b=c?g.length:0);if(c){f=g.lastIndexOf(" ",b);g=g.lastIndexOf(" ",b);f=f>g?f:g;f!==-1&&!d&&f++}else{f=g.indexOf(" ",b);g=g.indexOf(" ",b);f=f!==-1&&(g===-1||f<g)?f:g}return f}var f,g;if(a.nodeType===3){b=e(a,b);if(b!==-1)return{container:a,
offset:b};g=a}for(a=new G(a,t.getParent(a,D)||j.getBody());f=a[c?"prev":"next"]();)if(f.nodeType===3){g=f;b=e(f);if(b!==-1)return{container:f,offset:b}}else if(D(f))break;if(g){b=c?0:g.length;return{container:g,offset:b}}};if(l=n(f,g,!0))f=l.container,g=l.offset;if(l=n(h,i))h=l.container,i=l.offset}l=e(h,i);if(l.node){for(;l.node&&0===l.offset&&l.node.previousSibling;)l=e(l.node.previousSibling);l.node&&(0<l.offset&&3===l.node.nodeType&&" "===l.node.nodeValue.charAt(l.offset-1))&&1<l.offset&&(h=l.node,
h.splitText(l.offset-1))}}if(b[0].inline||b[0].block_expand){if(!b[0].inline||3!=f.nodeType||0===g)f=c(!0);if(!b[0].inline||3!=h.nodeType||i===h.nodeValue.length)h=c()}b[0].selector&&(b[0].expand!==H&&!b[0].inline)&&(l=function(d,c){var e,f,g,h;d.nodeType==3&&(d.nodeValue.length==0&&d[c])&&(d=d[c]);e=t.getParents(d,void 0,t.getRoot());for(f=0;f<e.length;f++)for(g=0;g<b.length;g++){h=b[g];if(!("collapsed"in h&&h.collapsed!==a.collapsed)&&t.is(e[f],h.selector))return e[f]}return d},f=l(f,"previousSibling"),
h=l(h,"nextSibling"));if(b[0].block||b[0].selector)l=function(a,d){var c;if(a==t.getRoot())return a;b[0].wrapper||(c=t.getParent(a,b[0].block));c||(c=t.getParent(a.nodeType==3?a.parentNode:a,D));c&&b[0].wrapper&&(c=t.getParents(c,"ul,ol",t.getRoot()).reverse()[0]||c);if(!c)for(c=a;c[d]&&!D(c[d]);){c=c[d];if(p(c,"br"))break}return c||a},f=l(f,"previousSibling"),h=l(h,"nextSibling"),b[0].block&&(D(f)||(f=c(!0)),D(h)||(h=c()));1==f.nodeType&&(g=E(f),f=f.parentNode);1==h.nodeType&&(i=E(h)+1,h=h.parentNode);
return{startContainer:f,startOffset:g,endContainer:h,endOffset:i}}function o(a,b,d,c){var f,g,k;if(!h(d,a))return H;if("all"!=a.remove){y(a.styles,function(a,e){a=n(a,b);"number"===typeof e&&(e=a,c=0);(!c||p(l(c,e),a))&&t.setStyle(d,e,"");k=1});k&&""==t.getAttrib(d,"style")&&(d.removeAttribute("style"),d.removeAttribute("data-mce-style"));y(a.attributes,function(a,e){var f,a=n(a,b);if(typeof e==="number"){e=a;c=0}if(!c||p(t.getAttrib(c,e),a)){if(e=="class")if(a=t.getAttrib(d,e)){f="";y(a.split(/\s+/),
function(a){/mce\w+/.test(a)&&(f=f+((f?" ":"")+a))});if(f){t.setAttrib(d,e,f);return}}e=="class"&&d.removeAttribute("className");M.test(e)&&d.removeAttribute("data-mce-"+e);d.removeAttribute(e)}});y(a.classes,function(a){a=n(a,b);(!c||t.hasClass(c,a))&&t.removeClass(d,a)});g=t.getAttribs(d);for(f=0;f<g.length;f++)if(0!==g[f].nodeName.indexOf("_"))return H}if("none"!=a.remove){f=d.parentNode;var j;a.block&&(J?f==t.getRoot()&&(!a.list_block||!p(d,a.list_block))&&y(e.grep(d.childNodes),function(a){C(J,
a.nodeName.toLowerCase())?j?j.appendChild(a):j=m(a,J):j=0}):(g=function(a,b,d){a=s(a,b,d);return!a||"BR"==a.nodeName||D(a)},D(d)&&!D(f)&&(!g(d,H)&&!g(d.firstChild,F,1)&&d.insertBefore(t.create("br"),d.firstChild),!g(d,F)&&!g(d.lastChild,H,1)&&d.appendChild(t.create("br")))));(!a.selector||!a.inline||p(a.inline,d))&&t.remove(d,1);return F}}function s(a,b,d){if(a){b=b?"nextSibling":"previousSibling";for(a=d?a:a[b];a;a=a[b])if(1==a.nodeType||!k(a))return a}}function r(a){return a&&1==a.nodeType&&"bookmark"==
a.getAttribute("data-mce-type")}function A(a,b){var d,c;if(a&&b){c=function(a,b){for(d=a;d&&!(3==d.nodeType&&0!==d.nodeValue.length);d=d[b])if(1==d.nodeType&&!r(d))return d;return a};a=c(a,"previousSibling");b=c(b,"nextSibling");c=a;var f=b,g=function(a){var b={};y(t.getAttribs(a),function(d){d=d.nodeName.toLowerCase();0!==d.indexOf("_")&&"style"!==d&&(b[d]=t.getAttrib(a,d))});return b},h=function(a,b){var d,c;for(c in a)if(a.hasOwnProperty(c)){d=b[c];if(d===N||a[c]!=d)return H;delete b[c]}for(c in b)if(b.hasOwnProperty(c))return H;
return F};if(c.nodeName!=f.nodeName||!h(g(c),g(f))||!h(t.parseStyle(t.getAttrib(c,"style")),t.parseStyle(t.getAttrib(f,"style")))?H:F){for(d=a.nextSibling;d&&d!=b;)c=d,d=d.nextSibling,a.appendChild(c);t.remove(b);y(e.grep(b.childNodes),function(b){a.appendChild(b)});return a}}return b}function v(a,b){var d,c,e;d=a[b?"startContainer":"endContainer"];c=a[b?"startOffset":"endOffset"];1==d.nodeType&&(e=d.childNodes.length-1,!b&&c&&c--,d=d.childNodes[c>e?e:c]);3===d.nodeType&&(b&&c>=d.nodeValue.length)&&
(d=(new G(d,j.getBody())).next()||d);3===d.nodeType&&(!b&&0==c)&&(d=(new G(d,j.getBody())).prev()||d);return d}function u(c,f,h){function k(a){var b=t.create("span",{id:o,"data-mce-bogus":!0,style:s?"color:red":""});a&&b.appendChild(j.getDoc().createTextNode(m));return b}function i(a,b){for(;a;){if(3===a.nodeType&&a.nodeValue!==m||1<a.childNodes.length)return!1;b&&1===a.nodeType&&b.push(a);a=a.firstChild}return!0}function l(a){for(;a;){if(a.id===o)return a;a=a.parentNode}}function n(a){var b;if(a){b=
new G(a,a);for(a=b.current();a;a=b.next())if(3===a.nodeType)return a}}function p(a,b){var d,c;if(a)c=B.getRng(!0),i(a)?(!1!==b&&(c.setStartBefore(a),c.setEndBefore(a)),t.remove(a)):(d=n(a),d.nodeValue.charAt(0)===L&&d.deleteData(0,1),t.remove(a,1)),B.setRng(c);else if(a=l(B.getStart()),!a)for(;a=t.get(o);)p(a,!1)}var m,o="_mce_caret",s=j.settings.caret_debug;m=e.isGecko?"​":L;self._hasCaretEvents||(j.onBeforeGetContent.addToTop(function(){var a=[],b;if(i(l(B.getStart()),a))for(b=a.length;b--;)t.setAttrib(a[b],
"data-mce-bogus","1")}),e.each(["onMouseUp","onKeyUp"],function(a){j[a].addToTop(function(){p()})}),j.onKeyDown.addToTop(function(a,b){var d=b.keyCode;(8==d||37==d||39==d)&&p(l(B.getStart()))}),self._hasCaretEvents=!0);if("apply"==c){var r,v,u,x;r=B.getRng(!0);c=r.startOffset;x=r.startContainer.nodeValue;(v=l(B.getStart()))&&(u=n(v));if(x&&0<c&&c<x.length&&/\w/.test(x.charAt(c))&&/\w/.test(x.charAt(c-1)))v=B.getBookmark(),r.collapse(!0),r=q(r,g(f)),r=K.split(r),a(f,h,r),B.moveToBookmark(v);else{if(!v||
u.nodeValue!==m)v=k(!0),u=v.firstChild,r.insertNode(v),c=1;a(f,h,v);B.setCursorLocation(u,c)}}else{x=B.getRng(!0);var z,y,c=[];z=x.startContainer;y=x.startOffset;u=z;if(3==z.nodeType){if(y!=z.nodeValue.length||z.nodeValue===m)v=!0;u=u.parentNode}for(;u;){if(b(u,f,h)){r=u;break}u.nextSibling&&(v=!0);c.push(u);u=u.parentNode}if(r)if(v)r=B.getBookmark(),x.collapse(!0),x=q(x,g(f),!0),x=K.split(x),d(f,h,x),B.moveToBookmark(r);else{u=h=k();for(f=c.length-1;0<=f;f--)u.appendChild(c[f].cloneNode(!1)),u=u.firstChild;
u.appendChild(t.doc.createTextNode(m));u=u.firstChild;t.insertAfter(h,r);B.setCursorLocation(u,1)}}}function x(a){var b=a.startContainer,d=a.startOffset,c;3==b.nodeType&&d>=b.nodeValue.length&&(b=b.parentNode,d=E(b)+1);if(1==b.nodeType){c=b.childNodes;b=c[Math.min(d,c.length-1)];b=new G(b,t.getParent(b,t.isBlock));d>c.length-1&&b.next();for(d=b.current();d;d=b.next())if(3==d.nodeType&&!k(d)){b=t.create("a",null,L);d.parentNode.insertBefore(b,d);a.setStart(d,0);B.setRng(a);t.remove(b);break}}}var z=
{},y=e.each,t=j.dom,B=j.selection,G=e.dom.TreeWalker,K=new e.dom.RangeUtils(t),C=j.schema.isValidChild,D=t.isBlock,J=j.settings.forced_root_block,E=t.nodeIndex,L="﻿",M=/^(src|href|style)$/,H=!1,F=!0,N,O=function(a){var b;j.dom.getParent(a,function(a){return(b=j.dom.getStyle(a,"text-decoration"))&&"none"!==b});return b},P=function(a){var b;1===a.nodeType&&(a.parentNode&&1===a.parentNode.nodeType)&&(b=O(a.parentNode),j.dom.getStyle(a,"color")&&b?j.dom.setStyle(a,"text-decoration",b):j.dom.getStyle(a,
"textdecoration")===b&&j.dom.setStyle(a,"text-decoration",null))};e.extend(this,{get:g,register:c,apply:a,remove:d,toggle:function(b,c,e){var h=g(b);f(b,c,e)&&(!("toggle"in h[0])||h[0].toggle)?d(b,c,e):a(b,c,e)},match:f,matchAll:function(a,d){var c,e=[],f={};c=B.getStart();t.getParent(c,function(c){var g,h;for(g=0;g<a.length;g++)h=a[g],!f[h]&&b(c,h,d)&&(f[h]=!0,e.push(h))});return e},matchNode:b,canApply:function(a){var a=g(a),b,d,c,e;if(a){b=B.getStart();b=t.getParents(b,void 0,t.getRoot());for(c=
a.length-1;0<=c;c--){e=a[c].selector;if(!e)return F;for(d=b.length-1;0<=d;d--)if(t.is(b[d],e))return F}}return H}})}})(tinymce);
tinymce.onAddEditor.add(function(e,j){var i,g,c,a=j.settings;if(a.inline_styles){g=e.explode(a.font_size_legacy_values);var d=function(a,b){e.each(b,function(b,d){b&&c.setStyle(a,d,b)});c.rename(a,"span")};i={font:function(a,b){d(b,{backgroundColor:b.style.backgroundColor,color:b.color,fontFamily:b.face,fontSize:g[parseInt(b.size)-1]})},strike:function(a,b){d(b,{textDecoration:"line-through"})}};var b=function(b,d){c=b.dom;a.convert_fonts_to_spans&&e.each(c.select("font,strike",d.node),function(a){i[a.nodeName.toLowerCase()](j.dom,
a)})};j.onPreProcess.add(b);j.onSetContent.add(b);j.onInit.add(function(){j.selection.onSetContent.add(b)})}});
(function(e){function j(a,b){return a.getParam(b,c[b])}function i(a,b){a.is("ul.inline-task-list")?b.each(function(){var a=e(this);a.attr("data-inline-task-id")||a.attr("data-inline-task-id","")}):b.removeAttr("data-inline-task-id").removeAttr("data-pasted-task")}var g=tinymce.each,c={paste_auto_cleanup_on_paste:!0,paste_enable_default_filters:!0,paste_block_drop:!1,paste_retain_style_properties:"none",paste_strip_class_attributes:"mso",paste_remove_spans:!1,paste_remove_styles:!1,paste_remove_styles_if_webkit:!1,
paste_convert_middot_lists:!0,paste_convert_headers_to_strong:!1,paste_dialog_width:"450",paste_dialog_height:"400",paste_text_use_dialog:!1,paste_text_sticky:!1,paste_text_sticky_default:!1,paste_text_notifyalways:!1,paste_text_linebreaktype:"combined",paste_text_replacements:[[/\u2026/g,"..."],[/[\x93\x94\u201c\u201d]/g,'"'],[/[\x60\x91\x92\u2018\u2019]/g,"'"]]},a;tinymce.create("tinymce.plugins.AtlassianEditorPaste",{init:function(d,b){function c(a,b){var e=d.dom,f;l.onPreProcess.dispatch(l,a);
a.node=e.create("div",0,a.content);tinymce.isGecko&&(f=d.selection.getRng(!0),f.startContainer==f.endContainer&&3===f.startContainer.nodeType&&1===a.node.childNodes.length&&(/^(p|h[1-6]|pre)$/i.test(a.node.firstChild.nodeName)&&-1===a.content.indexOf("__MCE_ITEM__"))&&e.remove(a.node.firstChild,!0));l.onPostProcess.dispatch(l,a);a.content=d.serializer.serialize(a.node,{getInner:1,forced_root_block:""});!b&&d.pasteAsPlainText?(l._insertPlainText(a.content),j(d,"paste_text_sticky")||(d.pasteAsPlainText=
!1,d.controlManager.setActive("pastetext",!1))):l._insert(a.content);tinymce.isGecko&&d.dom.getRoot().focus()}function h(a){if(a){var b=a.firstChild;b&&("DIV"===b.nodeName&&b.style.marginTop&&b.style.backgroundColor)&&d.dom.remove(b,1);tinymce.isWebKit&&g(d.dom.select("span.Apple-style-span",a),function(a){d.dom.removeClass(a,"Apple-style-span")});tinymce.isWebKit&&g(d.dom.select("br.Apple-interchange-newline",a),function(a){d.dom.remove(a)});g(d.dom.select("br[data-mce-bogus]",a),function(a){d.dom.remove(a)});
g(d.dom.select("meta[charset]",a),function(a){d.dom.remove(a)})}}function i(a){var b,j,p,o,s=d.selection,r=d.dom;p=d.getBody();var A,v;d.undoManager.add();if(function(a){if(!a.clipboardData||-1==e.inArray("text/html",a.clipboardData.types||[]))return!1;var a=a.clipboardData.getData("text/html"),b;if(!a||!e.browser.webkit)return!1;b=l.repair(a);if(b==a)return!1;a=l.parse(b,d.getDoc());b=e("<div></div>");b.append(a);h(b[0]);c({content:b.html()});return!0}(a))e.Event(a).preventDefault();else{if(a.clipboardData||
r.doc.dataTransfer)if(A=(a.clipboardData||r.doc.dataTransfer).getData("Text"),d.pasteAsPlainText){a.preventDefault();c({content:r.encode(A).replace(/\r?\n/g,"<br />")});return}if(!r.get("_mcePaste"))if(v=e(d.selection.getStart()).closest("[data-macro-body-type='PLAIN_TEXT']").length,o=p,"true"!=p.contentEditable&&(o=r.getParent(d.selection.getStart(),'[contenteditable="true"]',p)),b=r.add(o,"div",{id:"_mcePaste","class":"mcePaste","data-mce-bogus":"1"},"﻿﻿"),p!=d.getDoc().body?p=r.getPos(d.selection.getStart(),
p).y:(p=r.getViewPort(d.getWin()),p=p.y+parseInt(p.h/2,10)),r.setStyles(b,{position:"absolute",left:tinymce.isGecko?-40:0,top:p-25,width:1,height:1,overflow:"hidden"}),tinymce.isIE)if(o=s.getRng(),p=r.doc.body.createTextRange(),p.moveToElementText(b),p.execCommand("Paste"),r.remove(b),"﻿﻿"===b.innerHTML)d.execCommand("mcePasteWord"),a.preventDefault();else return s.setRng(o),s.setContent(""),setTimeout(function(){c({content:b.innerHTML})},0),tinymce.dom.Event.cancel(a);else{var u=function(a){a.preventDefault()};
r.bind(d.getDoc(),"mousedown",u);r.bind(d.getDoc(),"keydown",u);j=d.selection.getRng();b=b.firstChild;p=d.getDoc().createRange();p.setStart(b,0);p.setEnd(b,2);s.setRng(p);window.setTimeout(function(){var a="",b;if(r.select("div.mcePaste > div.mcePaste").length)a=v?"<p>"+r.encode(A).replace(/\r?\n/g,"<br />")+"</p>":"<p>"+r.encode(A).replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br />")+"</p>";else{b=r.select("div.mcePaste");g(b,function(b){h(b);b.parentNode.className!="mcePaste"&&(a=a+b.innerHTML)})}g(r.select("div.mcePaste"),
function(a){r.remove(a)});j&&s.setRng(j);c({content:a});r.unbind(d.getDoc(),"mousedown",u);r.unbind(d.getDoc(),"keydown",u)},0)}}}var l=this;l.editor=d;l.url=b;l.onPreProcess=new tinymce.util.Dispatcher(l);l.onPostProcess=new tinymce.util.Dispatcher(l);l.onPreProcess.add(l._preProcess);l.onPostProcess.add(l._postProcess);l.onPreProcess.add(function(a,b){d.execCallback("paste_preprocess",a,b)});l.onPostProcess.add(function(a,b){d.execCallback("paste_postprocess",a,b)});a=[{repair:function(a){var b=
/<meta charset='utf-8'>(<td.*<\/td>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody><tr>'+b[1]+"</tr></tbody></table>":a}},{repair:function(a){var b=/<meta charset='utf-8'>(<tr.*<\/tr>)<br class="Apple-interchange-newline">/.exec(a);return b?'<table class="confluenceTable"><tbody>'+b[1]+"</tbody></table>":a}}];d.onKeyDown.addToTop(function(a,b){if((tinymce.isMac?b.metaKey:b.ctrlKey)&&!b.shiftKey&&86===b.keyCode||b.shiftKey&&45===b.keyCode)return!1});
d.pasteAsPlainText=j(d,"paste_text_sticky_default");d.addCommand("mceInsertClipboardContent",function(a,b){c(b,!0)});j(d,"paste_text_use_dialog")||d.addCommand("mcePasteText",function(){var a=tinymce.util.Cookie;d.pasteAsPlainText=!d.pasteAsPlainText;d.controlManager.setActive("pastetext",d.pasteAsPlainText);d.pasteAsPlainText&&!a.get("tinymcePasteText")&&(j(d,"paste_text_sticky")?d.windowManager.alert(d.translate("paste.plaintext_mode_sticky")):d.windowManager.alert(d.translate("paste.plaintext_mode")),
j(d,"paste_text_notifyalways")||a.set("tinymcePasteText","1",new Date((new Date).getFullYear()+1,12,31)))});d.addButton("pastetext",{title:"paste.paste_text_desc",cmd:"mcePasteText"});d.addButton("selectall",{title:"paste.selectall_desc",cmd:"selectall"});j(d,"paste_auto_cleanup_on_paste")&&(tinymce.isOpera||/Firefox\/2/.test(navigator.userAgent)?d.onKeyDown.addToTop(function(a,b){((tinymce.isMac?b.metaKey:b.ctrlKey)&&86===b.keyCode||b.shiftKey&&45===b.keyCode)&&i(b)}):d.onPaste.addToTop(function(a,
b){return i(b)}));d.onInit.add(function(){d.controlManager.setActive("pastetext",d.pasteAsPlainText);j(d,"paste_block_drop")&&d.dom.bind(d.getBody(),"dragend dragover draggesture dragdrop drop drag".split(" "),function(a){a.preventDefault();a.stopPropagation();return false})});d.onSaveContent.add(function(a,b){var d=e("<div/>").html(b.content);e('ul.inline-task-list > li[data-pasted-task="true"]',d).each(function(){var a=e(this),b=a.attr("data-inline-task-id");b&&1<d.find('ul.inline-task-list > li[data-inline-task-id="'+
b+'"]').size()&&a.attr("data-inline-task-id","")});b.content=d.html()});l._legacySupport()},getInfo:function(){return{longname:"AtlassianEditorPaste",author:"Atlassian",authorurl:"http://www.atlassian.com",infourl:"http://www.atlassian.com",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_preProcess:function(a,b){function c(a){g(a,function(a){i=a.constructor==RegExp?i.replace(a,""):i.replace(a[0],a[1])})}var e=this.editor,i=b.content,l=tinymce.grep,n=tinymce.explode,k=tinymce.trim,m,q;if(!1!=
e.settings.paste_enable_default_filters){tinymce.isIE&&9<=document.documentMode&&(c([[/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6r]|p|div|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|blockquote|center|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1"]]),c([[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]]));if(/class="?Mso|style="[^"]*\bmso-|w:WordDocument/i.test(i)||b.wordContent){b.wordContent=!0;c([/^\s*(&nbsp;)+/gi,/(&nbsp;|<br[^>]*>)+\s*$/gi]);j(e,
"paste_convert_headers_to_strong")&&(i=i.replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>"));j(e,"paste_convert_middot_lists")&&c([[/<\!--\[if !supportLists\]--\>/gi,"$&__MCE_ITEM__"],[/(<span[^>]+(?:mso-list:|:\s*symbol)[^>]+>)/gi,"$1__MCE_ITEM__"],[/(<p[^>]+(?:MsoListParagraph)[^>]+>)/gi,"$1__MCE_ITEM__"]]);c([/<\!--[\s\S]+?--\>/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],
[/&nbsp;/gi," "]]);do m=i.length,i=i.replace(/(<[a-z][^>]*\s)(?:id|name|language|type|on\w+|\w+:\w+)=(?:"[^"]*"|\w+)\s?/gi,"$1");while(m!=i.length);0===j(e,"paste_retain_style_properties").replace(/^none$/i,"").length?i=i.replace(/<\/?span[^>]*>/gi,""):c([[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(a,b){return b.length>0?b.replace(/./," ").slice(Math.floor(b.length/2)).split("").join(" "):""}],[/(<[a-z][^>]*)\sstyle="([^"]*)"/gi,function(a,b,d){var c=
[],e=0,a=n(k(d).replace(/&quot;/gi,"'"),";");g(a,function(a){function b(a){return a+(a!=="0"&&/\d$/.test(a))?"px":""}var d,f=n(a,":");if(f.length===2){a=f[0].toLowerCase();d=f[1].toLowerCase();switch(a){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-table-layout-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":c[e++]=
a.replace(/^mso-|-alt$/g,"")+":"+b(d);return;case "horiz-align":c[e++]="text-align:"+d;return;case "vert-align":c[e++]="vertical-align:"+d;return;case "font-color":case "mso-foreground":c[e++]="color:"+d;return;case "mso-background":case "mso-highlight":c[e++]="background:"+d;return;case "mso-default-height":c[e++]="min-height:"+b(d);return;case "mso-default-width":c[e++]="min-width:"+b(d);return;case "mso-padding-between-alt":c[e++]="border-collapse:separate;border-spacing:"+b(d);return;case "text-line-through":if(d==
"single"||d=="double")c[e++]="text-decoration:line-through";return;case "mso-zero-height":d=="yes"&&(c[e++]="display:none");return}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?!align|decor|indent|trans)|top-bar|version|vnd|word-break)/.test(a)||(c[e++]=a+":"+f[1])}});return e>0?b+' style="'+c.join(";")+'"':b}]])}j(e,"paste_convert_headers_to_strong")&&c([[/<h[1-6][^>]*>/gi,"<p><strong>"],[/<\/h[1-6][^>]*>/gi,"</strong></p>"]]);
c([[/Version:[\d.]+\nStartHTML:\d+\nEndHTML:\d+\nStartFragment:\d+\nEndFragment:\d+/gi,""]]);q=j(e,"paste_strip_class_attributes");"none"!==q&&(m=function(a,b){if(q==="all")return"";var d=l(n(b.replace(/^(["'])(.*)\1$/,"$2")," "),function(a){return/^(?!mso)/i.test(a)});return d.length?' class="'+d.join(" ")+'"':""},i=i.replace(/ class="([^"]+)"/gi,m),i=i.replace(/ class=([\-\w]+)/gi,m));j(e,"paste_remove_spans")&&(i=i.replace(/<\/?span[^>]*>/gi,""));b.content=i}},_postProcess:function(a,b){var c=
this.editor,e=c.dom,i;!1!=c.settings.paste_enable_default_filters&&(b.wordContent&&(g(e.select("a",b.node),function(a){(!a.href||-1!==a.href.indexOf("#_Toc"))&&e.remove(a,1)}),j(c,"paste_convert_middot_lists")&&this._convertLists(a,b),i=j(c,"paste_retain_style_properties"),tinymce.is(i,"string")&&("all"!==i&&"*"!==i)&&(i=tinymce.explode(i.replace(/^none$/i,"")),g(e.select("*",b.node),function(a){var b={},d=0,c,f,g;if(i)for(c=0;c<i.length;c++)if(f=i[c],g=e.getStyle(a,f))b[f]=g,d++;e.setAttrib(a,"style",
"");i&&0<d?e.setStyles(a,b):"SPAN"===a.nodeName&&!a.className&&e.remove(a,!0)}))),j(c,"paste_remove_styles")||j(c,"paste_remove_styles_if_webkit")&&tinymce.isWebKit?g(e.select("*[style]",b.node),function(a){a.removeAttribute("style");a.removeAttribute("data-mce-style")}):tinymce.isWebKit&&g(e.select("*",b.node),function(a){a.removeAttribute("data-mce-style")}))},_convertLists:function(a,b){var c=a.editor.dom,e,j,i=-1,n,k=[],m,q;g(c.select("p",b.node),function(a){var b,d="",q;for(b=a.firstChild;b&&
3===b.nodeType;b=b.nextSibling)d+=b.nodeValue;d=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,"").replace(/&nbsp;/g," ");/^(__MCE_ITEM__)+[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*\u00a0*/.test(d)&&(q="ul");/^__MCE_ITEM__\s*\w+\.\s*\u00a0+/.test(d)&&(q="ol");q?(n=parseFloat(a.style.marginLeft||0),n>i&&k.push(n),!e||q!=m?(e=c.create(q),c.insertAfter(e,a)):n>i?e=j.appendChild(c.create(q)):n<i&&(b=tinymce.inArray(k,n),d=c.getParents(e.parentNode,q),e=d[d.length-1-b]||e),g(c.select("span",a),function(a){var b=a.innerHTML.replace(/<\/?\w+[^>]*>/gi,
"");q=="ul"&&/^__MCE_ITEM__[\u2022\u00b7\u00a7\u00d8o\u25CF]/.test(b)?c.remove(a):/^__MCE_ITEM__[\s\S]*\w+\.(&nbsp;|\u00a0)*\s*/.test(b)&&c.remove(a)}),b=a.innerHTML,b="ul"==q?a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^[\u2022\u00b7\u00a7\u00d8o\u25CF]\s*(&nbsp;|\u00a0)+\s*/,""):a.innerHTML.replace(/__MCE_ITEM__/g,"").replace(/^\s*\w+\.(&nbsp;|\u00a0)+\s*/,""),j=e.appendChild(c.create("li",0,b)),c.remove(a),i=n,m=q):e=i=0});q=b.node.innerHTML;-1!==q.indexOf("__MCE_ITEM__")&&(b.node.innerHTML=
q.replace(/__MCE_ITEM__/g,""))},_insert:function(a,b){var c=this.editor,e=c.selection.getRng(!0),g,i,a=this._applyOnBeforeSetContentListeners(c,a);i=this.parse(a,c.getDoc());(g=this._getClipboardInserter(c,e,i))?(g.insert(c,e,i),c.selection.onSetContent.dispatch(c.selection,{content:a,format:"html"}),c.addVisual()):(!c.selection.isCollapsed()&&e.startContainer!=e.endContainer&&c.execCommand("mceDelete",!1,null,{skip_undo:!0}),c.execCommand("mceInsertContent",!1,a,{skip_undo:b}))},_getClipboardInserter:function(a,
b,c){var g;e.each(this.clipboardInserters,function(e,i){if(i.shouldInsert(a,b,c))return g=i,!1});return g},clipboardInserters:[{shouldInsert:function(a,b,c){a=3===b.startContainer.nodeType?b.startContainer.parentNode:b.startContainer;return(tinymce.isIE?"LI"===a.nodeName&&0===a.childNodes.length:"LI"===a.nodeName&&1===a.childNodes.length&&"BR"===a.firstChild.nodeName)&&c.length===c.filter("ol,ul").length&&0<c.children("li").length},insert:function(a,b,c){b=e(3===b.startContainer.nodeType?b.startContainer.parentNode:
b.startContainer);c=c.children();a.undoManager.beforeChange();a.undoManager.add();i(b.parent(),c);b.replaceWith(c);a.selection.select(c.last()[0],!0);a.selection.collapse();a.undoManager.add()}},{shouldInsert:function(a,b,c){!b.collapsed||0!=b.startOffset?b=!1:(a=e(b.startContainer).closest("ol, ul",a.getBody()),0===a.length?b=!1:(b=(new tinymce.dom.TreeWalker(b.startContainer,a[0])).prev(!0),b=void 0===b||e(b).is("li")));return b&&c.length===c.filter("ol,ul").length&&0<c.children("li").length},insert:function(a,
b,c){b=e(b.startContainer).closest("li",a.getBody());c=c.children();a.undoManager.beforeChange();a.undoManager.add();i(b.parent(),c);b.before(c);a.selection.select(b[0],!0);a.selection.collapse(!0);a.undoManager.add()}},{shouldInsert:function(a,b,c){!b.collapsed||3===b.startContainer.nodeType&&b.startOffset!=b.startContainer.nodeValue.length||1===b.startContainer.nodeType&&b.startOffset!=b.startContainer.childNodes.length?b=!1:(a=e(b.startContainer).closest("ol, ul",a.getBody()),0===a.length?b=!1:
(b=(new tinymce.dom.TreeWalker(b.startContainer,a[0])).next(!0),b=void 0===b||e(b).is("li")));return b&&c.length===c.filter("ol,ul").length&&0<c.children("li").length},insert:function(a,b,c){b=e(b.startContainer).closest("li",a.getBody());c=c.children();a.undoManager.beforeChange();a.undoManager.add();i(b.parent(),c);b.after(c);a.selection.select(c.last()[0],!0);a.selection.collapse(!1);a.undoManager.add()}},{shouldInsert:function(a,b,c){return b.collapsed||!e(b.commonAncestorContainer).is("table.confluenceTable > tbody, table.confluenceTable > tbody > tr")?
!1:c.is("table:not(.wysiwyg-macro)")},insert:function(a,b,c){function g(a,b){for(var d=a.shift(),c=b.shift();d&&c;d=a.shift(),c=b.shift())e(c).html(e(d).html())}var i=0<c.children("tbody").length?c.children("tbody").children("tr"):c.children("tr"),j=i.children("td, th"),n=e(".mceSelected",a.getDoc()),c=n.parent();a.undoManager.beforeChange();a.undoManager.add();if(1===c.length)g(e.makeArray(j),e.makeArray(n));else{i=e.makeArray(i);c=e.makeArray(c);j=i.shift();for(n=c.shift();j&&n;j=i.shift(),n=c.shift())g(e.makeArray(e(j).children()),
e.makeArray(e(n).children()))}a.selection.setRng(b);a.undoManager.add()}},{shouldInsert:function(a,b,c){a=e(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent");if(0===a.length)return!1;a=a.closest("table.confluenceTable",".mceContent");if(!(0===a.length||0===a.children("tbody").length)){if(!c.is("table:not(.wysiwyg-macro)"))return!1;var g=!1;a.find("*[colspan], *[rowspan]").each(function(a,b){if(1<e(b).attr("rowspan")||1<e(b).attr("colspan"))return g=!0,!1});return!g}},insert:function(a,
b,c){var b=e(b.startContainer).closest("td.confluenceTd, th.confluenceTh",".mceContent"),g=b.closest("table.confluenceTable",".mceContent"),c=0<c.children("tbody").length?c.children("tbody").children("tr"):c.children("tr"),i=g.children("tbody").children("tr"),j=c.length,n=c.first().children("td, th").length,k=i.length,m=i.first().children("td, th").length,q=b.parent().index(),o=b.index();a.undoManager.beforeChange();a.undoManager.add();var s=o+n-m,j=q+j-k,s=0>s?0:s,j=0>j?0:j;i.each(function(a,b){for(var d=
e(b),c=d.children().last(),f=0;f<s;f++)d.append(c.clone().html(tinymce.isIE?"":"<br/>"))});n=i.last();for(i=0;i<j;i++){n=e("<tr></tr>").insertAfter(n);for(k=0;k<m+s;k++)n.append('<td class="confluenceTd">'+(tinymce.isIE?"":"<br/>")+"</td>")}var r=[];g.children("tbody").children("tr").slice(q).each(function(a,b){r.push(e.makeArray(e(b).children("th, td").slice(o)))});var A=[];c.each(function(a,b){A.push(e.makeArray(e(b).children("th, td")))});g=A.shift();for(c=r.shift();g&&c;g=A.shift(),c=r.shift()){m=
g.shift();for(q=c.shift();m&&q;m=g.shift(),q=c.shift())e(q).html(e(m).html())}a.selection.select(b[0],1);a.selection.collapse(!0);a.undoManager.add()}}],_applyOnBeforeSetContentListeners:function(a,b){var c={content:b,format:"html"};a.selection.onBeforeSetContent.dispatch(a.selection,c);return c.content},_insertPlainText:function(a){function b(b){g(b,function(b){a=b.constructor==RegExp?a.replace(b,""):a.replace(b[0],b[1])})}var c=this.editor,e=j(c,"paste_text_linebreaktype"),i=j(c,"paste_text_replacements"),
l=tinymce.is;"string"===typeof a&&0<a.length&&(/<(?:p|br|h[1-6]|ul|ol|dl|table|t[rdh]|div|blockquote|fieldset|pre|address|center)[^>]*>/i.test(a)?b([/[\n\r]+/g]):b([/\r+/g]),b([[/<\/(?:p|h[1-6]|ul|ol|dl|table|div|blockquote|fieldset|pre|address|center)>/gi,"\n\n"],[/<br[^>]*>|<\/tr>/gi,"\n"],[/<\/t[dh]>\s*<t[dh][^>]*>/gi,"\t"],/<[a-z!\/?][^>]*>/gi,[/&nbsp;/gi," "],[/(?:(?!\n)\s)*(\n+)(?:(?!\n)\s)*/gi,"$1"],[/\n{3,}/g,"\n\n"]]),a=c.dom.decode(tinymce.html.Entities.encodeRaw(a)),l(i,"array")?b(i):l(i,
"string")&&b(RegExp(i,"gi")),"none"==e?b([[/\n+/g," "]]):"br"==e?b([[/\n/g,"<br />"]]):"p"==e?b([[/\n+/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"]]):b([[/\n\n/g,"</p><p>"],[/^(.*<\/p>)(<p>)$/,"<p>$1"],[/\n/g,"<br />"]]),c.execCommand("mceInsertContent",!1,a))},_legacySupport:function(){var a=this,b=a.editor;b.addCommand("mcePasteWord",function(){b.windowManager.open({file:a.url+"/pasteword.htm",width:parseInt(j(b,"paste_dialog_width")),height:parseInt(j(b,"paste_dialog_height")),inline:1})});j(b,"paste_text_use_dialog")&&
b.addCommand("mcePasteText",function(){b.windowManager.open({file:a.url+"/pastetext.htm",width:parseInt(j(b,"paste_dialog_width")),height:parseInt(j(b,"paste_dialog_height")),inline:1})});b.addButton("pasteword",{title:"paste.paste_word_desc",cmd:"mcePasteWord"})},parse:function(a,b){return"<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?e(a,b||document):e("<div>"+a+"</div>",b||document).contents()},repair:function(c){if(!c)return c;e.each(a,function(a,e){c=e.repair(c)});return c}});tinymce.PluginManager.add("aePaste",
tinymce.plugins.AtlassianEditorPaste)})($);
} catch (err) {
    if (console && console.log && console.error) {
        console.log("Error running batched script.");
        console.error(err);
    }
}

;
